<apex:page standardcontroller="Evaluation__c" extensions="CMShiftAssessmentEdit" id="cmShiftAssessmentEdit">
    <apex:includeScript value="{!URLFOR($Resource.jquery, 'js/jquery-1.7.2.min.js')}" />
    <apex:includeScript value="{!URLFOR($Resource.EvaluationJS)}" />
    <apex:includeScript value="{!URLFOR($Resource.CommonJS)}" />
    <apex:includeScript value="{!URLFOR($Resource.jquery, 'js/jquery-ui-1.8.21.custom.min.js')}" />
    <apex:includeScript value="{!$Resource.AnnotoriousDev}" />
    <apex:includeScript value="{!$Resource.AnotoJS}" />
    <apex:stylesheet value="{!URLFOR($Resource.jquery, 'css/custom-theme/jquery-ui-1.8.21.custom.css')}" />
    <apex:stylesheet value="{!URLFOR($Resource.EvaluationCSS)}" />
    <apex:stylesheet value="{!URLFOR($Resource.Annotorious, 'css/annotorious.css')}" />
    <style>
        [id$=skinBodyFooter] {
            clear: both;
        }
        [id$=bodyMapOtherComments] {
            clear: both;
        }
        .thinking {
            opacity: 0.8;
            background-color: #ccc;
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0px;
            left: 0px;
            z-index: 1000;
        }
        .thinkingwheel {
            position: absolute;
            left: 40%;
            top: 48%;
            background-color: white;
            border: 2px solid gray;
            padding: 2px;
        }
        hr {
            color: #ECECEC;
            background-color: #ECECEC;
            margin-bottom: 20px;
            margin-top: 20px;
            border: none;
            height: 5px;
        }
        .evaluationTabHeader .sectionCompleted,
        .sectionCompletedLink {
            background-image: url("{!URLFOR($Resource.EvaluationResources, 'greencheck.png')}");
            background-repeat: no-repeat;
            padding-top: 22px;
        }
        .evaluationTabHeader .sectionNotCompleted,
        .sectionNotCompletedLink {
            background-image: url("{!URLFOR($Resource.EvaluationResources, 'orangecheck.png')}");
            background-repeat: no-repeat;
            padding-top: 22px;
        }
        .sectionNotCompletedLink,
        .sectionCompletedLink {
            vertical-align: bottom !important;
            background-position: center top;
            padding-left: 10px;
            padding-right: 10px;
        }
        .mycols {
            width: 15%;
            padding-left: 25px;
            cellspacing: 15px;
        }
        
        .hidePain{
        	display:none;
        }
        
        .showPain{
        	display: block;
        }
    </style>
    <script>
        function setFocusOnLoad() {} // Overwrite VF function to focus on the 1st field
        jQuery.noConflict();

        jQuery(document).ready(function ($) {
            handleSliderChange = function (inputIdToUpdate) {
                // Closure is so much fun :)
                var $inputToUpdate = $(document.getElementById(inputIdToUpdate));
                return function (value) {
                    // Assign the value to the hidden input from the the slider
                    $inputToUpdate.val(value);
                };
            };
            handleDiagnosis = function () {
                var ivValue = $('[id$=ivPicklist]').val();
                var siteIssue = $('[id$=ivsiteIssues]').val();
                var isolationValue = $('[id$=isolationRequired]').val();

                if (isolationValue == 'Yes') {
                    $('[id$=isolationType]').show();
                    $('[id$=isolationTypeLabel]').show();
                } else {
                    $('[id$=isolationType]').hide();
                    $('[id$=isolationTypeLabel]').hide();
                    $('[id$=isolationType]').val('');

                }

                if (ivValue == 'Yes') {
                    $('[id$=ivSection]').show();

                    if (siteIssue == 'Yes') {
                        $('[id$=ivnarrativeNoteLabel]').show();
                        $('[id$=ivnarrativeNote]').show();

                    } else {
                        $('[id$=ivnarrativeNoteLabel]').hide();
                        $('[id$=ivnarrativeNote]').hide();
                        $('[id$=ivnarrativeNote]').val('');

                    }

                } else {
                    $('[id$=ivSection]').hide();
                    $('[id$=ivSection]').find('select,input:text,textarea').val('');
                    $('[id$=ivSection]').find('input:checkbox').prop('checked', false);
                }

            };

            handleVitals = function () {
                var diagHR = $('[id$=DiagheartRate]').val();
                var diagO2 = $('[id$=DiagO2]').val();

                if (diagHR != '' && (diagHR > 120 || diagHR < 60)) {

                    $('[id$=DiaginterventionLabel]').show();
                    $('[id$=DiaginterventionPicklist]').show();

                    if ($('[id$=DiaginterventionPicklist]').val() == 'Yes') {
                        $('[id$=DiagnarrativeLabel]').show();
                        $('[id$=DiaginterventionDescribe]').show();
                    } else {
                        $('[id$=DiagnarrativeLabel]').hide();
                        $('[id$=DiaginterventionDescribe]').hide();
                        $('[id$=DiaginterventionDescribe]').val('');

                    }
                } else {
                    $('[id$=DiaginterventionLabel]').hide();
                    $('[id$=DiaginterventionPicklist]').hide();
                    $('[id$=DiagnarrativeLabel]').hide();
                    $('[id$=DiaginterventionDescribe]').hide();
                    $('[id$=DiaginterventionDescribe]').val('');
                    $('[id$=DiaginterventionPicklist]').val('');
                }

                if (diagO2 != '' && diagO2 < 90) {

                    $('[id$=DiagO2interventionLabel]').show();
                    $('[id$=DiagO2interventionPicklist]').show();

                    if ($('[id$=DiagO2interventionPicklist]').val() == 'Yes') {
                        $('[id$=DiagO2narrativeLabel]').show();
                        $('[id$=DiagO2interventionDescribe]').show();
                    } else {
                        $('[id$=DiagO2narrativeLabel]').hide();
                        $('[id$=DiagO2interventionDescribe]').hide();
                        $('[id$=DiagO2interventionDescribe]').val('');

                    }

                } else {

                    $('[id$=DiagO2interventionLabel]').hide();
                    $('[id$=DiagO2interventionPicklist]').hide();
                    $('[id$=DiagO2narrativeLabel]').hide();
                    $('[id$=DiagO2interventionDescribe]').hide();
                    $('[id$=DiagO2interventionDescribe]').val('');
                    $('[id$=DiagO2interventionPicklist]').val('');

                }

            };


            handleHeartBeat = function () {
                var heartRate = $('[id$=heartRate]').val();
                var interventionpicklist = $('[id$=interventionPicklist]').val();

                if (heartRate == 'Irregular') {
                    $('[id$=interventionLabel]').show();
                    $('[id$=interventionPicklist]').show();

                    if (interventionpicklist == 'Yes') {
                        $('[id$=interventionDescribe]').show();
                        $('[id$=narrativeLabel]').show();

                    } else {
                        $('[id$=interventionDescribe]').hide();
                        $('[id$=narrativeLabel]').hide();
                        $('[id$=interventionDescribe]').val('');
                    }
                } else {
                    $('[id$=interventionLabel]').hide();
                    $('[id$=interventionPicklist]').hide();
                    $('[id$=interventionDescribe]').hide();
                    $('[id$=narrativeLabel]').hide();
                    $('[id$=interventionPicklist]').val('');
                    $('[id$=interventionDescribe]').val('');

                }
            };

            handlePeripheralPulses = function () {
                var pulsePresent = $('[id$=peripheralPulses]').val();

                if (pulsePresent == 'No') {
                    $('[id$=peripheraldescribeLabel]').show();
                    $('[id$=peripheralDescribe]').show();
                } else {
                    $('[id$=peripheraldescribeLabel]').hide();
                    $('[id$=peripheralDescribe]').hide();
                    $('[id$=peripheralDescribe]').val('');

                }

            };

            handleDysreflexia = function () {
                var dysreflexValue = $('[id$=dysreflexia]').val();
                var issueValue = $('[id$=issueResolved]').val();

                if (dysreflexValue == 'Yes') {
                    $('[id$=DysreflexiaDetails]').show();
                    if (issueValue == 'No') {
                        $('[id$=issueDescribeLabel]').show();
                        $('[id$=issueDescribe]').show();
                    } else {
                        $('[id$=issueDescribeLabel]').hide();
                        $('[id$=issueDescribe]').hide();
                        $('[id$=issueDescribe]').val('');
                    }
                } else {
                    $('[id$=DysreflexiaDetails]').hide();
                    $('[id$=DysreflexiaDetails]').find('select,input:text,textarea').val('');
                    $('[id$=DysreflexiaDetails]').find('input:checkbox').prop('checked', false);
                }

            };

            handleVentSection = function () {
                var ventValue = $('[id$=ventilatorPicklist]').val();
                var ventType = $('[id$=ventilatorType]').val();

                if (ventValue == 'Yes') {
                    $('[id$=ventilatorDetails]').show();

                    if (ventType == 'Intermittent') {
                        $('[id$=ventilatorScheduleLabel]').show();
                        $('[id$=ventilatorSchedule]').show();
                    } else {
                        $('[id$=ventilatorScheduleLabel]').hide();
                        $('[id$=ventilatorSchedule]').hide();
                        $('[id$=ventilatorSchedule]').val('');
                    }
                } else {
                    $('[id$=ventilatorDetails]').hide();
                    $('[id$=ventilatorType]').val('');
                    $('[id$=ventilatorMode]').val('');
                    $('[id$=ventilatorRate]').val('');
                    $('[id$=FIO2]').val('');
                    $('[id$=peep]').val('');
                    $('[id$=tv]').val('');
                    $('[id$=ps]').val('');
                    $('[id$=ventilatorSchedule]').val('');
                }

            };

            handleO2 = function () {
                var O2Value = $('[id$=o2]').val();
                if (O2Value == 'Yes') {
                    $('[id$=o2Details]').show();
                } else {
                    $('[id$=o2Details]').hide();
                    $('[id$=o2Type]').val('');
                    $('[id$=o2interventionNeeded]').val('');
                    $('[id$=litersMin]').val('');
                    $('[id$=o2Documentation]').val('');
                    $('[id$=o2Note]').val('');
                }

            };

            handleSuctioning = function () {
                var suctionValue = $('[id$=suctioning]').val();
                if (suctionValue == 'Yes') {
                    $('[id$=suctioningDetails]').show();
                } else {
                    $('[id$=suctioningDetails]').hide();
                    $('[id$=suctioningDetails]').find('select,input:text,textarea').val('');
                    $('[id$=suctioningDetails]').find('input:checkbox').prop('checked', false);
                    handleOther('breathesound');
                }

            };

            handleTrach = function () {
                var trachValue = $('[id$=trachPicklist]').val();
                var trachTypeValue = $('[id$=trachType]').val();
                var trachSizeValue = $('[id$=trachSize]').val();

                if (trachValue == 'Yes') {
                    $('[id$=trachDetails]').show();

                    if (trachTypeValue == 'Other') {
                        $('[id$=trachTypeOtherLabel]').show();
                        $('[id$=trackTypeOther]').show();
                    }
                    if (trachSizeValue == 'Other') {
                        $('[id$=trachSizeOtherLabel]').show();
                        $('[id$=trackSizeOther]').show();
                    }
                    if (trachSizeValue != 'Other') {
                        $('[id$=trachSizeOtherLabel]').hide();
                        $('[id$=trackSizeOther]').hide();
                        $('[id$=trackSizeOther]').val('');

                    }
                    if (trachTypeValue != 'Other') {
                        $('[id$=trachTypeOtherLabel]').hide();
                        $('[id$=trackTypeOther]').hide();
                        $('[id$=trackTypeOther]').val('');

                    }

                } else {
                    $('[id$=trachDetails]').hide();
                    $('[id$=trachDetails]').find('select,input:text,textarea').val('');
                    $('[id$=trachDetails]').find('input:checkbox').prop('checked', false);

                }
            };
            
            
            // if checkbox for Other is selected, enable other field
            handleOther = function (ids) {
                var theval = false;

                $('input[id*=' + ids + ']').each(function (index, element) {
                    if (element.value.indexOf('Other') == 0)
                        theval = $(element).prop('checked');
                });

                if (theval == true) {
                    // enable the text field called other
                    $('input[id$=' + ids + 'other]').prop('readonly', false);
                } else {
                    // disable the field and empty it out
                    $('input[id$=' + ids + 'other]').prop('readonly', true);
                    $('input[id$=' + ids + 'other]').prop('readonly', true).val('');
                }
            };

            handleCardio = function () {
                handleHeartBeat();
                handlePeripheralPulses();
                handleOther('breathesound');
                handleVentSection();
                handleO2();
                handleSuctioning();
                handleTrach();
                handleDysreflexia();

            };
            
             disableAnno = function ( el, annotype ) {
            	// disable body map if intact is checked
                anno.hideSelectionWidget( el );

                $('.' + annotype + 'annotation-number').remove();
                $('table#' + annotype + 'annotations tr').remove();
            	// because the remove handler is not called on the removeAll, remove each one individually
                anno.getAnnotations(el).each( function( element) {
                	anno.removeAnnotation(element);
                	Visualforce.remoting.Manager.invokeAction(
                		'{!$RemoteAction.CMShiftAssessmentEdit.deleteAnnotation}',
                		element.Id,
               			function (result, event) {
                    	if (!event.status) {
                        	alert("Failed to delete annotation! Error: " + event.message);
                        	anno.addAnnotation(element);
                    	}
                	});
                
                });
            };
            
             var addOrModifyAnnotation = function (annotation, isNew) {
                if (isNew) {
                    if (annotation.Id !== undefined) {
                        return;  // So that annotations added at initial page loads are not duplicated
                    };
                    annotation.Id = null;
                }
                Visualforce.remoting.Manager.invokeAction(
                    '{!$RemoteAction.CMShiftAssessmentEdit.addOrModifyAnnotation}',
                    annotation.Id,
                    annotation.src,
                    annotation.shapes[0].geometry.x,
                    annotation.shapes[0].geometry.y,
                    annotation.shapes[0].geometry.width,
                    annotation.shapes[0].geometry.height,
                    annotation.shapes[0].type,
                    annotation.text,
                    '{!Evaluation__c.Id}',
                    function (result, event) {
                        if (event.status) {
                            annotation.Id = result.Id;
                        } else {
                            alert("Failed to update annotation! Error: " + event.message);
                        }
                    }
                );
            };
            anno.addHandler('onAnnotationCreated', function (annotation) {
                addOrModifyAnnotation(annotation, true);
            });
            anno.addHandler('onAnnotationUpdated', function (annotation) {
                addOrModifyAnnotation(annotation, false);
            });
            anno.addHandler("onAnnotationRemoved", function (annotation) {
                Visualforce.remoting.Manager.invokeAction(
                    '{!$RemoteAction.CMShiftAssessmentEdit.deleteAnnotation}',
                    annotation.Id,
                    function (result, event) {
                        if (!event.status) {
                            alert("Failed to delete annotation! Error: " + event.message);
                            anno.addAnnotation(annotation);
                        }
                    }
                );

            });
            
            disablePain = function() {
            	var Intact = $('[id$=skinIntact]').val();
            	 var el = $('#bodyMap').get(0);
            	 
            	if(Intact == 'No') {
            		$('[id$=painSection]').removeClass("hidePain").addClass("showPain");
            				
            	} else {
            		//disableAnno( el, 'bodyMap' );
            		$('[id$=painSection]').removeClass("showPain").addClass("hidePain");
            	//	$('[id$=painSection]').find('select,input:text,textarea').val('');
            		
           		}
            	
            
           };
            
            handleSkinBody = function() {
            	disablePain();
            
            };

            handleRancho = function () {

                var ranchoScore = $('[id$=ranchoValue]').val();

                if (ranchoScore && ranchoScore.indexOf('1') < 0 && ranchoScore != '') {
                    $('[id$=ranchoDetails]').show();

                } else {
                    $('[id$=ranchoDetails]').hide();
                    $('[id$=ranchoDetails]').find('select,input:text,textarea').val('');
                    $('[id$=ranchoDetails]').find('input:checkbox').prop('checked', false);

                }

            };

            handleExpression = function () {

                var expressionValue = $('[id$=needsKnown]').val();

                if (expressionValue == 'No') {
                    $('[id$=verbalExpressionLabel]').show();
                    $('[id$=verbalExpression]').show();

                    if ($('[id$=verbalExpression]').val() == 'Non-Verbal') {
                        $('[id$=otherExpressionLabel]').show();
                        $('[id$=expressionOther]').show();
                    } else {

                        $('[id$=otherExpressionLabel]').hide();
                        $('[id$=expressionOther]').hide();
                        $('[id$=expressionOther]').find('input:checkbox').prop('checked', false);

                    }

                } else {
                    $('[id$=verbalExpressionLabel]').hide();
                    $('[id$=verbalExpression]').hide();
                    $('[id$=verbalExpression]').val('');
                    $('[id$=otherExpressionLabel]').hide();
                    $('[id$=expressionOther]').hide();
                    $('[id$=expressionOther]').find('input:checkbox').prop('checked', false);

                }

            };

            handleMood = function() {

                // if sad or flat, enable depression question
                var mood = '';
                $('input[id*=moodlist]').each(function (index, element) {
                    if ( $(element).prop('checked') == true )
                        mood += $(element).val() + ';';
                });

                if ( mood.indexOf('Unable to Determine') >= 0 ) {
                    // disable all others
                    $('input[id*=moodlist]').each(function (index, element) {
                        if ($(element).val() != 'Unable to Determine') {
                            $(element).prop('checked', false);
                            $(element).prop('disabled', true);
                            mood -= $(element).val() + ';';

                        }
                    });
                           $('[id$=sadflatHurt]').hide();
                           $('[id$=sadflatHurtLabel]').hide();
                           $('[id$=sadflatHurt]').val('');
                           $('[id$=plantoHarm]').hide();
                           $('[id$=plantoHarmLabel]').hide();
                           $('[id$=plantoHarm]').val('');

                } else {

                    $('input[id*=moodlist]').each(function (index, element) {
                            $(element).prop('disabled', false);

                        });

                        if ( mood.indexOf('Sad') >=  0 || mood.indexOf('Flat') >=  0 ) {
                            $('[id$=sadflatHurt]').show();
                            $('[id$=sadflatHurtLabel]').show();

                            if($('[id$=sadflatHurt]').val() == 'Yes') {

                                    $('[id$=plantoHarm]').show();
                                    $('[id$=plantoHarmLabel]').show();

                        } else {
                                    $('[id$=plantoHarm]').hide();
                                    $('[id$=plantoHarmLabel]').hide();
                                    $('[id$=plantoHarm]').val('');

                            }
                    } else {
                            $('[id$=sadflatHurt]').hide();
                            $('[id$=sadflatHurtLabel]').hide();
                            $('[id$=sadflatHurt]').val('');
                            $('[id$=plantoHarm]').hide();
                            $('[id$=plantoHarmLabel]').hide();
                            $('[id$=plantoHarm]').val('');

                        }
                }

             };

            handleSitter = function () {

                if ($('[id$=sitter]').is(":checked")) {
                    $('[id$=onetooneHours]').show();

                } else {
                    $('[id$=hoursLabel]').hide();
                    $('[id$=onetooneHours]').hide();
                    $('[id$=onetooneHours]').val('');

                }

            };


            handleNeuro = function () {
                handleRancho();
                handleExpression();
                handleSitter();
                handleMood();

            };

            handleOrtho = function () {

                var castValue = $('[id$=cast]').val();
                //var castLocation $('[id$=castLocation]').val();
                var tractionValue = $('[id$=traction]').val();
                var deviceValue = $('[id$=extdev]').val();

                if (castValue == 'Yes') {
                    $('[id$=castLocationLabel]').show();
                    $('[id$=castLocation]').show();

                    if ($('[id$=castLocation]').val() == 'Other') {
                        $('[id$=OthercastLocationLabel]').show();
                        $('[id$=OthercastLocation]').show();

                    } else {
                        $('[id$=OthercastLocationLabel]').hide();
                        $('[id$=OthercastLocation]').hide();
                        $('[id$=OthercastLocation]').val('');
                    }
                } else {
                    $('[id$=castLocationLabel]').hide();
                    $('[id$=castLocation]').hide();
                    $('[id$=castLocation]').val('');
                }

                if (tractionValue == 'Yes') {
                    $('[id$=tractionLocationLabel]').show();
                    $('[id$=tractionLocation]').show();

                    $('[id$=tractionTypeLabel]').show();
                    $('[id$=tractionType]').show();

                    $('[id$=tractionWeightLabel]').show();
                    $('[id$=tractionWeight]').show();

                } else {
                    $('[id$=tractionLocationLabel]').hide();
                    $('[id$=tractionLocation]').hide();
                    $('[id$=tractionLocation]').val('');

                    $('[id$=tractionTypeLabel]').hide();
                    $('[id$=tractionType]').hide();
                    $('[id$=tractionType]').val('');

                    $('[id$=tractionWeightLabel]').hide();
                    $('[id$=tractionWeight]').hide();
                    $('[id$=tractionWeight]').val('');

                }

                if (deviceValue == 'Yes') {
                    $('[id$=externalDevicesLocationLabel]').show();
                    $('[id$=externalDevicesLocation]').show();

                    $('[id$=externalDevicesTypeLabel]').show();
                    $('[id$=externalDevicesType]').show();

                } else {
                    $('[id$=externalDevicesLocationLabel]').hide();
                    $('[id$=externalDevicesLocation]').hide();
                    $('[id$=externalDevicesLocation]').val('');

                    $('[id$=externalDevicesTypeLabel]').hide();
                    $('[id$=externalDevicesType]').hide();
                    $('[id$=externalDevicesType]').val('');

                }
            };

            hanldePsycho = function () {
                var copingValue = $('[id$=residentCoping]').val();

                if (copingValue == 'No') {
                    $('[id$=copingDescribeLabel]').show();
                    $('[id$=copingDescribe]').show();

                } else {
                    $('[id$=copingDescribeLabel]').hide();
                    $('[id$=copingDescribe]').hide();
                    $('[id$=copingDescribe]').val('');

                }
            };

            setUpFields = function () {
                // Apply rules to input fields
                $('body input').on("change", function (event) {
                    applyShowHideRulesToField(event.target);
                });
                $('body select').on("change", function (event) {
                    applyShowHideRulesToField(event.target);
                });
                $('body input').each(function (_, target) {
                    applyShowHideRulesToField(target);
                });
                $('body select').each(function (_, target) {
                    applyShowHideRulesToField(target);
                });
            };
            setUpFields();

            handleDiagnosis();
            handleCardio();
            handleOrtho();
            handleVitals();
            handleSkinBody();
            handleNeuro();
            hanldePsycho();
            
           
        }); //end "ready" function


        function getNextTab(currTab) {
            var nextTab = currTab;

            if (currTab == 'demographicsTab' || currTab == '')
                nextTab = 'diagnosticTab';
            else if (currTab == 'diagnosticTab')
                nextTab = 'cardioTab';
            else if (currTab == 'cardioTab')
                nextTab = 'nutritionTab';
            else if (currTab == 'nutritionTab')
                nextTab = 'skinBodyTab';
            else if (currTab == 'skinBodyTab')
                nextTab = 'neuroTab';
            else if (currTab == 'neuroTab')
                nextTab = 'orthoTab';
            else if (currTab == 'orthoTab')
                nextTab = 'psychoSocialTab';

            return nextTab;
        }
    </script>

    <div id="breadcrumb" class="breadcrumb">
        <a href="/">Home</a>&nbsp;>&nbsp;
        <a href="/apex/PersonsBeingServedListView">Persons Being Served</a>&nbsp;>&nbsp;
        <a href="/{!Evaluation__c.ServiceAssignment__r.Person_Being_Served__c}">{!Evaluation__c.ServiceAssignment__r.Person_Being_Served__r.Name}</a>&nbsp;>&nbsp;
        <a href="/{!Evaluation__c.ServiceAssignment__r.Admission__c}">Admission</a>&nbsp;>&nbsp;
        <a href="/{!Evaluation__c.ServiceAssignment__c}">Service Assignment</a>&nbsp;>&nbsp;
        <apex:outputText value="{!Evaluation__c.Name}" />
    </div>
    <apex:form id="wholePage">
        <apex:outputPanel rendered="false">
            <apex:inputhidden value="{!Evaluation__c.ServiceAssignment__r.Admission__r.Person_Being_Served__c}" />
            <apex:inputhidden value="{!Evaluation__c.Resident_Demonstrating_Issues__c}" />
            <apex:inputhidden value="{!Evaluation__c.Orientation__c}" />
            <apex:inputhidden value="{!Evaluation__c.Mood__c}" />
            <apex:inputhidden value="{!Evaluation__c.Breathe_Sounds__c}" />
            <apex:inputhidden value="{! Evaluation__c.Autonomic_Dysreflexia_Areas_Assessed__c}" />
            <apex:inputhidden value="{! Evaluation__c.Expression_Other__c}" />
        </apex:outputPanel>
        <apex:pageMessages id="pageMessages" />
        <apex:actionFunction action="{!changeTab}" name="changeTab" status="pageProcessing" oncomplete="setUpFields(); handleDiagnosis(); handleCardio(); handleSkinBody(); handleNeuro(); handleOrtho(); hanldePsycho();" reRender="pageMessages, wholeTabPanel, buttons">
            <apex:param name="nextTab" assignTo="{!nextTab}" value="" />
        </apex:actionFunction>
        <apex:tabPanel value="{!selectedTab}" id="wholeTabPanel" activeTabClass="evaluationActiveTab" inactiveTabClass="evaluationInactiveTab" headerClass="evaluationTabHeader" contentClass="evaluationTabContent">
            <apex:tab label="Demographics" name="demographicsTab" ontabenter="changeTab('demographicsTab'); return false;" styleClass="{!IF(Evaluation__c.Details_Section_Completed__c, 'sectionCompleted', 'sectionNotCompleted')}">
                <apex:pageBlock >
                    <apex:pageBlockSection Columns="2" Collapsible="false">
                        <apex:outputField Value="{!Evaluation__c.ServiceAssignment__r.Service_Location__r.Alias__c}" />
                        <apex:pageBlockSectionItem >
                            <apex:outputLabel Value="Address" />
                            <c:AddressDisplay Street1="{!Evaluation__c.ServiceAssignment__r.Service_Location__r.Street__c}" City="{!Evaluation__c.ServiceAssignment__r.Service_Location__r.City__c}" State="{!Evaluation__c.ServiceAssignment__r.Service_Location__r.State__c}" Zip="{!Evaluation__c.ServiceAssignment__r.Service_Location__r.Zip__c}" />
                        </apex:pageBlockSectionItem>
                        <apex:outPutField value="{!Evaluation__c.ServiceAssignment__r.Admission__r.Person_Being_Served__r.Name}" />
                        <apex:OutputField value="{!Evaluation__c.ServiceAssignment__r.Admission__r.Person_Being_Served__r.BirthDate}" />
                        <apex:outputField value="{!Evaluation__c.ServiceAssignment__r.Admission__r.Person_Being_Served__r.Age__c}" />
                        <apex:outputField value="{!Evaluation__c.ServiceAssignment__r.Medical_Record_Number__c}" />
                        <apex:outputText value="{!primaryPhysician}" label="Primary Physician" />
                        <apex:pageBlockSectionItem HelpText="To edit this information, return to the Person Being Served record.">
                            {!$ObjectType.Contact.fields.Advanced_Directives__c.label}
                            <apex:outputField value="{!Evaluation__c.ServiceAssignment__r.Admission__r.Person_Being_Served__r.Advanced_Directives__c}" />
                        </apex:pageBlockSectionItem>
                        <apex:outputField value="{!Evaluation__c.ServiceAssignment__r.Admission__r.Person_Being_Served__r.Code_Status__c}" />
                        <apex:outputField value="{!Evaluation__c.ServiceAssignment__r.Admission__r.Person_being_served__r.Advanced_Directives_Attached__c}" />
                        <apex:outputField value="{!Evaluation__c.ServiceAssignment__r.admission__r.Person_Being_Served__r.Code_Status_Other__c}" id="codeStatusOther" label="Specify Other" />
                    </apex:pageBlockSection>
                    <c:EvaluationResponseTable pbsParentId="{!Evaluation__c.ServiceAssignment__r.Person_Being_Served__c}" addEnabled="true" editEnabled="true" type="Allergy" formId="{!$Component.wholePage}" uniqueId="allergy" />
                </apex:pageBlock>
            </apex:tab>

            <apex:tab label="Diagnostics" name="diagnosticTab" ontabenter="changeTab('diagnosticTab'); return false;" styleClass="{!IF(Evaluation__c.Diagnostics_Section_Completed__c, 'sectionCompleted', 'sectionNotCompleted')}">
                <apex:pageBlock >
                    <apex:pageBlockTable value="{!errorMap['diagnosticTab']}" var="d" columns="1" >
                        <apex:repeat value="{!d}" var="temp" >
                            <apex:column >
                                <apex:outputText value="{!temp}" style="color: red"/>
                            </apex:column>
                        </apex:repeat>
                    </apex:pageBlockTable>
                    <apex:pageBlockSection title="Vitals Detail" Columns="1">
                        <apex:actionFunction name="showAddVitalsDetail" action="{!showAddVitalsDetail}" status="loadingVitalsDetailStatus" rerender="vitalsDetailDialogMainBlock" oncomplete="openModalDialog('{!$Component.vitalsDetailDialog}', 'Add Vitals Detail', '{!$Component.wholePage}'); handleVitals();" />
                        <apex:actionFunction name="showEditVitalsDetail" action="{!showEditVitalsDetail}" status="loadingVitalsDetaiStatus" rerender="vitalsDetailDialogMainBlock" oncomplete="openModalDialog('{!$Component.vitalsDetailDialog}', 'Edit Vitals Detail', '{!$Component.wholePage}'); handleVitals();">
                            <apex:param name="currentVitalsDetailId" assignTo="{!currentVitalsDetailId}" value="" />
                        </apex:actionFunction>

                        <apex:outputPanel layout="none">
                            <apex:commandButton value="Add Vitals Details" onclick="showAddVitalsDetail(); return false;" />
                            <apex:actionStatus id="loadingVitalsDetailStatus">
                                <apex:facet name="start">
                                    <apex:image height="16px" value="/img/loading32.gif" styleClass="dialogLoadingSpinner" />
                                </apex:facet>
                                <apex:facet name="stop" />
                            </apex:actionStatus>
                        </apex:outputPanel>

                        <apex:pageBlockTable value="{!vitals}" var="vital" id="vitalsTable">
                            <apex:column headerValue="{!IF(vitals.size>0, 'Action', '')}" width="50px">
                                <apex:commandLink onclick="showEditVitalsDetail('{!vital.Id}'); return false;" value="Edit" />
                            </apex:column>
                            <apex:column value="{!vital.Date__c}" />
                            <apex:column value="{!vital.Name}" />
                            <apex:column value="{!vital.Heart_Rate__c}" />
                            <apex:column value="{!vital.Blood_Pressure__c}" />
                            <apex:column value="{!vital.O2_Saturation__c}" />
                            <apex:column value="{!vital.Temperature__c}" />
                        </apex:pageBlockTable>
                        <apex:pageBlockSectionItem />
                        <apex:pageBlockSectionItem >
                            <apex:outputPanel >
                                <apex:outputLabel for="isolationRequired" value="Requires Isolation" />
                                <br />
                                <br />
                                <apex:outputLabel for="isolationType" value="Isolation Type" id="isolationTypeLabel" />
                            </apex:outputPanel>
                            <apex:outputPanel >
                                <div class="requiredInput">
                                    <div class="requiredBlock"></div>
                                    <apex:inputField value="{!Evaluation__c.Requires_Isolation_Picklist__c}" id="isolationRequired" onchange="handleDiagnosis(); return false;" />
                                </div>
                                <div class="requiredInput">
                                    <div class="requiredBlock"></div>
                                    <apex:inputField Value="{!Evaluation__c.DiagnosisIsolation_Type__c}" id="isolationType" />
                                </div>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                    </apex:pageBlockSection>
                    <apex:pageBlockSection columns="1" title="IV">
                        <apex:inputField Value="{!Evaluation__c.IV_Picklist__c}" label="IV" id="ivPicklist" onchange="handleDiagnosis(); return false;" />
                        <apex:pageBlockSection columns="1" id="ivSection">
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel value="IV Type" />
                                <apex:outputPanel >
                                    <apex:outputText styleClass="labelCol" value="PICC" />
                                    <apex:inputField value="{!Evaluation__c.PICC__c}" />
                                    <apex:outputText styleClass="labelCol" value="Central" style="margin-left:20px;" />
                                    <apex:inputField value="{!Evaluation__c.Central__c}" />
                                    <apex:outputText styleClass="labelCol" value="HepLock" style="margin-left:20px;" />
                                    <apex:inputField value="{!Evaluation__c.HepLock__c}" />
                                </apex:outputPanel>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputPanel >
                                    <apex:outputLabel for="ivsiteIssues" value="IV Site Issues" />
                                    <br />
                                    <br />
                                    <apex:outputLabel for="ivnarrativeNote" value="IV Narrative Note" id="ivnarrativeNoteLabel" />
                                </apex:outputPanel>
                                <apex:outputPanel >
                                    <apex:inputField value="{!Evaluation__c.IV_Site_Issues__c}" id="ivsiteIssues" onchange="handleDiagnosis(); return false;" />
                                    <div class="requiredInput">
                                        <div class="requiredBlock"></div>
                                        <apex:inputTextArea value="{!Evaluation__c.IV_Narrative_Note__c}" rows="4" cols="60" id="ivnarrativeNote" />
                                    </div>
                                </apex:outputPanel>
                            </apex:pageBlockSectionItem>
                        </apex:pageBlockSection>
                    </apex:pageBlockSection>
                </apex:pageBlock>
            </apex:tab>
            <apex:tab label="Cardiopulmonary" name="cardioTab" onTabenter="changeTab('cardioTab'); return false;" styleClass="{!IF(Evaluation__c.Cardio_Section_Completed__c, 'sectionCompleted', 'sectionNotCompleted')}">
                <apex:pageBlock >
                    <apex:pageBlockTable value="{!errorMap['cardioTab']}" var="d" columns="1" >
                        <apex:repeat value="{!d}" var="temp" >
                            <apex:column >
                                <apex:outputText value="{!temp}" style="color: red"/>
                            </apex:column>
                        </apex:repeat>
                    </apex:pageBlockTable>
                    <apex:pageBlockSection Columns="2" title="cardio">
                        <apex:pageBlockSectionItem >
                            <apex:outputPanel >
                                <apex:outputLabel for="heartRate" value="Heart Rate" />
                                <br />
                                <br />
                                <apex:outputLabel for="interventionPicklist" value="Intervention Needed" id="interventionLabel" />
                                <br />
                                <br />
                                <apex:outputLabel for="interventionDescribe" value="Narrative Note" id="narrativeLabel" />
                            </apex:outputPanel>
                            <apex:outputPanel >
                                <div class="requiredInput">
                                    <div class="requiredBlock"></div>
                                    <apex:inputField value="{!Evaluation__c.Heart_Sounds__c}" id="heartRate" onchange="handleHeartBeat(); return false;" />
                                </div>
                                <div class="requiredInput">
                                    <div class="requiredBlock"></div>
                                    <apex:inputField Value="{!Evaluation__c.Heart_Intervention_Need_Picklist__c}" id="interventionPicklist" onchange="handleHeartBeat(); return false;" />
                                </div>
                                <div class="requiredInput">
                                    <div class="requiredBlock"></div>
                                    <apex:inputTextArea value="{!Evaluation__c.Heart_Rate_Intervention_Describe__c}" id="interventionDescribe" rows="4" cols="60" />
                                </div>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem >
                            <apex:outputPanel >
                                <apex:outputLabel for="peripheralPulses" value="Periphral Pulses Present" />
                                <br />
                                <br />
                                <apex:outputLabel for="peripheraldescribeLabel" value="Describe" id="peripheraldescribeLabel" />
                            </apex:outputPanel>
                            <apex:outputPanel >
                                <div class="requiredInput">
                                    <div class="requiredBlock"></div>
                                    <apex:inputField value="{!Evaluation__c.Peripheral_Pulses_Present__c}" id="peripheralPulses" onchange="handlePeripheralPulses(); return false;" />
                                </div>
                                <div class="requiredInput">
                                    <div class="requiredBlock"></div>
                                    <apex:inputField Value="{!Evaluation__c.Peripheral_Pulses_Describe__c}" id="peripheralDescribe" />
                                </div>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem >
                            <apex:outputLabel value="Autonomic Dysreflexia" />
                            <apex:outputPanel >
                                <div class="requiredInput">
                                    <div class="requiredBlock"></div>
                                <apex:inputField Value="{!Evaluation__c.Autonomic_Dysreflexia__c}" onchange="handleDysreflexia(); return false;" id="dysreflexia" />
                                </div>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem />

                        <apex:pageBlockSection Columns="2" id="DysreflexiaDetails">
                            <apex:pageBlockSectionItem >
                                <apex:outputText value="If Yes, Were the Following areas assessed?" />
                                <apex:selectCheckboxes value="{!selectedDysreflexia}" layout="pageDirection">
                                    <apex:selectOptions value="{!DysreflexiaValues}" />
                                </apex:selectCheckboxes>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputPanel >
                                    <apex:outputLabel for="issueResolved" value="Was the issue Resolved?" />
                                    <br />
                                    <br />
                                    <apex:outputLabel for="issueDescribe" value="Describe" id="issueDescribeLabel" />
                                </apex:outputPanel>
                                <apex:outputPanel >
                                    <div class="requiredInput">
                                        <div class="requiredBlock"></div>
                                        <apex:inputField value="{!Evaluation__c.Dysreflexia_issue_resolved__c}" id="issueResolved" onchange="handleDysreflexia(); return false;" />
                                    </div>
                                    <div class="requiredInput">
                                        <div class="requiredBlock"></div>
                                        <apex:inputField Value="{!Evaluation__c.Dysreflexia_Issue_Describe__c}" id="issueDescribe" />
                                    </div>
                                </apex:outputPanel>
                            </apex:pageBlockSectionItem>
                        </apex:pageBlockSection>
                    </apex:pageBlockSection>
                    <apex:pageBlockSection columns="1" title="Sputum" Collapsible="True">
                        <apex:pageBlockSectionItem >
                            <apex:outputLabel value="Suctioning" />
                            <apex:outputPanel >
                                <div class="requiredInput" >
                                    <div class="requiredBlock"></div>
                                <apex:inputField value="{!Evaluation__c.Suctioning_Picklist__c}"  id="suctioning" onchange="handleSuctioning(); return false;" />
                                </div>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSection columns="2" id="suctioningDetails">
                            <apex:inputField value="{!Evaluation__c.Sputum_Quantity__c}" id="sputumQuantity" />
                            <apex:inputField value="{!Evaluation__c.Sputum_Color__c}" id="sputumColor" />
                            <apex:inputField value="{!Evaluation__c.Blood_Tinged__c}" id="bloodTinged" />
                            <apex:inputField value="{!Evaluation__c.Odor__c}" id="odor" />
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel value="Sputum Consistency" />
                                <apex:outputPanel >
                                    <table>
                                        <tr>
                                            <td>
                                                <apex:inputField Value="{!Evaluation__c.Thick__c}" id="thick" />
                                                <apex:outputLabel for="thick">{!$ObjectType.Evaluation__c.Fields.Thick__c.label}</apex:outputLabel>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <apex:inputField value="{!Evaluation__c.Thin__c}" id="thin" />
                                                <apex:outputLabel for="thin">{!$ObjectType.Evaluation__c.Fields.Thin__c.label}</apex:outputLabel>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <apex:inputField value="{!Evaluation__c.Frothy__c}" id="frothy" />
                                                <apex:outputLabel for="frothy">{!$ObjectType.Evaluation__c.Fields.Frothy__c.label}</apex:outputLabel>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <apex:inputField value="{!Evaluation__c.Sticky__c}" id="sticky" />
                                                <apex:outputLabel for="sticky">{!$ObjectType.Evaluation__c.Fields.Sticky__c.label}</apex:outputLabel>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <apex:inputField value="{!Evaluation__c.Creamy__c}" id="creamy" />
                                                <apex:outputLabel for="creamy">{!$ObjectType.Evaluation__c.Fields.Creamy__c.label}</apex:outputLabel>
                                            </td>
                                        </tr>
                                    </table>
                                </apex:outputPanel>
                            </apex:pageBlockSectionItem>
                            <apex:pageblockSectionItem >
                                <apex:outputLabel value="Breath Sounds" styleClass="labelCol" />
                                <apex:selectCheckboxes value="{!selectedSounds}" id="breathesound" layout="pageDirection" onchange="handleOther('breathesound')">
                                    <apex:selectOptions value="{!breatheSounds}" />
                                </apex:selectCheckboxes>
                            </apex:pageblockSectionItem>
                            <apex:outputtext value="" />
                            <apex:pageBLockSectionItem helpText="{!$ObjectType.Evaluation__c.Fields.Breathe_Sound_Other__c.inlineHelpText}">
                                <apex:outputlabel for="breathesoundother" value="If Other Describe" />
                                <apex:inputField value="{!Evaluation__c.Breathe_Sound_Other__c}" id="breathesoundother" />
                            </apex:pageBLockSectionItem>
                        </apex:pageBlockSection>
                    </apex:pageBlockSection>
                    <apex:pageBlockSection columns="1" title="Trach">
                        <apex:pageBlockSectionItem >
                            <apex:outputLabel value="Trach" />
                            <apex:outputPanel >
                                <div Class="requiredInput" >
                                    <div class="requiredBlock" ></div>
                                <apex:inputField value="{!Evaluation__c.Trach_Picklist__c}" label="Trach" id="trachPicklist" onchange="handleTrach(); return false;" />
                                </div>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSection columns="2" id="trachDetails">
                            <apex:pageBlockSectionItem >
                                <apex:outputPanel >
                                    <apex:outputLabel for="trachType" value="Trach Type" />
                                    <br />
                                    <br />
                                    <apex:outputLabel for="trackTypeOther" value="Other" id="trachTypeOtherLabel" />
                                </apex:outputPanel>
                                <apex:outputPanel >
                                    <div class="requiredInput">
                                        <div class="requiredBlock"></div>
                                        <apex:inputField value="{!Evaluation__c.Trach_Type__c}" id="trachType" onchange="handleTrach(); return false;" />
                                    </div>
                                    <div class="requiredInput">
                                        <div class="requiredBlock"></div>
                                        <apex:inputField Value="{!Evaluation__c.Trach_Type_Other__c}" id="trackTypeOther" />
                                    </div>
                                </apex:outputPanel>
                            </apex:pageBlockSectionItem>

                            <apex:pageBlockSectionItem >
                                <apex:outputPanel >
                                    <apex:outputLabel for="trachSize" value="Trach Size" />
                                    <br />
                                    <br />
                                    <apex:outputLabel for="trackSizeOther" value="Other" id="trachSizeOtherLabel" />
                                </apex:outputPanel>
                                <apex:outputPanel >
                                    <div class="requiredInput">
                                        <div class="requiredBlock"></div>
                                        <apex:inputField value="{!Evaluation__c.Trach_Size__c}" id="trachSize" onchange="handleTrach(); return false;" />
                                    </div>
                                    <div class="requiredInput">
                                        <div class="requiredBlock"></div>
                                        <apex:inputField Value="{!Evaluation__c.Trach_Size_Other__c}" id="trackSizeOther" />
                                    </div>
                                </apex:outputPanel>
                            </apex:pageBlockSectionItem>

                            <apex:inputField value="{!Evaluation__c.Cuffed_Picklist__c}" label="Cuffed" id="trachCuffed" />
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel value="PMV" />
                                <apex:outputPanel >
                                    <div class="requiredInput">
                                        <div class="requiredBlock"></div>
                                        <apex:inputField Value="{!Evaluation__c.PMV_Picklist__c}" id="trachPMV" />
                                    </div>
                                </apex:outputPanel>
                            </apex:pageBlockSectionItem>
                            <apex:inputField value="{!Evaluation__c.Plugged_Picklist__c}" label="Plugged" id="trachlugged" />
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel value="Documentation Needed" />
                                <apex:outputPanel >
                                    <apex:inputField value="{!Evaluation__c.PMV_Documentation_Needed__c}" id="pmvDocumantation" />
                                </apex:outputPanel>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem />
                            <apex:inputTextArea value="{!Evaluation__c.PMV_Documentation_Narrative_Note__c}" label="Add Narrative Note" id="pmvnarrativeNote" rows="4" cols="60" />
                        </apex:pageBlockSection>
                    </apex:pageBlockSection>

                    <apex:pageBlockSection columns="1" title="O2" >
                        <apex:pageBlockSectionItem >
                            <apex:outputLabel value="O2" />
                            <apex:outputPanel >
                                <div Class="requiredInput" >
                                    <div Class="requiredBlock" ></div>
                                <apex:inputField value="{!Evaluation__c.O2_Picklist__c}"  id="o2" onchange="handleO2(); return false;" />
                                </div>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem />

                        <apex:pageBlockSection Columns="2" id="o2Details">
                            <apex:inputField value="{!Evaluation__c.O2_Type__c}" id="o2Type" />

                            <apex:pageBlockSectionItem >
                                <apex:outputLabel value="Intervention Needed?" />
                                <apex:outputPanel >
                                    <div class="requiredInput">
                                        <div class="requiredBlock"></div>
                                        <apex:inputField value="{!Evaluation__c.O2_Intervention_Needed__c}" id="o2interventionNeeded" onchange="handleO2(); return false;" />
                                    </div>
                                </apex:outputPanel>
                            </apex:pageBlockSectionItem>
                            <apex:inputField value="{!Evaluation__c.Liters_Min__c}" id="litersMin" />
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel value="Documentation Required" />
                                <apex:outputPanel >
                                    <div class="requiredInput">
                                        <div class="requiredBlock"></div>
                                        <apex:inputField value="{!Evaluation__c.O2_Documentation_Required__c}" id="o2Documentation" />
                                    </div>
                                </apex:outputPanel>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem />
                            <apex:inputTextArea value="{!Evaluation__c.O2_Narrative_Note__c}" id="o2Note" rows="4" cols="60" />
                        </apex:pageBlockSection>
                    </apex:pageBlockSection>
                    <apex:pageBlockSection columns="1" title="Ventilator">
                        <apex:pageBlockSectionItem >
                            <apex:outputLabel value="Ventilator" />
                            <apex:outputPanel >
                                <div Class="requiredInput" >
                                    <div Class="requiredBlock" ></div>
                                <apex:inputField value="{!Evaluation__c.Ventilator_Picklist__c}" id="ventilatorPicklist" label="Ventilator" onchange="handleVentSection();return false;" />
                                </div>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageblockSectionItem />

                        <apex:pageBlockSection Columns="2" id="ventilatorDetails">
                            <apex:pageBlockSectionItem >
                                <apex:outputPanel >
                                    <apex:outputLabel for="ventilatorType" value="Ventilator Type" />
                                    <br />
                                    <br />
                                    <apex:outputLabel for="ventilatorSchedule" value="If Intermittent, Schedule" id="ventilatorScheduleLabel" />
                                </apex:outputPanel>
                                <apex:outputPanel >
                                    <div class="requiredInput">
                                        <div class="requiredBlock"></div>
                                        <apex:inputField value="{!Evaluation__c.Ventilator_Type__c}" id="ventilatorType" onchange="handleVentSection(); return false;" />
                                    </div>
                                    <div class="requiredInput">
                                        <div class="requiredBlock"></div>
                                        <apex:inputField Value="{!Evaluation__c.If_Intermittent_Schedule__c}" id="ventilatorSchedule" />
                                    </div>
                                </apex:outputPanel>
                            </apex:pageBlockSectionItem>
                            <apex:inputField value="{!Evaluation__c.Ventilator_Mode__c}" id="ventilatorMode" />
                            <apex:pageblocksectionitem />
                            <apex:inputField value="{!Evaluation__c.Ventilator_Rate__c}" id="ventilatorRate" />
                            <apex:pageBlockSectionItem />
                            <apex:inputField value="{!Evaluation__c.FIO2__c}" id="FIO2" />
                            <apex:pageBlockSectionItem />
                            <apex:inputField value="{!Evaluation__c.PEEP__c}" id="peep" />
                            <apex:pageblocksectionitem />
                            <apex:inputField value="{!Evaluation__c.TV__c}" id="tv" />
                            <apex:pageblocksectionitem />
                            <apex:inputField value="{!Evaluation__c.PS__c}" id="ps" />
                        </apex:pageBlockSection>
                    </apex:pageBlockSection>
                </apex:pageBlock>
            </apex:tab>

            <apex:tab label="GU/GI/Nutrition" name="nutritionTab" ontabenter="changeTab('nutritionTab'); return false;" styleClass="{!IF(Evaluation__c.Nutrition_Section_Completed__c, 'sectionCompleted', 'sectionNotCompleted')}">
                <script>
                    jQuery(document).ready(function ($) {
                        // Add rules to input fields that we can't add rules to using
                        // only Visualforce
                        $("[id$=tongue] input[value=Sores]").data("visibility-rules", {
                            "1": ["{!$Component.nutritionMainBlock.nutritionHydrationSection.tongueSection.tongueSores}", "{!$Component.nutritionMainBlock.nutritionHydrationSection.tongueSection.tongueSoresLabel}"]
                        });
                        $("[id$=gums] input[value=Sores]").data("visibility-rules", {
                            "1": ["{!$Component.nutritionMainBlock.nutritionHydrationSection.gumsSection.gumsSores}", "{!$Component.nutritionMainBlock.nutritionHydrationSection.gumsSection.gumsSoresLabel}"]
                        });
                        $("[id$=cheeks] input[value=Sores]").data("visibility-rules", {
                            "1": ["{!$Component.nutritionMainBlock.nutritionHydrationSection.cheeksSection.cheeksSores}", "{!$Component.nutritionMainBlock.nutritionHydrationSection.cheeksSection.cheeksSoresLabel}"]
                        });
                        $("[id$=lips] input[value=Sores]").data("visibility-rules", {
                            "1": ["{!$Component.nutritionMainBlock.nutritionHydrationSection.lipsSection.lipsSores}", "{!$Component.nutritionMainBlock.nutritionHydrationSection.lipsSection.lipsSoresLabel}"]
                        });
                        $("[id$=eliminationBowelStatus] input[value=Other]").data("visibility-rules", {
                            "1": ["{!$Component.nutritionMainBlock.eliminationBowelSection.eliminationBowelStatusOther}"]
                        });
                        $("[id$=eliminationBowelStatus] input[value=Other]").data("visibility-row-rules", true);
                        setUpFields();
                    });
                </script>
                <apex:pageBlock id="nutritionMainBlock">
                    <apex:pageBlockSection columns="1" title="Nutrition & Hydration" id="nutritionHydrationSection">
                        <apex:pageBlockSectionItem >
                            <apex:outputLabel value="Feeding Type" />
                            <apex:outputPanel >
                                <apex:selectCheckboxes id="feedingType" value="{!selectedOptionsMap['nutrition_route__c']}">
                                    <apex:selectOptions value="{!selectOptionWidgetsMap['nutrition_route__c']}" />
                                </apex:selectCheckboxes>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem >
                            <apex:outputLabel value="Oral Health Check" />
                            <apex:outputPanel >
                                <div class="requiredInput">
                                    <div class="requiredBlock"></div>
                                    <apex:inputField value="{!Evaluation__c.Oral_Health_Check__c}"
                                        html-data-visibility-rules="{&quot;Yes&quot;: [&quot;{!$Component.issuesNoted}&quot;, &quot;{!$Component.tongueSection.tongue}&quot;, &quot;{!$Component.gumsSection.gums}&quot;, &quot;{!$Component.cheeksSection.cheeks}&quot;, &quot;{!$Component.lipsSection.lips}&quot;, &quot;{!$Component.salivaSection.saliva}&quot;, &quot;{!$Component.narrativeNote}&quot;]}"
                                        html-data-visibility-row-rules="true" />
                                </div>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem >
                            <apex:outputLabel value="Issues Noted" />
                            <apex:outputPanel >
                                <div class="requiredInput">
                                    <div class="requiredBlock"></div>
                                    <apex:inputField value="{!Evaluation__c.Issues_Noted__c}" id="issuesNoted" />
                                </div>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="tongueSection">
                            <apex:outputLabel value="Tongue" />
                            <apex:outputPanel >
                                <apex:selectCheckboxes id="tongue" value="{!selectedOptionsMap['tongue__c']}">
                                    <apex:selectOptions value="{!selectOptionWidgetsMap['tongue__c']}" />
                                </apex:selectCheckboxes>
                                <apex:outputLabel value="Describe Sores" style="margin-right: 5px; " id="tongueSoresLabel" />
                                <apex:inputField id="tongueSores" value="{!Evaluation__c.Tongue_Sores_Describe__c}" />
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="gumsSection">
                            <apex:outputLabel value="Gums" />
                            <apex:outputPanel >
                                <apex:selectCheckboxes id="gums" value="{!selectedOptionsMap['gums__c']}">
                                    <apex:selectOptions value="{!selectOptionWidgetsMap['gums__c']}" />
                                </apex:selectCheckboxes>
                                <apex:outputLabel value="Describe Sores" style="margin-right: 5px; " id="gumsSoresLabel" />
                                <apex:inputField id="gumsSores" value="{!Evaluation__c.Gums_Sores_Describe__c}" />
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="cheeksSection">
                            <apex:outputLabel value="Cheeks" />
                            <apex:outputPanel >
                                <apex:selectCheckboxes id="cheeks" value="{!selectedOptionsMap['cheeks__c']}">
                                    <apex:selectOptions value="{!selectOptionWidgetsMap['cheeks__c']}" />
                                </apex:selectCheckboxes>
                                <apex:outputLabel value="Describe Sores" style="margin-right: 5px; " id="cheeksSoresLabel" />
                                <apex:inputField id="cheeksSores" value="{!Evaluation__c.Cheeks_Sores_Describe__c}" />
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="lipsSection">
                            <apex:outputLabel value="Lips" />
                            <apex:outputPanel >
                                <apex:selectCheckboxes id="lips" value="{!selectedOptionsMap['lips__c']}">
                                    <apex:selectOptions value="{!selectOptionWidgetsMap['lips__c']}" />
                                </apex:selectCheckboxes>
                                <apex:outputLabel value="Describe Sores" style="margin-right: 5px; " id="lipsSoresLabel" />
                                <apex:inputField id="lipsSores" value="{!Evaluation__c.Lips_Sores_Describe__c}" />
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="salivaSection">
                            <apex:outputLabel value="Saliva" />
                            <apex:outputPanel >
                                <apex:selectCheckboxes id="saliva" value="{!selectedOptionsMap['saliva__c']}">
                                    <apex:selectOptions value="{!selectOptionWidgetsMap['saliva__c']}" />
                                </apex:selectCheckboxes>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:inputField value="{!Evaluation__c.Dentures__c}" html-data-visibility-rules="{&quot;Yes&quot;: [&quot;{!$Component.denturesSection.denturesType}&quot;, &quot;{!$Component.denturesUsageDetails}&quot;]}" html-data-visibility-row-rules="true" />
                        <apex:pageBlockSectionItem id="denturesSection">
                            <apex:outputLabel value="Type" />
                            <apex:outputPanel >
                                <apex:selectCheckboxes id="denturesType" value="{!selectedOptionsMap['dentures_type__c']}">
                                    <apex:selectOptions value="{!selectOptionWidgetsMap['dentures_type__c']}" />
                                </apex:selectCheckboxes>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:inputField value="{!Evaluation__c.Dentures_Usage_Details__c}" label="Usage Details" id="denturesUsageDetails" />
                        <apex:pageBlockSectionItem >
                            <apex:outputLabel value="Jaw Wires" />
                            <apex:outputPanel >
                                <apex:inputField value="{!Evaluation__c.Jaw_Wires__c}" html-data-visibility-rules="{&quot;Yes&quot;: [&quot;{!$Component.wireCutters}&quot;, &quot;{!$Component.wireCuttersLabel}&quot;]}" />
                                <br />
                                <apex:outputLabel value="If Yes, Wire Cutters at Bedside" style="margin-right: 5px; " id="wireCuttersLabel" />
                                <apex:inputField value="{!Evaluation__c.Wire_Cutters_at_Bedside__c}" id="wireCutters" />
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem >
                            <apex:outputLabel value="Other Dental Appliance" />
                            <apex:outputPanel >
                                <apex:inputField value="{!Evaluation__c.Other_Dental_Appliance_Checkbox__c}" html-data-visibility-rules="{&quot;1&quot;: [&quot;{!$Component.usageDetails}&quot;, &quot;{!$Component.usageDetailsLabel}&quot;, &quot;{!$Component.otherDentalAppliancePresent}&quot;, &quot;{!$Component.otherDentalAppliancePresentLabel}&quot;]}" />
                                <br />
                                <apex:outputLabel value="Usage Details" style="margin-right: 5px; " id="usageDetailsLabel" />
                                <apex:inputField value="{!Evaluation__c.Other_Dental_Appliance_Usage_Details__c}" id="usageDetails" />
                                <br />
                                <apex:outputLabel value="Are They Present" style="margin-right: 5px; " id="otherDentalAppliancePresentLabel" />
                                <apex:inputField value="{!Evaluation__c.Other_Dental_Appliance_Present__c}" id="otherDentalAppliancePresent" />
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:inputField value="{!Evaluation__c.Narrative_Note__c}" id="narrativeNote" label="Add Narrative Note" />
                        <apex:outputText value="PEDS" styleClass="labelCol" style="margin-left: 2cm;"/>
                        <apex:inputField value="{!Evaluation__c.PEDS_Teething__c}" label="Teething"/>
                        <apex:pageBlockSectionItem >
                            <apex:outputLabel value="History of Tonsilitis" />
                            <apex:outputPanel >
                                <apex:inputField value="{!Evaluation__c.PEDS_History_of_Tonsils__c}"  html-data-visibility-rules="{&quot;Yes&quot;: [&quot;{!$Component.tonsilitisHistoryLabel}&quot;, &quot;{!$Component.tonsilitisHistory}&quot;]}"/>
                                <br />
                                <apex:outputLabel value="Describe Tonsilitis History" style="margin-right: 10px; " id="tonsilitisHistoryLabel" />
                                <apex:outputPanel layout="block" styleClass="requiredInput" style="display: inline-block; ">
                                    <apex:outputPanel layout="block" styleClass="requiredBlock" />
                                    <apex:inputField value="{!Evaluation__c.PEDS_Tonsil_History_Describe__c}" id="tonsilitisHistory" />
                                </apex:outputPanel>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem >
                            <apex:outputLabel value="Pacifier" />
                            <apex:outputPanel >
                                <apex:inputField value="{!Evaluation__c.PEDS_Pacifier__c}" label="Pacifier" html-data-visibility-rules="{&quot;Yes&quot;: [&quot;{!$Component.pacifierUsage}&quot;, &quot;{!$Component.pacifierUsageLabel}&quot;]}"/>
                                <br />
                                <apex:outputLabel value="Type and Usage" style="margin-right: 10px; " id="pacifierUsageLabel" />
                                <apex:outputPanel layout="block" styleClass="requiredInput" style="display: inline-block; ">
                                    <apex:outputPanel layout="block" styleClass="requiredBlock" />
                                    <apex:inputField value="{!Evaluation__c.PEDS_Pacifier_Type_Usage__c}" label="if Yes, Type & usage" id="pacifierUsage" />
                                </apex:outputPanel>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                    </apex:pageBlockSection>
                    <apex:pageBlockSection columns="2" title="Elimination - Bowel" id="eliminationBowelSection">
                        <apex:outputText Label="Bowel Sounds" value=""/>
                        <apex:pageBlockSectionItem />
                        <apex:inputField value="{!Evaluation__c.RUQ__c}" html-data-visibility-rules="{&quot;Abnormal&quot;: [&quot;{!$Component.ruqDescribe.Label}&quot;, &quot;{!$Component.ruqDescribe.field}&quot;]}" />
                        <apex:inputField value="{!Evaluation__c.LUQ__c}" html-data-visibility-rules="{&quot;Abnormal&quot;: [&quot;{!$Component.luqDescribe.Label}&quot;, &quot;{!$Component.luqDescribe.field}&quot;]}" />

                        <apex:pageBlockSectionItem id="ruqDescribe">
                            <apex:outputLabel value="Describe" id="label" />
                            <apex:outputPanel layout="block" styleClass="requiredInput" style="display: inline-block; ">
                                <apex:outputPanel layout="block" styleClass="requiredBlock" />
                                <apex:inputField value="{!Evaluation__c.RUQ_Describe__c}" id="field" />
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="luqDescribe">
                            <apex:outputLabel value="Describe" id="label" />
                            <apex:outputPanel layout="block" styleClass="requiredInput" style="display: inline-block; ">
                                <apex:outputPanel layout="block" styleClass="requiredBlock" />
                                <apex:inputField value="{!Evaluation__c.LUQ_Describe__c}" id="field" />
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>

                        <apex:inputField value="{!Evaluation__c.RLQ__c}" html-data-visibility-rules="{&quot;Abnormal&quot;: [&quot;{!$Component.rlqDescribe.Label}&quot;, &quot;{!$Component.rlqDescribe.field}&quot;]}" />
                        <apex:inputField value="{!Evaluation__c.LLQ__c}" html-data-visibility-rules="{&quot;Abnormal&quot;: [&quot;{!$Component.llqDescribe.Label}&quot;, &quot;{!$Component.llqDescribe.field}&quot;]}" />

                        <apex:pageBlockSectionItem id="rlqDescribe">
                            <apex:outputLabel value="Describe" id="label" />
                            <apex:outputPanel layout="block" styleClass="requiredInput" style="display: inline-block; ">
                                <apex:outputPanel layout="block" styleClass="requiredBlock" />
                                <apex:inputField value="{!Evaluation__c.RLQ_Describe__c}" id="field" />
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="llqDescribe">
                            <apex:outputLabel value="Describe" id="label" />
                            <apex:outputPanel layout="block" styleClass="requiredInput" style="display: inline-block; ">
                                <apex:outputPanel layout="block" styleClass="requiredBlock" />
                                <apex:inputField value="{!Evaluation__c.LLQ_Describe__c}" id="field" />
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>

                        <apex:pageBlockSectionItem >
                            <apex:outputLabel value="Abdomen" />
                            <apex:outputPanel >
                                <apex:selectCheckboxes value="{!selectedOptionsMap['abdomen__c']}">
                                    <apex:selectOptions value="{!selectOptionWidgetsMap['abdomen__c']}" />
                                </apex:selectCheckboxes>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem />

                        <apex:pageBlockSectionItem >
                            <apex:outputLabel value="Status" />
                            <apex:outputPanel >
                                <apex:selectCheckboxes value="{!selectedOptionsMap['elimination_bowel_status__c']}" id="eliminationBowelStatus">
                                    <apex:selectOptions value="{!selectOptionWidgetsMap['elimination_bowel_status__c']}" />
                                </apex:selectCheckboxes>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem />

                        <apex:inputField value="{!Evaluation__c.Elimination_Bowel_No_Appliance_Other__c}" label="Describe" id="eliminationBowelStatusOther" />
                        <apex:pageBlockSectionItem />

                        <apex:inputField value="{!Evaluation__c.Usual_Elimination_Frequeny__c}" />
                        <apex:pageBlockSectionItem />

                        <apex:inputField value="{!Evaluation__c.Last_BM__c}" />
                        <apex:pageBlockSectionItem />

                        <apex:pageBlockSectionItem >
                            <apex:outputLabel value="Bowel Issues" />
                            <apex:outputPanel layout="block" styleClass="requiredInput" style="display: inline-block; ">
                                <apex:outputPanel layout="block" styleClass="requiredBlock" />
                                <apex:inputField value="{!Evaluation__c.Bowel_Issues__c}" html-data-visibility-rules="{&quot;Yes&quot;: [&quot;{!$Component.bowelIssueTypeSection.bowelIssueType}&quot;, &quot;{!$Component.bowelIssuesAdditionalInformation}&quot;]}" html-data-visibility-row-rules="true" />
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem />

                        <apex:pageBlockSectionItem id="bowelIssueTypeSection">
                            <apex:outputLabel value="Issue Type" />
                            <apex:outputPanel >
                                <apex:selectCheckboxes value="{!selectedOptionsMap['bowel_issue_type__c']}" id="bowelIssueType">
                                    <apex:selectOptions value="{!selectOptionWidgetsMap['bowel_issue_type__c']}" />
                                </apex:selectCheckboxes>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem />

                        <apex:inputField value="{!Evaluation__c.Bowel_Issues_Additional_Information__c}" label="Additional Information" id="bowelIssuesAdditionalInformation" />
                        <apex:pageBlockSectionItem />

                        <apex:inputField value="{!Evaluation__c.Incontinent_Neurogenic_Bowel__c}" label="Neurogenic Bowel" html-data-visibility-rules="{&quot;Yes&quot;: [&quot;{!$Component.neurogenicBowelDescribe}&quot;]}" html-data-visibility-row-rules="true" />
                        <apex:pageBlockSectionItem />

                        <apex:inputField value="{!Evaluation__c.Incontinent_Neuro_Bowel_Describe__c}" label="Describe Program" id="neurogenicBowelDescribe" />
                        <apex:pageBlockSectionItem />

                        <apex:inputField value="{!Evaluation__c.Perception_of_Need_to_Defecate__c}" />
                    </apex:pageBlockSection>

                    <apex:pageBlockSection title="Elimination - Bladder" columns="1">
                        <apex:inputField value="{!Evaluation__c.Neurogenic_Bladder__c}" />
                        <apex:inputField value="{!Evaluation__c.Urinary_Issues_Checkbox__c}" label="Urinary Issues" html-data-visibility-rules="{&quot;Yes&quot;: [&quot;{!$Component.urinaryIssueTypeSection.urinaryIssueType}&quot;, &quot;{!$Component.urineColorSection.urineColor}&quot;, &quot;{!$Component.urineClaritySection.urineClarity}&quot;, &quot;{!$Component.urineOdorSection.urineOdor}&quot;]}" html-data-visibility-row-rules="true" />
                        <apex:pageBlockSectionItem id="urinaryIssueTypeSection">
                            <apex:outputLabel value="Issue Type" />
                            <apex:outputPanel >
                                <apex:selectCheckboxes value="{!selectedOptionsMap['urinary_issues__c']}" id="urinaryIssueType">
                                    <apex:selectOptions value="{!selectOptionWidgetsMap['urinary_issues__c']}" />
                                </apex:selectCheckboxes>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="urineColorSection">
                            <apex:outputLabel value="Urine Color" />
                            <apex:outputPanel layout="block" styleClass="requiredInput" style="display: inline-block; ">
                                <apex:outputPanel layout="block" styleClass="requiredBlock" />
                                <apex:inputField value="{!Evaluation__c.Urine_Color__c}" id="urineColor" />
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="urineClaritySection">
                            <apex:outputLabel value="Urine Clarity" />
                            <apex:outputPanel >
                                <apex:selectCheckboxes value="{!selectedOptionsMap['urine_clarity__c']}" id="urineClarity">
                                    <apex:selectOptions value="{!selectOptionWidgetsMap['urine_clarity__c']}" />
                                </apex:selectCheckboxes>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="urineOdorSection">
                            <apex:outputLabel value="Urine Odor" />
                            <apex:outputPanel layout="block" styleClass="requiredInput" style="display: inline-block; ">
                                <apex:outputPanel layout="block" styleClass="requiredBlock" />
                                <apex:inputField value="{!Evaluation__c.Urine_Odor__c}" id="urineOdor" />
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                    </apex:pageBlockSection>

                    <apex:pageBlockSection title="Dialysis" columns="1">
                        <apex:pageBlockSectionItem >
                            <apex:outputLabel value="Dialysis" />
                            <apex:outputPanel layout="block" styleClass="requiredInput" style="display: inline-block; ">
                                <apex:outputPanel layout="block" styleClass="requiredBlock" />
                                <apex:inputField value="{!Evaluation__c.Dialysis_Picklist__c}" label="Dialysis" html-data-visibility-rules="{&quot;Yes&quot;: [&quot;{!$Component.dialysisTypeSection.dialysisType}&quot;]}" html-data-visibility-row-rules="true" />
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem id="dialysisTypeSection">
                            <apex:outputLabel value="Dialysis Type" />
                            <apex:outputPanel >
                                <apex:selectCheckboxes value="{!selectedOptionsMap['dialysis_type__c']}" id="dialysisType">
                                    <apex:selectOptions value="{!selectOptionWidgetsMap['dialysis_type__c']}" />
                                </apex:selectCheckboxes>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                    </apex:pageBlockSection>
                </apex:pageBlock>
            </apex:tab>

            <apex:tab label="Skin/Body" name="skinBodyTab" ontabenter="changeTab('skinBodyTab'); return false;" styleClass="{!IF(Evaluation__c.Skin_Section_Completed__c, 'sectionCompleted', 'sectionNotCompleted')}">
	            <script>
	                 jQuery(document).ready(function ($) {
                
	                    anno.reset();
	                    var el = $('#bodyMap').get(0);
	                    if (el) {
	                        anno.makeAnnotatable(el);
	                    }
	                    var $el = $(el);
	                    <apex:repeat value="{!annotations}" var="annotation">
	                    anno.addAnnotation({
	                        Id: "{!annotation.Id}",
	                        src: $("#bodyMap").prop("src"),
	                        text: "{!JSENCODE(annotation.Annotation_Text__c)}",
	                        shapes: [{
	                            type: "{!JSENCODE(annotation.Annotation_Shape__c)}",
	                            geometry: {
	                                x: {!annotation.Annotation_X__c},
	                                y: {!annotation.Annotation_Y__c},
	                                width: {!annotation.Annotation_Width__c},
	                                height: {!annotation.Annotation_Height__c}
	                            }
	                        }]
	                    });
	                    </apex:repeat>
	                    var createAnnotationElements = function (annotations) {
	                        $('.annotation-number').remove();
	                        $('table#annotations tr').remove();
	                        $.each(annotations, function (index, annotation) {
	                            var $divEl = $("<div class='annotation-number' style='pointer-events:none; position: absolute; text-align: center; left: " + annotation.shapes[0].geometry.x * 100 + "%; width: " + annotation.shapes[0].geometry.width * 100 + "%; top: " + annotation.shapes[0].geometry.y * 100 + "%; height: " + annotation.shapes[0].geometry.height * 100 + "%;'></div>");
	                            $el.parent().append($divEl);
	                            var $textEl = $("<span style='line-height: " + $divEl.height() + "px; color: red; font-size: 1.5em;'>" + (index + 1) + "</span>");
	                            $divEl.append($textEl);
	                            $("table#annotations tbody").append("<tr><td>" + (index + 1) + "</td><td>" + annotation.text + "</td></tr>");
	                        });
	                    }
	                    createAnnotationElements(anno.getAnnotations());
	                    anno.addHandler('onAnnotationCreated', function (annotation) {
	                        createAnnotationElements(anno.getAnnotations());
	                    });
	                    anno.addHandler('onAnnotationUpdated', function (annotation) {
	                        createAnnotationElements(anno.getAnnotations());
	                    });
	                    anno.addHandler('onAnnotationRemoved', function (annotation) {
	                        createAnnotationElements(anno.getAnnotations());
	                    });
	                    
                    });
	                
	                </script>
                <apex:pageBlock >
					<apex:pageBlockSection columns="2" title="General Skin Condition" >

                        <apex:inputField value="{!Evaluation__c.Skin_Color__c}" label="Color" />
                        <apex:inputField value="{!Evaluation__c.Skin_Temperature__c}" label="Temperature" />
                        <apex:inputField value="{!Evaluation__c.Skin_Moisture__c}" label="Mositure" />
                        <apex:inputField value="{!Evaluation__c.Skin_Turgor__c}" label="Turgor" />
                        <apex:pageBlockSectionItem >
                        <apex:outputLabel value="Edema" />
                        <apex:outputPanel >
                        <apex:inputField value="{!Evaluation__c.Skin_Edema__c}" label="Edema" html-data-visibility-rules="{&quot;Yes&quot;: [&quot;{!$Component.edemaLocation}&quot;,&quot;{!$Component.edemaPitting}&quot;,&quot;{!$Component.edemaLocationLabel}&quot;,&quot;{!$Component.edemaPittingLabel}&quot;]}" />
                        <apex:outputText styleClass="labelCol" value="Location" id="edemaLocationLabel"/><apex:inputField value="{!Evaluation__c.Skin_Edema_Location__c}" label="Edema Location" id="edemaLocation" />  <apex:outputText styleClass="labelCol" value="Pitting" id="edemaPittingLabel" /><apex:inputField value="{!Evaluation__c.Skin_Edema_Pitting__c}" label="Pitting" id="edemaPitting" />
                        </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:inputField value="{!Evaluation__c.Skin_Behavior__c}" label="Behavior" />
                        <apex:pageBlockSectionItem >
                        <apex:outputLabel value="Peripheral Capillary Refill Location<Br /><br /># of Seconds" escape="false" />
                        <apex:outputPanel >
                        <apex:inputField value="{!Evaluation__c.Peripheral_Capillary_Refill_Location__c}" />
                        <Br /><apex:inputField Value="{!Evaluation__c.Peripheral_Capillary_Refill_of_Seconds__c}" />
                        </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                    </apex:pageBlockSection>
                    
                    <c:EvaluationResponseTable parentId="{!Evaluation__c.Id}" type="Wound Detail" formId="{!$Component.wholePage}" uniqueId="wound" />
                    
                    <apex:pageBlockSection columns="1" >
                    	<apex:inputField value="{!Evaluation__c.Skin_Intact_Picklist__c}"  id="skinIntact" onChange="disablePain(); return false;"/>
                    </apex:pageBlockSection>
                    
                    <apex:outputPanel id="painSection" layout="block" >
	                    <apex:pageBlockSection title="Body Map" columns="2" id="bodyMapSection">
		                    <div style="position: relative; float: left; margin-left: 80px; margin-bottom: 10px;">
		                        <img width="318" height="298" style="float: left; border: 3px solid #ECECEC;" src="{!baseUrl + URLFOR($Resource.WholeBodyNoGrid)}" id="bodyMap" />
		                    </div>
		                    <div style="margin-left: 420px; height: 298px; overflow: auto;">
		                        <table id="annotations">
		                            <tbody>
		                            </tbody>
		                        </table>
		                    </div>
		                    <apex:pageBlockSectionItem />
		                    <apex:inputTextArea value="{!Evaluation__c.Body_Map_Comments__c}" label="Other Body Map Comments" cols="80" rows="7" />
	             			<apex:pageBlockSectionItem />
		                    <apex:pageBlockSectionItem >
			                    <apex:outputPanel >
				                    <apex:outputLabel value="Wound Vac"  id="WoundVacLabel" />
				                    <br/>
				                    <br/>
				                    <apex:outputLabel value="Frequency" id="woundwacFrequencyLabel" />
				                    <br/>
				                    <br/>
				                    <apex:outputLabel value="Duration" id="woundwacDurationLabel" />
			                    </apex:outputPanel>
			                    <apex:outputPanel >
			                    	<div class="requiredInput">
	                                        <div class="requiredBlock"></div>
				                    <apex:inputField value="{!Evaluation__c.Wound_Wac_Picklist__c}" html-data-visibility-rules="{&quot;Yes&quot;: [&quot;{!$Component.woundVacFrequency}&quot;, &quot;{!$Component.woundVacDuration}&quot;, &quot;{!$Component.woundwacFrequencyLabel}&quot;, &quot;{!$Component.woundwacDurationLabel}&quot;]}" />
				                    </div>
				                    <div class="requiredInput">
	                                        <div class="requiredBlock"></div>
				                    <apex:inputField value="{!Evaluation__c.Wound_Vac_Frequency__c}" id="woundVacFrequency" />
				                    </div>
				                    <div class="requiredInput">
	                                        <div class="requiredBlock"></div>
				                    <apex:inputField value="{!Evaluation__c.Wound_Vac_Duration__c}" id="woundVacDuration" />
				                    </div>
			                    </apex:outputPanel>
		                    </apex:pageBlockSectionItem>
		
		                    <apex:pageBlockSectionItem >
		                    	<apex:outputPanel >
				                    <apex:outputLabel value="Specialty Bed" />
				                    <br/>
				                    <br/>
				                    <apex:outputLabel value="Type" id="specialtyBedTypeLabel" />
			                    </apex:outputPanel>
			                    <apex:outputPanel >
				                    <div class="requiredInput">
		                                        <div class="requiredBlock"></div>
				                    <apex:inputField value="{!Evaluation__c.Speciality_Bed_Picklist__c}" html-data-visibility-rules="{&quot;Yes&quot;: [&quot;{!$Component.specialtyBedType}&quot;, &quot;{!$Component.specialtyBedTypeLabel}&quot;]}" />
				                    </div>
				                    <div class="requiredInput">
		                                        <div class="requiredBlock"></div>
				                    <apex:inputField value="{!Evaluation__c.Specialty_Bed_Type__c}" id="specialtyBedType" />
				                    </div>
			                    </apex:outputPanel>
			                    </apex:pageBlockSectionItem>
	                    </apex:pageBlockSection>
	                    <apex:pageBlockSection columns="1" title="Pressure Ulcer Details" >
	                    	 <apex:actionFunction name="showAddpUlcerDetail" action="{!showAddpUlcerDetail}" status="loadingpUlcerDetailStatus" rerender="pUlcerDetailDialogMainBlock" oncomplete="openModalDialog('{!$Component.pUlcerDetailDialog}', 'Add Pressure Ulcers Detail', '{!$Component.wholePage}');" />
	                        <apex:actionFunction name="showEditpUlcerDetail" action="{!showEditpUlcerDetail}" status="loadingpUlcerDetailStatus" rerender="pUlcerDetailDialogMainBlock" oncomplete="openModalDialog('{!$Component.pUlcerDetailDialog}', 'Edit Pressure Ulcers Detail', '{!$Component.wholePage}');">
	                            <apex:param name="currentVitalsDetailId" assignTo="{!currentpUlcerDetailId}" value="" />
	                        </apex:actionFunction>
	                    	<apex:outputPanel layout="none">
	                            <apex:commandButton value="Add Pressure Ulcers Details" onclick="showAddpUlcerDetail(); return false;" />
	                            <apex:actionStatus id="loadingpUlcerDetailStatus">
	                                <apex:facet name="start">
	                                    <apex:image height="16px" value="/img/loading32.gif" styleClass="dialogLoadingSpinner" />
	                                </apex:facet>
	                                <apex:facet name="stop" />
	                            </apex:actionStatus>
	                        </apex:outputPanel>
	                        <apex:pageBlockTable value="{!pUlcers}" var="ulcer" id="pUlcersTable">
	                            <apex:column headerValue="{!IF(pUlcers.size>0, 'Action', '')}" width="50px">
	                                <apex:commandLink onclick="showEditpUlcerDetail('{!ulcer.Id}'); return false;" value="Edit" />
	                            </apex:column>
	                            <apex:column value="{!ulcer.Decubity_Stage__c}" />
	                            <apex:column value="{!ulcer.Location__c}" />
	                            <apex:column value="{!ulcer.Decubity_Measurement__c}" />
	                            <apex:column value="{!ulcer.Date__c}" headerValue="Date Last Measured"/>
	                            <apex:column value="{!ulcer.Treatment__c}" />
	                        </apex:pageBlockTable>
	                    </apex:pageBlockSection>
                    </apex:outputPanel>
                </apex:pageBlock>
            </apex:tab>
            <apex:tab label="Neurological" name="neuroTab" ontabenter="changeTab('neuroTab');return false;" styleClass="{!IF(Evaluation__c.Neuro_Section_Completed__c, 'sectionCompleted', 'sectionNotCompleted')}">
                <apex:pageBlock id="neuroMainBlock">
                    <apex:pageBlockTable value="{!errorMap['neuroTab']}" var="d" columns="1" >
                        <apex:repeat value="{!d}" var="temp" >
                            <apex:column >
                                <apex:outputText value="{!temp}" style="color: red"/>
                            </apex:column>
                        </apex:repeat>
                    </apex:pageBlockTable>
                    <apex:pageBlockSection columns="1" title="Cognitive" collapsible="True" >
                        <apex:pageBlockSectionItem >
                            <apex:outputLabel value="Rancho Level" />
                            <apex:outputPanel >
                                <div class="requiredInput" >
                                    <div class="requiredBlock" ></div>
                                <apex:inputField value="{!Evaluation__c.Rancho_Level__c}" onchange="handleRancho(); handleMood(); return false;" id="ranchoValue" />
                                </div>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSection id="ranchoDetails" columns="1" >
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel value="Responds To" id="labelresponds" />
                                <apex:outputPanel >
                                    <apex:inputField id="vstimresponds" value="{!Evaluation__c.Verbal_Stim__c}" />
                                    <apex:outputLabel for="vstim" value="Verbal Stim" id="vstimlabelresponds" />&nbsp;
                                    <apex:inputField id="astimresponds" value="{!Evaluation__c.Auditory_Stim__c}" />
                                    <apex:outputLabel for="astim" value="Auditory Stim" id="astimlabelresponds" />&nbsp;
                                    <apex:inputField id="tstimresponds" value="{!Evaluation__c.Tactile_Stim__c}" />
                                    <apex:outputLabel for="tstim" value="Tactile Stim" id="tstimlabelresponds" />&nbsp;
                                    <apex:inputField id="pstimresponds" value="{!Evaluation__c.Responds_To_Pain__c}" label="Pain" />
                                    <apex:outputLabel for="pstim" value="Pain" id="pstimlabelresponds" />&nbsp;
                                    <apex:inputField id="visualresponds" value="{!Evaluation__c.Visual__c}" />
                                    <apex:outputLabel for="visual" value="Visual" id="visuallabelresponds" />
                                </apex:outputPanel>
                            </apex:pageBlockSectionItem>
                            <apex:inputField value="{!Evaluation__c.Level_of_Conciousness__c}" />
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel value="Orientation" />
                                <apex:selectCheckboxes value="{!selectedNeuroOrient}" style="margin-left:-13px">
                                    <apex:selectOptions value="{!neuroOrientValues}" />
                                </apex:selectCheckboxes>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel value="Behavior" />
                                <apex:outputPanel >
                                    <apex:inputField id="coop" value="{!Evaluation__c.Cooperative__c}" />
                                    <apex:outputLabel for="coop" value="Cooperative" />&nbsp;
                                    <apex:inputField id="impulsive" value="{!Evaluation__c.Impulsive__c}" />
                                    <apex:outputLabel for="impulsive" value="Impulsive" />&nbsp;
                                    <apex:inputField id="inapp" value="{!Evaluation__c.Inappropriate__c}" />
                                    <apex:outputLabel for="inapp" value="Inappropriate" />&nbsp;
                                    <apex:inputField id="agitated" value="{!Evaluation__c.Agitated__c}" />
                                    <apex:outputLabel for="agitated" value="Agitated" />&nbsp;
                                    <apex:inputField id="combat" value="{!Evaluation__c.Combative__c}" />
                                    <apex:outputLabel for="combat" value="Combative" />&nbsp;
                                    <apex:inputField id="confused" value="{!Evaluation__c.Confused__c}" />
                                    <apex:outputLabel for="confused" value="Confused" />&nbsp;
                                    <apex:inputField id="unresp" value="{!Evaluation__c.Unresponsive__c}" />
                                    <apex:outputLabel for="unresp" value="Unresponsive" />
                                </apex:outputPanel>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                    <apex:outputLabel value="Mood" />
                                    <apex:selectCheckboxes value="{!selectedMoods}"  style="margin-left:-13px" id="moodlist" onchange="handleMood(); return false;" >
                                        <apex:selectOptions value="{!moodValues}" />
                                    </apex:selectCheckboxes>
                                </apex:pageBlockSectionItem>
                                <apex:pageBlockSectionItem >
                                    <apex:outputPanel id="labelPanel">
                                        <apex:outputLabel value="Has Resident Expressed Desire to Hurt Him/Herself?" id="sadflatHurtLabel" />
                                        <br/>
                                        <br/>
                                        <apex:outputLabel value="Does Resident Have a Plan to Harm Him/Herself?" id="plantoHarmLabel" />
                                    </apex:outputPanel>
                                    <apex:outputPanel >
                                        <div class="requiredInput">
                                             <div class="requiredBlock"></div >
                                        <apex:inputField value="{!Evaluation__c.Desire_to_hurt_themselves__c}"  id="sadflatHurt" onchange="handleMood(); return false;"/>
                                        </div>
                                        <div class="requiredInput">
                                             <div class="requiredBlock"></div>
                                        <apex:inputField value="{!Evaluation__c.Plan_to_Harm_themselves__c}"  id="plantoHarm" />
                                        </div>
                                    </apex:outputPanel>
                                </apex:pageBlockSectionItem>
                                <apex:pageBlockSectionItem />
                                <apex:pageBlockSectionItem >
                                    <apex:outputText value="Communication" styleClass="labelCol" />
                                    <apex:outputText value="" />
                                </apex:pageBlockSectionItem>
                                <apex:pageBlockSectionItem >
                                    <apex:outputPanel >
                                        <apex:outputLabel for="needsKnown" value="Ability to make needs known"  />
                                        <br />
                                        <br />
                                        <apex:outputlabel for="verbalExpression" value="Expression" id="verbalExpressionLabel"/>
                                        <br />
                                        <br />
                                        <apex:outputText value="Other Expression" id="otherExpressionLabel" />
                                    </apex:outputPanel>
                                    <apex:outputPanel >
                                        <div class="requiredInput">
                                             <div class="requiredBlock"></div>
                                        <apex:inputField value="{!Evaluation__c.Able_to_make_Needs_Known__c}" id="needsKnown" onchange="handleExpression(); return false;" />
                                        </div>
                                        <div class="requiredInput">
                                             <div class="requiredBlock"></div>
                                        <apex:inputField value="{!Evaluation__c.Expression__c}" id="verbalExpression" onchange="handleExpression(); return false;" />
                                        </div>
                                        <br />
                                        <apex:selectCheckboxes value="{!selectedVerbalExpression}" style="margin-left:-13px" id="expressionOther"  >
                                            <apex:selectOptions value="{!verbalExpressionValues}" />
                                        </apex:selectCheckboxes>
                                    </apex:outputPanel>
                                </apex:pageBlockSectionItem>
                        </apex:pageBlockSection>
                    </apex:pageBlockSection>
                    <apex:pageBlockSection columns="1" title="Safety" >
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel Value="Safety Awareness" />
                                <apex:outputPanel >
                                    <div Class="requiredInput" >
                                        <div Class="requiredBlock" ></div>
                                    <apex:inputField value="{!Evaluation__c.Safety_Awareness__c}" />
                                    </div>
                                </apex:outputPanel>
                            </apex:pageBlockSectionItem>
                            <apex:inputField value="{!Evaluation__c.Bed_Alarm__c}" />
                            <apex:pageBlockSectionItem >
                                <apex:outputPanel >
                                    <apex:outputLabel value="One to One Sitter" />
                                    <br/>
                                    <br/>
                                    <apex:outputLabel value="# of hours per day" id="hoursLabel"/>
                                </apex:outputPanel>

                                <apex:outputPanel >
                                    <apex:inputField value="{!Evaluation__c.One_to_One_Sitter__c}"  id="sitter" onchange="handleSitter(); return false;"/>
                                      <br />
                                    <apex:inputField value="{!Evaluation__c.one_to_One_Sitter_of_Hours_per_day__c}" id="onetooneHours" />
                                </apex:outputPanel>
                            </apex:pageBlockSectionItem>
                            <apex:inputField value="{!Evaluation__c.Low_Bed__c}" />
                   </apex:pageBlockSection>

                    <apex:pageBlockSection title="Pain" id="painSection" columns="1">
                        <apex:outputPanel id="painSectionButtons">
                            <apex:commandButton value="Add Entry" action="{!addPainResponse}" immediate="true" rerender="painResponsesSection" rendered="{!Evaluation__c.Pain_Present__c='Yes'}" />
                        </apex:outputPanel>
                        <apex:inputField value="{!Evaluation__c.Pain_Present__c}" html-data-visibility-rules="{&quot;Yes&quot;: [&quot;{!$Component.neuroMainBlock.painResponsesSection}&quot;]}">
                            <apex:actionSupport event="onchange" rerender="{!$Component.neuroMainBlock.painSection.painSectionButtons}" />
                        </apex:inputField>
                    </apex:pageBlockSection>
                    <apex:pageBlockSection id="painResponsesSection" columns="1">
                        <apex:pageBlockSectionItem >
                            <apex:outputText value="Specify Pain Level" />
                            <apex:image url="{!URLFOR($Resource.Wongbakerfaces)}" height="110px" width="45%" />
                        </apex:pageBlockSectionItem>
                        <apex:repeat value="{!pains}" var="pain">
                            <apex:inputhidden value="{!pain.Initial_Pain_Level__c}" id="initialPainLevel" />
                            <apex:inputhidden value="{!pain.Follow_up_Pain_Level__c}" id="followUpPainLevel" />
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel value="Pain Level" />
                                <apex:outputPanel layout="none">
                                    <c:Slider onChange="handleSliderChange('{!$Component.initialPainLevel}')" options="{!painSliderOptions}" initial="{!pain.Initial_Pain_Level__c}" morestyle="display: inline-block; width: 40%;" />
                                    <apex:outputLabel value="Add Narrative Note" style="margin: auto 5px;" />
                                    <apex:inputTextarea value="{!pain.Narrative_Note__c}" style="vertical-align: top; " />
                                    <apex:outputLabel value="Time Observed" style="margin: auto 5px;" />
                                    <apex:inputField value="{!pain.Time_Observed__c}" />
                                </apex:outputPanel>
                            </apex:pageBlockSectionItem>
                            <apex:pageBlockSectionItem >
                                <apex:outputLabel value="Follow-up Pain Level" />
                                <apex:outputPanel layout="none">
                                    <c:Slider onChange="handleSliderChange('{!$Component.followUpPainLevel}')" options="{!painSliderOptions}" initial="{!pain.Follow_up_Pain_Level__c}" morestyle="display: inline-block; width: 40%;" />
                                    <apex:outputLabel value="Describe Effectiveness" style="margin: auto 5px;" />
                                    <apex:inputTextarea value="{!pain.Follow_up_Effectiveness__c}" style="vertical-align: top; " />
                                </apex:outputPanel>
                            </apex:pageBlockSectionItem>
                        </apex:repeat>
                    </apex:pageBlockSection>
                </apex:pageBlock>
            </apex:tab>
            <apex:tab label="Ortho" name="orthoTab" ontabenter="changeTab('orthoTab'); return false;" styleClass="{!IF(Evaluation__c.Ortho_Section_Completed__c, 'sectionCompleted', 'sectionNotCompleted')}">
                <apex:pageBlock >
                    <apex:pageBlockTable value="{!errorMap['orthoTab']}" var="d" columns="1" >
                        <apex:repeat value="{!d}" var="temp" >
                            <apex:column >
                                <apex:outputText value="{!temp}" style="color: red"/>
                            </apex:column>
                        </apex:repeat>
                    </apex:pageBlockTable>
                    <apex:pageBlockSection columns="2">
                        <apex:pageBlockSectionItem >
                            <apex:outputPanel >
                                <apex:outputLabel for="cast" value="Cast" />
                                <br />
                                <br />
                                <apex:outputLabel for="castLocation" value="Location" id="castLocationLabel" />
                                <br />
                                <br />
                                <apex:outputLabel for="OthercastLocation" value="Other" id="OthercastLocationLabel" />
                            </apex:outputPanel>
                            <apex:outputPanel >
                                <div class="requiredInput">
                                    <div class="requiredBlock"></div>
                                <apex:inputField id="cast" value="{!Evaluation__c.Cast_Picklist__c}"  onchange="handleOrtho(); return false;" />
                                </div>
                                <div class="requiredInput">
                                    <div class="requiredBlock"></div>
                                    <apex:inputField value="{!Evaluation__c.Ortho_Cast_Location__c}" id="castLocation" onchange="handleOrtho(); return false;" />
                                </div>
                                <div class="requiredInput">
                                    <div class="requiredBlock"></div>
                                    <apex:inputField value="{!Evaluation__c.Cast_Location__c}" id="OthercastLocation" />
                                </div>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem >
                            <apex:outputPanel >
                                <apex:outputLabel for="traction" value="Traction" />
                                <br />
                                <br />
                                <apex:outputLabel for="tractionLocation" value="Location" id="tractionLocationLabel" />
                                <br />
                                <br />
                                <apex:outputLabel for="tractionType" value="Type" id="tractionTypeLabel" />
                                <br />
                                <br />
                                <apex:outputLabel for="tractionWeight" value="Weight" id="tractionWeightLabel" />
                            </apex:outputPanel>

                            <apex:outputPanel >
                                <div class="requiredInput">
                                    <div class="requiredBlock"></div>
                                <apex:inputField id="traction" value="{!Evaluation__c.Traction_Picklist__c}"  onchange="handleOrtho(); return false;" />
                                </div>
                                <div class="requiredInput">
                                    <div class="requiredBlock"></div>
                                    <apex:inputField value="{!Evaluation__c.Traction_Location__c}" id="tractionLocation" />
                                </div>
                                <div class="requiredInput">
                                    <div class="requiredBlock"></div>
                                    <apex:inputField value="{!Evaluation__c.Traction_Type__c}" id="tractionType" />
                                </div>
                                <div class="requiredInput">
                                    <div class="requiredBlock"></div>
                                    <apex:inputField value="{!Evaluation__c.Traction_Weight__c}" id="tractionWeight" />
                                </div>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>
                        <apex:pageBlockSectionItem >
                            <apex:outputPanel >
                                <apex:outputLabel for="extdev" value="External Devices" />
                                <br />
                                <br />
                                <apex:outputLabel for="externalDevicesLocation" value="Location" id="externalDevicesLocationLabel" />
                                <br />
                                <br />
                                <apex:outputLabel for="externalDevicesType" value="Type" id="externalDevicesTypeLabel" />
                            </apex:outputPanel>
                            <apex:outputPanel >
                                <div class="requiredInput">
                                    <div class="requiredBlock"></div>
                                <apex:inputField value="{!Evaluation__c.External_Device_Picklist__c}"  id="extdev" onchange="handleOrtho(); return false;" />
                                </div>
                                <div class="requiredInput">
                                    <div class="requiredBlock"></div>
                                    <apex:inputField value="{!Evaluation__c.External_Devices_Location__c}" id="externalDevicesLocation" />
                                </div>
                                <div class="requiredInput">
                                    <div class="requiredBlock"></div>
                                    <apex:inputField value="{!Evaluation__c.External_Devices_Type__c}" id="externalDevicesType" />
                                </div>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>

                    </apex:pageBlockSection>

                </apex:pageBlock>
            </apex:tab>
            <apex:tab label="Psycho/Social" name="psychoSocialTab" ontabenter="changeTab('psychoSocialTab'); return false;" styleClass="{!IF(Evaluation__c.Psycho_Social_Section_Completed__c, 'sectionCompleted', 'sectionNotCompleted')}">
                <apex:pageBlock >
                    <apex:pageBlockTable value="{!errorMap['psychoSocialTab']}" var="d" columns="1" >
                        <apex:repeat value="{!d}" var="temp" >
                            <apex:column >
                                <apex:outputText value="{!temp}" style="color: red"/>
                            </apex:column>
                        </apex:repeat>
                    </apex:pageBlockTable>
                    <apex:pageBlockSection Columns="1">
                        <apex:pageBlockSectionItem >
                            <apex:outputPanel >
                                <apex:outputLabel for="residentCoping" value="Does Resident appear to be coping well" />
                                <br/>
                                <br/>
                                <apex:outputLabel for="copingDescribe" value="Describe" id="copingDescribeLabel" />
                            </apex:outputPanel>
                            <apex:outputPanel >
                            	<div class="requiredInput">
                                    <div class="requiredBlock"></div>
                                <apex:inputField value="{!Evaluation__c.Resident_Coping_Well__c}" id="residentCoping" onchange="hanldePsycho(); return false;" />
                                </div>
                                <div class="requiredInput">
                                    <div class="requiredBlock"></div>
                                    <apex:inputField Value="{!Evaluation__c.Coping_Description__c}" id="copingDescribe" />
                                </div>
                            </apex:outputPanel>
                        </apex:pageBlockSectionItem>

                        <apex:inputField value="{!Evaluation__c.Does_Resident_appear_to_demonstrate__c}" label="Does Resident appear to<br/>demonstrate/note<br/>any of the following" />

                        <apex:pageBlockSectionItem >
                            <apex:outputText value="" />
                            <apex:selectCheckboxes value="{!selectedCoping}" layout="pageDirection" style="margin-left:-13px">
                                <apex:selectOptions value="{!copingValues}" />
                            </apex:selectCheckboxes>
                        </apex:pageBlockSectionItem>

                    </apex:pageBlockSection>
                </apex:pageBlock>
            </apex:tab>
        </apex:tabPanel>
        <apex:pageBlock id="buttons">
            <apex:pageBlockButtons location="bottom">
                <apex:commandButton Value="Save & Continue" onClick="changeTab(getNextTab('{!selectedTab}')); return false;" rendered="{!selectedTab != 'dischargePlanTab'}" />
                <apex:commandButton value="Save" action="{!save}" />
                <apex:commandButton value="Cancel" onClick="window.location='apex/CMShiftAssessmentView?id={!Evaluation__c.Id}&tab={!selectedTab}'; return false;" />
            </apex:pageBlockButtons>
        </apex:pageBlock>

        <apex:outputPanel id="vitalsDetailDialog" style="display:none">
            <span class="ui-helper-hidden-accessible"><input type="text"/></span>
            <apex:pageBlock title="Add/Edit Vitals Detail" id="vitalsDetailDialogMainBlock">
                <apex:pageblockButtons location="bottom">
                    <apex:actionFunction name="saveVitalsDetail" action="{!saveVitalsDetail}" rerender="vitalsTable,vitalsDetailDialogMainBlock,vitalsDetailDialogErrors" status="saveVitalsDetailStatus" oncomplete="afterSave('{!$Component.vitalsDetailDialog}', request.options.parameters.keepDialogOpen, showAddVitalsDetail);">
                        <apex:param name="keepDialogOpen" value="" />
                    </apex:actionFunction>
                    <apex:actionStatus id="saveVitalsDetailStatus">
                        <apex:facet name="stop">
                            <apex:outputPanel id="vitDetailsButtons">
                                <apex:commandButton value="Save" onClick="saveVitalsDetail(false); return false;" />
                                <apex:commandButton value="Save & New" onClick="saveVitalsDetail(true); handleVitals(); return false;" />
                                <apex:commandButton value="Cancel" onClick="closeModalDialog('{!$Component.vitalsDetailDialog}'); return false;" />
                            </apex:outputPanel>
                        </apex:facet>
                        <apex:facet name="start">
                            <apex:image height="16px" value="/img/loading32.gif" styleClass="dialogLoadingSpinner" />
                        </apex:facet>
                    </apex:actionStatus>
                </apex:pageblockButtons>
                <apex:pageMessages id="vitalsDetailDialogErrors" />
                <apex:pageBlockSection columns="2">
                    <apex:inputField value="{!currentVitalsDetail.Date__c}" />
                    <apex:inputField value="{!currentVitalsDetail.Blood_Pressure__c}" />
                    <apex:pageBlockSectionItem >
                        <apex:outputPanel >
                            <apex:outputLabel for="DiagheartRate" value="Heart Rate" />
                            <br/>
                            <br />
                            <apex:outputLabel for="DiaginterventionPicklist" value="Intervention Needed" id="DiaginterventionLabel" />
                            <br />
                            <br />
                            <apex:outputLabel for="DiaginterventionDescribe" value="Narrative Note" id="DiagnarrativeLabel" />
                        </apex:outputPanel>
                        <apex:outputPanel >
                            <apex:inputField value="{!currentVitalsDetail.Heart_Rate__c}" id="DiagheartRate" onblur="handleVitals(); return false;" />
                            <br/>
                            <div class="requiredInput">
                                <div class="requiredBlock"></div>
                                <apex:inputField Value="{!currentVitalsDetail.HR_Intervention_Needed__c}" id="DiaginterventionPicklist" onchange="handleVitals(); return false;" />
                            </div>
                            <div class="requiredInput">
                                <div class="requiredBlock"></div>
                                <apex:inputTextArea value="{!currentVitalsDetail.HR_Narrative_Note__c}" id="DiaginterventionDescribe" rows="3" cols="40" />
                            </div>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:pageBlockSectionItem >
                        <apex:outputPanel >
                            <apex:outputLabel for="DiagO2" value="O2 Saturation" />
                            <br/>
                            <br />
                            <apex:outputLabel for="DiagO2interventionPicklist" value="Intervention Needed" id="DiagO2interventionLabel" />
                            <br />
                            <br />
                            <apex:outputLabel for="DiagO2interventionDescribe" value="Narrative Note" id="DiagO2narrativeLabel" />
                        </apex:outputPanel>
                        <apex:outputPanel >
                            <apex:inputField value="{!currentVitalsDetail.O2_Saturation__c}" id="DiagO2" onblur="handleVitals(); return false;" />
                            <br/>
                            <div class="requiredInput">
                                <div class="requiredBlock"></div>
                                <apex:inputField Value="{!currentVitalsDetail.O2_Intervention_Needed__c}" id="DiagO2interventionPicklist" onchange="handleVitals(); return false;" />
                            </div>
                            <div class="requiredInput">
                                <div class="requiredBlock"></div>
                                <apex:inputTextArea value="{!currentVitalsDetail.O2_Narrative_Note__c}" id="DiagO2interventionDescribe" rows="3" cols="40" />
                            </div>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <apex:inputField value="{!currentVitalsDetail.R__c}" />
                    <apex:inputField value="{!currentVitalsDetail.Temperature__c}" />
                    <apex:inputField value="{!currentVitalsDetail.O2_Saturation__c}" />
                </apex:pageBlockSection>
            </apex:pageBlock>
        </apex:outputPanel>
        <apex:outputPanel id="pUlcerDetailDialog" style="display:none">
        	<span class="ui-helper-hidden-accessible"><input type="text"/></span>
        	<apex:pageBlock title="Add/Edit Pressure Ulcer Detail" id="pUlcerDetailDialogMainBlock">
        		<apex:pageBlockButtons location="bottom" >
        			<apex:actionFunction name="savepUlcerDetail" action="{!savepUlcerDetail}" rerender="pUlcersTable,pUlcerDetailDialogMainBlock,pUlcerDetailDialogErrors" status="savepUlcerDetailStatus" oncomplete="afterSave('{!$Component.pUlcerDetailDialog}', request.options.parameters.keepDialogOpen, showAddpUlcerDetail);">
                        <apex:param name="keepDialogOpen" value="" />
                    </apex:actionFunction>
        			<apex:actionStatus id="savepUlcerDetailStatus">
                        <apex:facet name="stop">
                            <apex:outputPanel id="pUlcerDetailButtons">
                                <apex:commandButton value="Save" onClick="savepUlcerDetail(false); return false;" />
                                <apex:commandButton value="Save & New" onClick="savepUlcerDetail(true); return false;" />
                                <apex:commandButton value="Cancel" onClick="closeModalDialog('{!$Component.pUlcerDetailDialog}'); return false;" />
                            </apex:outputPanel>
                        </apex:facet>
                        <apex:facet name="start">
                            <apex:image height="16px" value="/img/loading32.gif" styleClass="dialogLoadingSpinner" />
                        </apex:facet>
                    </apex:actionStatus>
        		</apex:pageBlockButtons>
        		<apex:pageMessages id="pUlcerDetailDialogErrors" />
        		<apex:pageBlockSection columns="2" >
        			<apex:inputField value="{!currentpUlcerDetail.Decubity_Stage__c}" />
        			<apex:inputField value="{!currentpUlcerDetail.Location__c}" />
        			<apex:inputField value="{!currentpUlcerDetail.Decubity_Measurement__c}" />
        			<apex:inputField value="{!currentpUlcerDetail.Treatment__c}" />
        			<apex:inputField value="{!currentpUlcerDetail.Date__c}" label="Date last measured"/>
        		</apex:pageBlockSection>
        	</apex:pageBlock>
        </apex:outputPanel>
    </apex:form>
    <apex:actionStatus id="pageProcessing">
        <apex:facet name="start">
            <div class="thinking">
                <div class="thinkingwheel">
                    <span><img class="waitingImage" src="/img/loading.gif" title="Please Wait..." />&nbsp; Saving &amp; Processing...</span>
                </div>
            </div>
        </apex:facet>
        <apex:facet name="stop" />
    </apex:actionStatus>
</apex:page>