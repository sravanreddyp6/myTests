<apex:page standardcontroller="Evaluation__c" extensions="CMShiftAssessmentEdit" > 
    <apex:includeScript value="{!URLFOR($Resource.jquery, 'js/jquery-1.7.2.min.js')}" />
    <apex:includeScript value="{!URLFOR($Resource.EvaluationJS)}"/>
    <apex:includeScript value="{!URLFOR($Resource.jquery, 'js/jquery-ui-1.8.21.custom.min.js')}"/>
    <apex:includeScript value="{!$Resource.AnnotoriousDev}"/>
    <apex:includeScript value="{!$Resource.AnotoJS}"/>
    <apex:stylesheet value="{!URLFOR($Resource.jquery, 'css/custom-theme/jquery-ui-1.8.21.custom.css')}"/>
    <apex:stylesheet value="{!URLFOR($Resource.EvaluationCSS)}"/>
    <apex:stylesheet value="{!URLFOR($Resource.Annotorious, 'css/annotorious.css')}"/>
    <style>
        [id$=skinBodyFooter] {
            clear: both;
        }
        [id$=bodyMapOtherComments] {
            clear: both;
        }
        .thinking{
            opacity:0.8;
            background-color:#ccc;
            position:fixed;
            width:100%;
            height:100%;
            top:0px;
            left:0px;
            z-index:1000;
        }
        .thinkingwheel{
            position:absolute; left:40%; top:48%; background-color: white; border: 2px solid gray; padding: 2px;
        }
         hr {
            color: #ECECEC;
            background-color: #ECECEC;
            margin-bottom: 20px;
            margin-top: 20px;
            border: none;
            height: 5px;
        }
        .evaluationTabHeader .sectionCompleted, .sectionCompletedLink {
            background-image: url("{!URLFOR($Resource.EvaluationResources, 'greencheck.png')}");
            background-repeat: no-repeat;
            padding-top: 22px;
        }
        .evaluationTabHeader .sectionNotCompleted, .sectionNotCompletedLink {
            background-image: url("{!URLFOR($Resource.EvaluationResources, 'whitecheck.png')}");
            background-repeat: no-repeat;
            padding-top: 22px;
        }
        .sectionNotCompletedLink, .sectionCompletedLink {
            vertical-align:bottom !important;
            background-position: center top;
            padding-left:10px;
            padding-right:10px;
        }
        .mycols{
            width: 15%;
            padding-left: 25px;
           cellspacing: 15px;
        }
    </style>
    <script>
	    function setFocusOnLoad() {}  // Overwrite VF function to focus on the 1st field
	        jQuery.noConflict();
       
       	 jQuery(document).ready(function ($) {
       	 		
       	 	handleHeartBeat = function () {
       	 	
       	 		var heartRate = $('[id$=heartRate]').val();
                var interventionpicklist = $('[id$=interventionPicklist]').val();
             
                if(heartRate == 'Irregular'){
                		$('[id$=interventionLabel]').show();
                		$('[id$=interventionPicklist]').show();
                		
                		if(interventionpicklist == 'Yes'){
                			$('[id$=interventionDescribe]').show();
                			$('[id$=narrativeLabel]').show();
                			
                			}
                		else{
                			$('[id$=interventionDescribe]').hide();
                			$('[id$=narrativeLabel]').hide();
                			$('[id$=interventionDescribe]').val('');
                		}
                	}
                	else{
                		$('[id$=interventionLabel]').hide();
                		$('[id$=interventionPicklist]').hide();
                		$('[id$=interventionDescribe]').hide();
                		$('[id$=narrativeLabel]').hide();
                		$('[id$=interventionPicklist]').val('');
                		$('[id$=interventionDescribe]').val('');
                		
                	}
       	 		 
             };
             
             handlePeripheralPulses = function(){
             	var pulsePresent = $('[id$=peripheralPulses]').val();
             	
             	if(pulsePresent == 'No'){
             		$('[id$=peripheraldescribeLabel]').show();
                	$('[id$=peripheralDescribe]').show();
             		
             	}
             	else{
             		$('[id$=peripheraldescribeLabel]').hide();
                	$('[id$=peripheralDescribe]').hide();
                	$('[id$=peripheralDescribe]').val('');
             	
             	}
             
             };
       	 	
       	 	handleCardio = function () {
       	 		handleHeartBeat();
       	 		handlePeripheralPulses();
       	 	
       	 	};
	       	
	       	handleCardio(); 	
       	 
       	 });   //end "ready" function
       
         
         function getNextTab( currTab ) {
            var nextTab = currTab;

            if ( currTab == 'demographicsTab' || currTab == '')
                nextTab = 'diagnosticTab';
            else if( currTab == 'diagnosticTab')
                nextTab =  'cardioTab';
            else if ( currTab== 'cardioTab')
                nextTab = 'nutritionTab';
            else if ( currTab == 'nutritionTab')
                nextTab = 'skinBodyTab';
            else if ( currTab == 'skinBodyTab')
                nextTab = 'neuroTab';
            else if ( currTab == 'neuroTab')
                nextTab = 'orthoTab';
            else if ( currTab == 'orthoTab')
                nextTab = 'psychoSocialTab';

            return nextTab;
            }
            
            
       	 
    
    
    </script>
    
    
    <div id="breadcrumb" class="breadcrumb">
    <a href="/">Home</a>&nbsp;>&nbsp;
    <a href="/apex/PersonsBeingServedListView">Persons Being Served</a>&nbsp;>&nbsp;
    <a href="/{!Evaluation__c.ServiceAssignment__r.Person_Being_Served__c}">{!Evaluation__c.ServiceAssignment__r.Person_Being_Served__r.Name}</a>&nbsp;>&nbsp;
    <a href="/{!Evaluation__c.ServiceAssignment__r.Admission__c}">Admission</a>&nbsp;>&nbsp;
    <a href="/{!Evaluation__c.ServiceAssignment__c}" >Service Assignment</a>&nbsp;>&nbsp;
    <apex:outputText value="Shift Assessment" />
    </div>
    <apex:form id="wholePage" >
    	<apex:outputpanel rendered="false" >
    		<apex:inputhidden value="{!Evaluation__c.ServiceAssignment__r.Admission__r.Person_Being_Served__c}" /> 
    		<apex:inputhidden value="{!Evaluation__c.Resident_Demonstrating_Issues__c}" />
    		<apex:inputhidden value="{!Evaluation__c.Orientation__c}" />
    		<apex:inputhidden value="{!Evaluation__c.Mood__c}" />
    		<apex:inputhidden value="{!Evaluation__c.Breathe_Sounds__c}" />
    	</apex:outputpanel>
        <apex:pageMessages id="pageMessages" />
         <apex:actionFunction action="{!changeTab}" name="changeTab" status="pageProcessing" oncomplete="handleCardio();" reRender="pageMessages, wholeTabPanel, buttons">
            <apex:param name="nextTab" assignTo="{!nextTab}" value="" />
        </apex:actionFunction>
         <apex:tabPanel value="{!selectedTab}" id="wholeTabPanel" activeTabClass="evaluationActiveTab" inactiveTabClass="evaluationInactiveTab" headerClass="evaluationTabHeader" contentClass="evaluationTabContent" >
             <apex:tab label="Demographics" name="demographicsTab" ontabenter="changeTab('demographicsTab'); return false;" styleClass="{!IF(Evaluation__c.Details_Section_Completed__c, 'sectionCompleted', 'sectionNotCompleted')}" >
                 <apex:pageBlock >
                 	<apex:pageBlockSection Columns="2" Collapsible="false" >
                 		<apex:outputField Value="{!Evaluation__c.ServiceAssignment__r.Service_Location__r.Alias__c}"/>
                 		<apex:pageBlockSectionItem >
                            <apex:outputLabel Value="Address"/> <c:AddressDisplay Street1="{!Evaluation__c.ServiceAssignment__r.Service_Location__r.Street__c}"
                                                                              City="{!Evaluation__c.ServiceAssignment__r.Service_Location__r.City__c}"
                                                                              State="{!Evaluation__c.ServiceAssignment__r.Service_Location__r.State__c}"
                                                                              Zip="{!Evaluation__c.ServiceAssignment__r.Service_Location__r.Zip__c}" />
                        </apex:pageBlockSectionItem>
                        <apex:outPutField value="{!Evaluation__c.ServiceAssignment__r.Admission__r.Person_Being_Served__r.Name}" />
                        <apex:OutputField value="{!Evaluation__c.ServiceAssignment__r.Admission__r.Person_Being_Served__r.BirthDate}" />
                        <apex:outputField value="{!Evaluation__c.ServiceAssignment__r.Admission__r.Person_Being_Served__r.Age__c}" />
                        <apex:outputField value="{!Evaluation__c.ServiceAssignment__r.Medical_Record_Number__c}" />
                        <apex:outputText value="{!primaryPhysician}" label="Primary Physician" />
                        <apex:pageBlockSectionItem HelpText="To edit this information, return to the Person Being Served record.">
                        	{!$ObjectType.Contact.fields.Advanced_Directives__c.label}
                        	<apex:outputField value="{!Evaluation__c.ServiceAssignment__r.Admission__r.Person_Being_Served__r.Advanced_Directives__c}" />
                        </apex:pageBlockSectionItem>
                        <apex:outputField value="{!Evaluation__c.ServiceAssignment__r.Admission__r.Person_Being_Served__r.Code_Status__c}"  />
                        <apex:outputField value="{!Evaluation__c.ServiceAssignment__r.Admission__r.Person_being_served__r.Advanced_Directives_Attached__c}" />
                        <apex:outputField value="{!Evaluation__c.ServiceAssignment__r.admission__r.Person_Being_Served__r.Code_Status_Other__c}" id="codeStatusOther" label="Specify Other" />
                 	</apex:pageBlockSection>
                 	<c:EvaluationResponseTable pbsParentId="{!Evaluation__c.ServiceAssignment__r.Person_Being_Served__c}"
                        addEnabled="true" editEnabled="true" type="Allergy" formId="{!$Component.wholePage}" uniqueId="allergy" />
                 </apex:pageBlock>
             </apex:tab>
             
             <apex:tab label="Diagnostics" name="diagnosticTab" ontabenter="changeTab('diagnosticTab'); return false;" styleClass="{!IF(Evaluation__c.Diagnostics_Section_Completed__c, 'sectionCompleted', 'sectionNotCompleted')}" >
                <apex:pageBlock >
                	<c:EvaluationResponseTable parentId="{!Evaluation__c.Id}" type="Vitals Detail" formId="{!$Component.wholePage}" uniqueId="vitals" />
                	<apex:pageBlockSection columns="1" title="IV">
                		<apex:pageBlockSectionItem >
                			<apex:outputLabel value="IV" />
                			<apex:actionRegion >
                			<apex:inputField Value="{!Evaluation__c.IV_Picklist__c}" >
                				<apex:actionStatus id="ivStatus" >
							  		<apex:facet name="start">
							           <div class="waitingHolder" style="display: inline; margin-left: 5px; position: relative; top: 5px;">
							               <img class="waitingImage" src="/img/loading.gif" title="Please Wait..." /> <span class="waitingDescription"></span>
							           </div>
							       </apex:facet>
							       <apex:facet name="stop"></apex:facet>
							  	</apex:actionStatus>
                				<apex:actionSupport event="onchange" rerender="ivSection" status="ivStatus" action="{!handleIVFields}"/>
                			</apex:inputField>
                			</apex:actionRegion>
                		</apex:pageBlockSectionItem>
                	</apex:pageBlockSection>
                	
                	<apex:pageBlockSection columns="1" id="ivSection" >
                        <apex:pageBlockSectionItem rendered="{!Evaluation__c.IV_Picklist__c == 'Yes'}">
                        <apex:outputLabel value="IV Type" />
                        <apex:outputPanel >
                            <apex:outputText styleClass="labelCol" value="PICC" /><apex:inputField value="{!Evaluation__c.PICC__c}" />
                            <apex:outputText styleClass="labelCol" value="Central" style="margin-left:20px;"/><apex:inputField value="{!Evaluation__c.Central__c}" />
                            <apex:outputText styleClass="labelCol" value="HepLock" style="margin-left:20px;"/><apex:inputField value="{!Evaluation__c.HepLock__c}" />
                        </apex:outputPanel>
                     </apex:pageBlockSectionItem>
                     <apex:pageBlockSectionItem rendered="{!Evaluation__c.IV_Picklist__c == 'Yes'}" >
                			<apex:outputLabel value="IV Site Issues" />
                			<apex:actionRegion >
                			<apex:inputField Value="{!Evaluation__c.IV_Site_Issues__c}" id="issuesissues">
                				<apex:actionStatus id="narrativenoteStatus" >
							  		<apex:facet name="start">
							           <div class="waitingHolder" style="display: inline; margin-left: 5px; position: relative; top: 5px;">
							               <img class="waitingImage" src="/img/loading.gif" title="Please Wait..." /> <span class="waitingDescription"></span>
							           </div>
							       </apex:facet>
							       <apex:facet name="stop"></apex:facet>
							  	</apex:actionStatus>
                				<apex:actionSupport event="onchange" rerender="narrativeNote" status="narrativenoteStatus" action="{!handleNarrativenote}" />
                			</apex:inputField>
                			</apex:actionRegion>
                		</apex:pageBlockSectionItem>
                     <apex:pageBlockSection columns="1" id="narrativeNote">
                     	 <apex:pageBlockSectionItem >
                     	 	<apex:outputlabel value="IV Narrative Note" rendered="{!Evaluation__c.IV_Site_Issues__c=='Yes'&& Evaluation__c.IV_Picklist__c=='Yes'}" />
                     	 	<apex:outputPanel >
                     	 		<div class="requiredInput">
                     	 			<div class="requiredBlock"></div>
	                     			<apex:inputTextArea value="{!Evaluation__c.IV_Narrative_Note__c}" rows="4" cols="60" rendered="{!Evaluation__c.IV_Site_Issues__c=='Yes'&& Evaluation__c.IV_Picklist__c=='Yes'}"  required="True" id="longDesc"/>
	                     		</div>
	                     	</apex:outputPanel>
	                     </apex:pageBlockSectionItem>
                     </apex:pageBlockSection>
                  </apex:pageBlockSection>
               </apex:pageBlock>
           </apex:tab>
             <apex:tab label="Cardiopulmonary" name="cardioTab" onTabenter="changeTab('cardioTab'); return false;" styleClass="{!IF(Evaluation__c.Cardio_Section_Completed__c, 'sectionCompleted', 'sectionNotCompleted')}" >
                <apex:pageBlock >
                	<apex:pageBlockSection Columns="2" title="cardio">
                	
                		<apex:inputField value="{!Evaluation__c.Heart_Sounds__c}" label="Heart Rate" required="true" id="heartRate" onchange="handleHeartBeat(); return false;" />
                		
                		<apex:pageblocksectionitem >
                			<apex:outputLabel value="Periphral Pulses Present" />
	                        <apex:inputField value="{!Evaluation__c.Peripheral_Pulses_Present__c}" id="peripheralPulses" required="True" onchange="handlePeripheralPulses(); return false;"/>
	                     </apex:pageblocksectionitem>
	                        
                		<apex:pageBlockSectionItem >
                			<apex:outputlabel value="Intervention Needed" id="interventionLabel" /> 
                			<apex:outputPanel >
                     	 		<div class="requiredInput">
                     	 			<div class="requiredBlock"></div>
	                     			<apex:inputField value="{!Evaluation__c.Heart_Intervention_Need_Picklist__c}" id="interventionPicklist" onchange="handleHeartBeat(); return false;"/>
	                     		</div>
	                     	</apex:outputPanel>
                		</apex:pageBlockSectionItem >
                		
                		<apex:pageBlockSectionItem >
                			<apex:outputLabel value="Describe" id="peripheraldescribeLabel" />
                			<apex:outputPanel >
                     	 		<div class="requiredInput">
                     	 			<div class="requiredBlock"></div>
	                     			<apex:inputField value="{!Evaluation__c.Peripheral_Pulses_Describe__c}" id="peripheralDescribe" />
	                     		</div>
	                     	</apex:outputPanel>
                		</apex:pageBlockSectionItem >
                		
                		<apex:pageBlockSectionItem >
                			<apex:outputLabel value="Narrative Note" id='narrativeLabel' />
                			<apex:outputPanel >
                     	 		<div class="requiredInput">
                     	 			<div class="requiredBlock"></div>
	                     			<apex:inputTextArea value="{!Evaluation__c.Heart_Rate_Intervention_Describe__c}" id="interventionDescribe" rows="4" cols="60" />
	                     		</div>
	                     	</apex:outputPanel>
                		</apex:pageBlockSectionItem >
                		
                		
                	</apex:pageBlockSection >
                	<apex:pageBlockSection title="Sputum" collapsible="True" columns="2" >
                	
                		<apex:inputField value="{!Evaluation__c.Sputum_Quantity__c}" id="sputumQuantity" />

                         <apex:inputField value="{!Evaluation__c.Sputum_Color__c}" id="sputumColor" />
                         <apex:inputField value="{!Evaluation__c.Blood_Tinged__c}" id="bloodTinged"/>
                         <apex:inputField value="{!Evaluation__c.Odor__c}" id="odor" />
                         <apex:pageBlockSectionItem >
                         <apex:outputLabel value="Sputum Consistency"  />
                         <apex:outputPanel >
                         <table>
                         <tr><td><apex:inputField Value="{!Evaluation__c.Thick__c}" id="thick" /><apex:outputLabel for="thick">{!$ObjectType.Evaluation__c.Fields.Thick__c.label}</apex:outputLabel></td></tr>
                         <tr><td><apex:inputField value="{!Evaluation__c.Thin__c}" id="thin" /><apex:outputLabel for="thin">{!$ObjectType.Evaluation__c.Fields.Thin__c.label}</apex:outputLabel></td></tr>
                         <tr><td><apex:inputField value="{!Evaluation__c.Frothy__c}" id="frothy" /><apex:outputLabel for="frothy">{!$ObjectType.Evaluation__c.Fields.Frothy__c.label}</apex:outputLabel></td></tr>
                         <tr><td><apex:inputField value="{!Evaluation__c.Sticky__c}" id="sticky" /><apex:outputLabel for="sticky">{!$ObjectType.Evaluation__c.Fields.Sticky__c.label}</apex:outputLabel></td></tr>
                         <tr><td><apex:inputField value="{!Evaluation__c.Creamy__c}" id="creamy" /><apex:outputLabel for="creamy">{!$ObjectType.Evaluation__c.Fields.Creamy__c.label}</apex:outputLabel></td></tr>
                         </table>
                         </apex:outputPanel>
                         </apex:pageBlockSectionItem>

                        <apex:pageblockSectionItem >
                            <apex:outputLabel value="Breath Sounds" styleClass="labelCol" />
                            <apex:selectCheckboxes value="{!selectedSounds}" id="breathesound" layout="pageDirection" onchange="handleOther('breathesound')">
                                <apex:selectOptions value="{!breatheSounds}" />
                            </apex:selectCheckboxes>
                         </apex:pageblockSectionItem>
                         
                         <apex:outputtext value="" />
                         <apex:pageBLockSectionItem helpText="{!$ObjectType.Evaluation__c.Fields.Breathe_Sound_Other__c.inlineHelpText}">
                            <apex:outputlabel for="breathesoundother" value="If Other Describe" />
                            <apex:inputField value="{!Evaluation__c.Breathe_Sound_Other__c}" id="breathesoundother"/>
                         </apex:pageBLockSectionItem>
                	
                	</apex:pageBlockSection>
               
                </apex:pageBlock>
             </apex:tab>
             
             <apex:tab label="GU/GI/Nutrition" name="nutritionTab" ontabenter="changeTab('nutritionTab'); return false;" styleClass="{!IF(Evaluation__c.Nutrition_Section_Completed__c, 'sectionCompleted', 'sectionNotCompleted')}" >
                <apex:pageBlock >
                
                </apex:pageBlock>
             </apex:tab>
             
             <apex:tab label="Skin/Body" name="skinBodyTab" ontabenter="changeTab('skinBodyTab'); return false;" styleClass="{!IF(Evaluation__c.Skin_Section_Completed__c, 'sectionCompleted', 'sectionNotCompleted')}" >
                <apex:pageBlock >
                	
                </apex:pageBlock>
             </apex:tab>
             
             <apex:tab label="Neurological" name="neuroTab" ontabenter="changeTab('neuroTab');return false;" styleClass="{!IF(Evaluation__c.Neuro_Section_Completed__c, 'sectionCompleted', 'sectionNotCompleted')}" >
                <apex:pageBlock >
                	<apex:pageBlockSection columns="1" >
                		<apex:inputField value="{!Evaluation__c.Rancho_Level__c}"  id="ranchoValue" >
                			<apex:actionStatus id="ranchoStatus" >
							  		<apex:facet name="start">
							           <div class="waitingHolder" style="display: inline; margin-left: 5px; position: relative; top: 5px;">
							               <img class="waitingImage" src="/img/loading.gif" title="Please Wait..." /> <span class="waitingDescription"></span>
							           </div>
							       </apex:facet>
							       <apex:facet name="stop"></apex:facet>
							  	</apex:actionStatus>
                			<apex:actionSupport event="onchange" rerender="response"  status="ranchoStatus" action="{!handleRanchoresponse}" />
                		</apex:inputField>	
                	</apex:pageBlockSection>
                	
                	<apex:pageBlockSection id="response" columns="1">
                		<apex:pageBlockSectionItem rendered="{!Evaluation__c.Rancho_Level__c !='' && Evaluation__c.Rancho_Level__c != '(1) No Response'}">
	                        <apex:outputLabel value="Responds To" />
	                        <apex:outputPanel >
	                        <apex:inputField id="vstimresponds" value="{!Evaluation__c.Verbal_Stim__c}" /><apex:outputLabel for="vstim" value="Verbal Stim" />&nbsp;
	                        <apex:inputField id="astimresponds" value="{!Evaluation__c.Auditory_Stim__c}" /><apex:outputLabel for="astim" value="Auditory Stim" />&nbsp;
	                        <apex:inputField id="tstimresponds" value="{!Evaluation__c.Tactile_Stim__c}" /><apex:outputLabel for="tstim" value="Tactile Stim" />&nbsp;
	                        <apex:inputField id="pstimresponds" value="{!Evaluation__c.Responds_To_Pain__c}" label="Pain" /><apex:outputLabel for="pstim" value="Pain" />&nbsp;
	                        <apex:inputField id="visualresponds" value="{!Evaluation__c.Visual__c}"/><apex:outputLabel for="visual" value="Visual" />
	                        </apex:outputPanel>
                  		</apex:pageBlockSectionItem>
         
                  		<apex:inputField value="{!Evaluation__c.Level_of_Conciousness__c}" rendered="{!Evaluation__c.Rancho_Level__c !='' && Evaluation__c.Rancho_Level__c != '(1) No Response'}" />
                        <apex:pageBlockSectionItem rendered="{!Evaluation__c.Rancho_Level__c !='' && Evaluation__c.Rancho_Level__c != '(1) No Response'}" >
                            <apex:outputLabel value="Orientation" />
                            <apex:selectCheckboxes value="{!selectedNeuroOrient}" style="margin-left:-13px" >
                                <apex:selectOptions value="{!neuroOrientValues}" />
                            </apex:selectCheckboxes>
                        </apex:pageBlockSectionItem>

                        <apex:pageBlockSectionItem rendered="{!Evaluation__c.Rancho_Level__c !='' && Evaluation__c.Rancho_Level__c != '(1) No Response'}" >
                        <apex:outputLabel value="Behavior" />
                        <apex:outputPanel >
                        <apex:inputField id="coop" value="{!Evaluation__c.Cooperative__c}" /><apex:outputLabel for="coop" value="Cooperative" />&nbsp;
                        <apex:inputField id="impulsive" value="{!Evaluation__c.Impulsive__c}" /><apex:outputLabel for="impulsive" value="Impulsive" />&nbsp;
                        <apex:inputField id="inapp" value="{!Evaluation__c.Inappropriate__c}" /><apex:outputLabel for="inapp" value="Inappropriate" />&nbsp;
                        <apex:inputField id="agitated" value="{!Evaluation__c.Agitated__c}" /><apex:outputLabel for="agitated" value="Agitated" />&nbsp;
                        <apex:inputField id="combat" value="{!Evaluation__c.Combative__c}" /><apex:outputLabel for="combat" value="Combative" />&nbsp;
                        <apex:inputField id="confused" value="{!Evaluation__c.Confused__c}"/><apex:outputLabel for="confused" value="Confused" />&nbsp;
                        <apex:inputField id="unresp" value="{!Evaluation__c.Unresponsive__c}"/><apex:outputLabel for="unresp" value="Unresponsive" />
                        </apex:outputPanel>
                        </apex:pageBlockSectionItem>             
                        </apex:PageblockSection>
                        
                        <apex:pageBlockSection columns="1" id="moodBlock">
                        	<apex:pageBlockSectionItem >
                            	<apex:outputLabel value="Mood" />
                            	<apex:actionregion >
                            	<apex:selectCheckboxes value="{!selectedMoods}"  style="margin-left:-13px" id="moodlist">
                                	<apex:selectOptions value="{!moodValues}" />
                                		<apex:actionStatus id="moodStatus"  >
								  			<apex:facet name="start">
								           	 <div class="waitingHolder" style="display: inline; margin-left: 5px; position: relative; top: 5px;">
								               	<img class="waitingImage" src="/img/loading.gif" title="Please Wait..."  /> <span class="waitingDescription"></span>
								           	 </div>
								       		</apex:facet>
								       		<apex:facet name="stop"></apex:facet>
								  		</apex:actionStatus>
	                				<apex:actionSupport event="onchange" rerender="residenthurtSection,moodlist,plantoHurt" action="{!handleMood}"  status="moodStatus" />
                            	</apex:selectCheckboxes>
                            	</apex:actionregion>
                        	</apex:pageBlockSectionItem>
                        	
                        	<apex:outputPanel id="residenthurtSection" >
	                        <apex:pageBlockSectionItem rendered="{!showResidenthurt}" >
	                        	<apex:outputLabel value="Has Resident Expressed Desire to Hurt Him/Herself?" styleClass="labelCol" style="margin-left:55px;"/>
	                        	<apex:actionregion >
	                        	<apex:inputField value="{!Evaluation__c.Desire_to_hurt_themselves__c}" style="margin-left: 5Px;">
	                        		<apex:actionStatus id="hurtStatus" >
								  		<apex:facet name="start">
								           <div class="waitingHolder" style="display: inline; margin-left: 5px; position: relative; top: 5px;">
								               <img class="waitingImage" src="/img/loading.gif" title="Please Wait..." /> <span class="waitingDescription"></span>
								           </div>
								       </apex:facet>
								       <apex:facet name="stop"></apex:facet>
								  	</apex:actionStatus>
	                			<apex:actionSupport event="onchange" rerender="plantoHurt"  status="hurtStatus" action="{!handleResidenthurt}"/>
	                        	</apex:inputField>
	                        	</apex:actionregion>
	                        </apex:pageBlockSectionItem>
	                        </apex:outputPanel>
                        
	                        <apex:outputPanel id="plantoHurt" >
	                        <apex:pageBlockSectionItem rendered="{!Evaluation__c.Desire_to_hurt_themselves__c == 'Yes' && showResidenthurt}" >
	                        	<apex:outputText value="Does Resident Have a Plan to Harm Him/Herself?" styleClass="labelCol" style="margin-left: 65px;"/>
	                        	<apex:inputField value="{!Evaluation__c.Plan_to_Harm_themselves__c}" style="margin-left: 10Px;"/>
	                        </apex:pageBlockSectionItem>
	                        </apex:outputPanel>
	                  	</apex:pageBlockSection>
                </apex:pageBlock>
             </apex:tab>
             
             <apex:tab label="Ortho" name="orthoTab" ontabenter="changeTab('orthoTab'); return false;" styleClass="{!IF(Evaluation__c.Ortho_Section_Completed__c, 'sectionCompleted', 'sectionNotCompleted')}" >
                <apex:pageBlock >
                
                </apex:pageBlock>
             </apex:tab>
             <apex:tab label="Psycho/Social" name="psychoSocialTab" ontabenter="changeTab('psychoSocialTab'); return false;" styleClass="{!IF(Evaluation__c.Psycho_Social_Section_Completed__c, 'sectionCompleted', 'sectionNotCompleted')}" >
                <apex:pageBlock >
                	<apex:pageBlockSection Columns="1" >
                		<apex:pageBlockSectionItem >
                			<apex:outputLabel > Does Resident appear to be<br/>coping well </apex:outputLabel>
                			<apex:actionRegion >
                			<apex:inputField Value="{!Evaluation__c.Resident_Coping_Well__c}" >
                				<apex:actionStatus id="copingStatus" >
							  		<apex:facet name="start">
							           <div class="waitingHolder" style="display: inline; margin-left: 5px; position: relative; top: 5px;">
							               <img class="waitingImage" src="/img/loading.gif" title="Please Wait..." /> <span class="waitingDescription"></span>
							           </div>
							       </apex:facet>
							       <apex:facet name="stop"></apex:facet>
							  	</apex:actionStatus>
                				<apex:actionSupport event="onchange" rerender="copingDescribe" status="copingStatus" action="{!handleResidentdescribe}"/>
                			</apex:inputField>
                			</apex:actionRegion>
                		</apex:pageBlockSectionItem>
                	</apex:pageBlockSection>
                	<apex:pageBlockSection columns="1" id="copingDescribe" >
                		<apex:pageBlockSectionItem >
                     	 	<apex:outputlabel value="Describe" rendered="{!Evaluation__c.Resident_Coping_Well__c =='No'}" />
                     	 	<apex:outputPanel >
                     	 		<div class="requiredInput">
                     	 			<div class="requiredBlock"></div>
	                     			<apex:inputfield value="{!Evaluation__c.Coping_Description__c}"  rendered="{!Evaluation__c.Resident_Coping_Well__c =='No'}"  required="True"/>
	                     		</div>
	                     	</apex:outputPanel>
	                     </apex:pageBlockSectionItem>
                	</apex:pageBlockSection>
                	<apex:pageBlockSection columns="1" >
                		<apex:inputField value="{!Evaluation__c.Does_Resident_appear_to_demonstrate__c}" label="Does Resident appear to<br/>demonstrate/note<br/>any of the following" />
                		<apex:pageBlockSectionItem >
                			<apex:outputText value="" />
	                		<apex:selectCheckboxes value="{!selectedCoping}" layout="pageDirection" style="margin-left:-13px" >
	                                <apex:selectOptions value="{!copingValues}" />
	                        </apex:selectCheckboxes>
                        </apex:pageBlockSectionItem>
                	</apex:pageBlockSection>
                </apex:pageBlock>
             </apex:tab>
         </apex:tabPanel>
         <apex:pageBlock id="buttons">
            <apex:pageBlockButtons location="bottom">
                <apex:commandButton Value="Save & Continue" onClick="changeTab(getNextTab('{!selectedTab}')); return false;" rendered="{!selectedTab != 'dischargePlanTab'}" />
                <apex:commandButton value="Save" action="{!save}" />
                <apex:commandButton value="Cancel" onClick="window.location='apex/CMShiftAssessmentView?id={!Evaluation__c.Id}&tab={!selectedTab}'; return false;"/>
            </apex:pageBlockButtons>
        </apex:pageBlock>        
    </apex:form>
    <apex:actionStatus id="pageProcessing" >
        <apex:facet name="start">
            <div class="thinking">
                <div class="thinkingwheel">
                    <span><img class="waitingImage" src="/img/loading.gif" title="Please Wait..." />&nbsp; Saving &amp; Processing...</span>
                </div>
            </div>
        </apex:facet>
        <apex:facet name="stop"/>
    </apex:actionStatus>
</apex:page>