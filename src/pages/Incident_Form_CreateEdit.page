<apex:page standardcontroller="Incident__c" Extensions="Incident_Form_CreateEdit" sidebar="false" docType="html-5.0" >
    <apex:includeScript value="{!URLFOR($Resource.jquery, 'js/jquery-1.7.2.min.js')}" />
    <apex:includeScript value="{!URLFOR($Resource.jquery, 'js/jquery-ui-1.8.21.custom.min.js')}" />
<apex:includeScript value="{!URLFOR($Resource.CommonJS)}" />
<apex:stylesheet value="{!URLFOR($Resource.mentoresd,'/mentoresd.css')}" />
<script>
    function setFocusOnLoad() {} //to prevent fiocus from first date time field


        jQuery.noConflict();
        jQuery(document).ready(function($) {
            setUpFields = function () {
                // Apply rules to input fields
                $('body input').on("change", function (event) {
                    applyShowHideRulesToField(event.target);
                });
                $('body select').on("change", function (event) {
                    applyShowHideRulesToField(event.target);
                });
                $('body input').each(function (_, target) {
                    applyShowHideRulesToField(target);
                });
                $('body select').each(function (_, target) {
                    applyShowHideRulesToField(target);
                });
            };
            setUpFields();
        }); 
</script>
<br/>
<c:PersonalRecord pbsId="{!servAssign.Admission__r.Person_Being_Served__c}" servAssignId="{!servAssign.Id}" parentPage="incidentEdit" admId="{!servAssign.Admission__c}" rendered="{!servAssign.id != null}" />
<apex:pagemessages id="msgs" />
<apex:form >
    <apex:pageBlock >
        <apex:pageBlockButtons >
            <div style="float: right;">
                <apex:CommandButton action="{!Save}" value="Save" />
                <apex:CommandButton action="{!Cancel}" value="Cancel" />
            </div>
        </apex:pageBlockButtons>
        <apex:pageBlock mode="mainDetail" title="Incident Details" id="mainBlock">
            <apex:pageBlockSection columns="2" id="section1">
            
                <apex:inputField label="Incident Level" value="{!Incident__c.Incident_Level__c}" />
                <apex:inputField value="{!Incident__c.Network_Type__c }" /> 
                
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Date/Time Incident Occurred</apex:outputLabel>
                    <apex:outputPanel >
                        <apex:inputField id="unknownDate" value="{!Incident__c.Unknown_Date_Occurred__c}" />Unknown
                        <br/>
                        <c:MilitaryDateTimeWithSeconds shiftTop="20" edit="true" hiddenFieldId="DateOccurred" dateTimeVal="{! IF(Incident__c.Date_Occurred__c==null, NOW(), Incident__c.Date_Occurred__c) }" datetimepickerid="DateOccurredInput"/>
                        <apex:inputHidden value="{!Incident__c.Date_Occurred__c}" id="DateOccurred" />                  
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                <apex:pageBlockSectionItem >
                    <apex:outputLabel >Date/Time Incident Reported to The MENTOR Network</apex:outputLabel>
                    <apex:outputPanel >
                        <c:MilitaryDateTimeWithSeconds shiftTop="20" edit="true" hiddenFieldId="DateOccurred" dateTimeVal="{! IF(Incident__c.Date_Reported__c==null, NOW(), Incident__c.Date_Reported__c) }" datetimepickerid="DateOccurredInput"/>
                        <apex:inputHidden value="{!Incident__c.Date_Occurred__c}" id="DateOccurred" />
                        <apex:inputHidden value="{!Incident__c.Date_Reported__c}" id="DateReported"/>                   
                    </apex:outputPanel>
                </apex:pageBlockSectionItem>
                                
                <apex:inputField label="Which of the following describe the events?" value="{!Incident__c.Incident_Type__c}" />
                <apex:inputField label="Incident Type-Detailed list" value="{!Incident__c.Incident_Type_Detail__c}" />              
                
                <apex:inputField label="Staff present at the time of the Incident?" value="{!Incident__c.Staff_Present__c }" />
                <apex:inputField id="where_incident" label="Where did the incident occur?" value="{!Incident__c.Where_incident_occurred__c }"  />    
                <apex:inputField label="Specify Community Location" value="{!Incident__c.Community_Location__c }" id="communityLocation"/>
                <apex:inputField label="Specify Other Location" value="{!Incident__c.Other_Location__c }" id="otherIncidentLocation" />
                                
                <apex:inputField label="First Response Action Taken" value="{!Incident__c.First_Response_Action_Taken__c}" />
                
                <apex:inputField label="Was the Person Being Served hospitalized?" value="{!Incident__c.Hospitalized__c}" />
                <apex:inputField label="Type of Hospitalization" value="{!Incident__c.Hospitalization_Type__c}" />
                <apex:inputField label="Was the Person Being Served Arrested/Detained?" value="{!Incident__c.PBS_Arrested__c}" />
                <apex:inputField label="Reason Known?" value="{!Incident__c.PBS_Arrest_Reason_Known__c}" />
                
                
                <apex:inputField label="Incident Outcome" value="{!Incident__c.Incident_Outcome__c}" />
                <apex:inputField label="Mentor present at the time of the incident?" value="{!Incident__c.Mentor_present__c}" />

                <apex:inputField label="Other people information" value="{!Incident__c.Other_people__c }" />
                <apex:inputField label="Others present at the time of the incident?" value="{!Incident__c.Others_Present_at_Time_of_Incident__c }" />

                <apex:inputField label="Which current service is related to the incident? " value="{!Incident__c.Service_Assignment__c }" />
                

                

                <apex:inputField label="Was an Internal Investigation initiated?" value="{!Incident__c.Internal_Investigation__c }" />

                
                <apex:pageBlockSectionItem />
                <apex:pageBlockSectionItem />
                
                <apex:inputField value="{!Incident__c.Location__c}" />
                <apex:inputField value="{!Incident__c.TMN_Contact__c}" />
                <apex:inputField value="{!Incident__c.Operating_Group__c}" />
                <apex:inputField value="{!Incident__c.Original_Incident__c }" />                
                <apex:inputField value="{!Incident__c.Supervised__c }" />
                <apex:inputField value="{!Incident__c.Prior_Revision__c }" />               
                <apex:inputField value="{!Incident__c.TMN_User__c }" />
                <apex:inputField value="{!Incident__c.State__c }" />
                <apex:inputField value="{!Incident__c.Status__c }" />
                
                                        
            
            </apex:pageBlockSection>
        </apex:pageBlock>
    </apex:pageBlock>
</apex:form>
</apex:page>