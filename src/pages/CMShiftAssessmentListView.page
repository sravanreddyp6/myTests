<apex:page controller="CMShiftAssessmentListViewController" standardStylesheets="true" sidebar="false" tabStyle="Persons_Being_Served_New__tab" showheader="true" readOnly="True" >
	<apex:includeScript value="{!URLFOR($Resource.jquery, 'js/jquery-1.7.2.min.js')}" />
	<apex:includeScript value="{!URLFOR($Resource.jquery, 'js/jquery-ui-1.8.21.custom.min.js')}" />
	<apex:includeScript value="{!URLFOR($Resource.dataTables, '/dataTables/media/js/jquery.dataTables.min.js')}" />
	<apex:stylesheet value="{!URLFOR($Resource.mentoresd,'/mentoresd.css')}" />
	
	<c:PersonalRecord pbsId="{!SA.admission__r.Person_Being_Served__c}" servAssignId="{!SA.Id}" admId="{!SA.Admission__c}" parentPage="ShiftAssessmentListView" />

	<apex:form >
		<apex:pageMessages id="errors" />
		<apex:pageBlock id="theBlock">
			<apex:pageBlockSection columns="1" id="theSection">
				<apex:pageBlockTable styleclass="pcBody-list" value="{!evaluations}" var="evs"  id="evaluationsT" styleClass="dataTable">
					<apex:column headerValue="Action"><apex:outputLink value="/apex/EvaluationEdit?id={!evs.Id}&tab=demographicsTab" rendered="{!!evs.Is_Signed__c}">Edit</apex:outputLink>
					</apex:column>
					<apex:column >
						<apex:facet name="header">
							<apex:commandLink value="Name" action="{!toggleSort}"  reRender="evaluationsT,errors" >
								<apex:param name="sortField" value="Name" assignTo="{!sortField}"/>
							</apex:commandLink>
						</apex:facet>
						<apex:outputLink value="/apex/EvaluationView?id={!evs.Id}">{!evs.Name}</apex:outputLink>
					</apex:column>
					<apex:column >
						<apex:facet name="header" >
							<apex:commandLink Value="Shift Start Time" action="{!toggleSort}"  reRender="evaluationsT,errors" >
								<apex:param name="sortField" value="Shift_Start_Time__c" assignTo="{!sortField}" />
							</apex:commandLink>
						</apex:facet>
						<c:MilitaryDatetime dateTimeVal="{!evs.Shift_Start_Time__c}" />
					</apex:column>
					<apex:column >
						<apex:facet name="header" >
							<apex:commandLink Value="Shift End Time" action="{!toggleSort}" reRender="evaluationsT,errors" >
								<apex:param name="sortField" value="Shift_End_Time__c" assignTo="{!sortField}" />
							</apex:commandLink>
						</apex:facet>
						<c:MilitaryDatetime dateTimeVal="{!evs.Shift_End_Time__c}" />
					</apex:column>
					<apex:column >
						<apex:facet name="header" >
							<apex:commandLink Value="Status" action="{!toggleSort}" reRender="evaluationsT,errors" >
								<apex:param name="sortField" value="Status__c" assignTo="{!sortField}" />
							</apex:commandLink>
						</apex:facet>
						<apex:outputText value="{!evs.Status__c}" />
					</apex:column>
					<apex:column >
						<apex:facet name="header" >
							<apex:commandLink Value="Signed" action="{!toggleSort}" reRender="evaluationsT,errors" >
								<apex:param name="sortField" value="Is_Signed__c" assignTo="{!sortField}" />
							</apex:commandLink>
						</apex:facet>
						<apex:outputField value="{!evs.Is_Signed__c}" />
					</apex:column>
					
					<apex:column headerValue="Signed By">
						 <apex:outputText rendered="{!evs.Evaluation_Responses__r.size!=0}" escape="false">
							<a href="/{!evs.Evaluation_Responses__r[0].Owner.Id}">{!evs.Evaluation_Responses__r[0].Owner.Name}</a>
						</apex:outputText>
					</apex:column>
					<apex:column headerValue="Signed At">
						<apex:outputText rendered="{!evs.Evaluation_Responses__r.size!=0}">
							<apex:outputField value="{!evs.Evaluation_Responses__r[0].CreatedDate}" />
						</apex:outputText>
					</apex:column>
					<apex:column >
						<apex:facet name="header" >
							<apex:commandLink Value="Owner Name" action="{!toggleSort}" reRender="evaluationsT,errors" >
								<apex:param name="sortField" value="Owner.Name" assignTo="{!sortField}" />
							</apex:commandLink>
						</apex:facet>
						<apex:outputText value="{!evs.Owner.Name}" />
					</apex:column>
					<apex:column >
						<apex:facet name="header" >
							<apex:commandLink Value="Last Modified" action="{!toggleSort}" reRender="evaluationsT,errors" >
								<apex:param name="sortField" value="LastModifiedDate" assignTo="{!sortField}" />
							</apex:commandLink>
						</apex:facet>
						<apex:outputText value=" {!evs.LastModifiedDate}" />
					</apex:column>
				</apex:pageBlockTable>
			</apex:pageBlockSection>
		</apex:pageBlock>
	</apex:form>
</apex:page>