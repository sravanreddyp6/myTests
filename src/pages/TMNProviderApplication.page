<apex:page standardController="TMN_Provider_Application__c" extensions="TmnProviderApplication" sidebar="false" action="{!redirectNew}">
	<apex:includeScript value="{!URLFOR($Resource.jquery, 'js/jquery-1.7.2.min.js')}" />
	<apex:includeScript value="{!URLFOR($Resource.jquery, 'js/jquery-ui-1.8.21.custom.min.js')}" />
	<apex:includeScript value="{!URLFOR($Resource.CommonJS)}" />
	<apex:includeScript value="{!URLFOR($Resource.EvaluationJS)}" />

	<apex:stylesheet value="{!URLFOR($Resource.mentoresd,'/mentoresdcss2.css')}" />
	<apex:stylesheet value="{!URLFOR($Resource.mentoresd,'/mentoresd.css')}" />
	<apex:stylesheet value="{!URLFOR($Resource.jquery, 'css/custom-theme/jquery-ui-1.8.21.custom.css')}" />

	<apex:pageMessages id="pageMessages" />

	<apex:form id="wholeForm">
		<apex:actionFunction name="save" action="{!save}" />
		<apex:actionFunction name="approve" action="{!approve}" />
		<apex:actionFunction name="disqualify" action="{!disqualify}" />

		<apex:pageBlock title="{!title}">
			<apex:pageBlockButtons location="top">
				<div style="float: right" id="pageBlockButtons">
					<apex:outputPanel layout="none" rendered="{!isEditMode}">
						<a class="btn" onclick="save(); return false;">Save</a>
						<a class="btn" href="{!IF(TMN_Provider_Application__c.Id != null, '/apex/TMNProviderApplication?id=' + TMN_Provider_Application__c.Id, '/apex/Home')}">Cancel</a>
					</apex:outputPanel>
					<apex:outputPanel layout="none" rendered="{!isViewMode && !isLocked}">
						<a class="btn" href="/apex/TmnProviderApplication?id={!TMN_Provider_Application__c.Id}&mode=edit">Edit</a>
						<a class="btn" onclick="approve(); return false;">Approve</a>
						<a class="btn" onclick="openModalDialog('{!$Component.disqualificationDialog}', 'Disqualify Application', '{!$Component.wholeForm}'); return false;">Disqualify</a>
					</apex:outputPanel>
				</div>
			</apex:pageBlockButtons>

			<apex:pageBlockSection title="Applicant Summary" columns="2" id="summary_Alt1_Header">
				<apex:outputField value="{!TMN_Provider_Application__c.Provider__c}" label="Applicant Record" />
				<apex:pageBlockSectionItem />

				<apex:outputField value="{!TMN_Provider_Application__c.Provider__r.First_Name__c}" />
				<apex:pageBlockSectionItem />

				<apex:outputField value="{!TMN_Provider_Application__c.Provider__r.Middle_Name__c}" />
				<apex:outputField value="{!TMN_Provider_Application__c.Provider__r.SPD_Number__c}" />

				<apex:outputField value="{!TMN_Provider_Application__c.Provider__r.Last_Name__c}" />
				<apex:outputField value="{!TMN_Provider_Application__c.Provider__r.eXPRS_Number__c}" />

				<apex:outputField value="{!TMN_Provider_Application__c.Provider__r.Gender__c}" />
			</apex:pageBlockSection>

			<apex:pageBlockSection title="Contact Information" columns="1" id="contact_edit_Alt1_Header" rendered="{!isEditMode}">
				<apex:inputField value="{!TMN_Provider_Application__c.Address_Street_1__c}" />

				<apex:inputField value="{!TMN_Provider_Application__c.Address_Street_2__c}" />

				<apex:inputField value="{!TMN_Provider_Application__c.City__c}" />

				<apex:inputField value="{!TMN_Provider_Application__c.State__c}" />

				<apex:inputField value="{!TMN_Provider_Application__c.Zip__c}" />

				<apex:inputField value="{!Tmn_Provider_Application__c.Phone_1__c}" />

				<apex:inputField value="{!Tmn_Provider_Application__c.Phone_2__c}" />

				<apex:inputField value="{!Tmn_Provider_Application__c.Fax__c}" />

				<apex:inputField value="{!TMN_Provider_Application__c.Primary_Email__c}" />
			</apex:pageBlockSection>

			<apex:pageBlockSection title="Contact Information" columns="1" id="contact_view_Alt1_Header" rendered="{!isViewMode}">
				<apex:outputField value="{!TMN_Provider_Application__c.Address_Street_1__c}" />

				<apex:outputField value="{!TMN_Provider_Application__c.Address_Street_2__c}" />

				<apex:outputField value="{!TMN_Provider_Application__c.City__c}" />

				<apex:outputField value="{!TMN_Provider_Application__c.State__c}" />

				<apex:outputField value="{!TMN_Provider_Application__c.Zip__c}" />

				<apex:outputField value="{!Tmn_Provider_Application__c.Phone_1__c}" />

				<apex:outputField value="{!Tmn_Provider_Application__c.Phone_2__c}" />

				<apex:outputField value="{!Tmn_Provider_Application__c.Fax__c}" />

				<apex:outputField value="{!TMN_Provider_Application__c.Primary_Email__c}" />
			</apex:pageBlockSection>

			<apex:pageBlockSection title="Application" columns="1" id="application_edit_Alt1_Header" rendered="{!isEditMode}">
				<apex:outputField value="{!TMN_Provider_Application__c.Enrollment_Type__c}" />

				<apex:inputField value="{!TMN_Provider_Application__c.Application_Date__c}" />

				<apex:outputField value="{!TMN_Provider_Application__c.Status__c}" />

				<apex:inputField value="{!TMN_Provider_Application__c.Effective_Date__c}" />

				<apex:inputField value="{!TMN_Provider_Application__c.Expiration_Date__c}" />
			</apex:pageBlockSection>

			<apex:pageBlockSection title="Application" columns="2" id="application_view_Alt1_Header" rendered="{!isViewMode}">
				<apex:outputField value="{!TMN_Provider_Application__c.Enrollment_Type__c}" />
				<apex:pageBlockSectionItem />

				<apex:outputField value="{!TMN_Provider_Application__c.Application_Date__c}" />
				<apex:pageBlockSectionItem />

				<apex:outputField value="{!TMN_Provider_Application__c.Status__c}" />
				<apex:outputField value="{!TMN_Provider_Application__c.Reason_for_Disqualification__c}" rendered="{!TMN_Provider_Application__c.Status__c = 'Disqualified'}" />
				<apex:pageBlockSectionItem rendered="{!TMN_Provider_Application__c.Status__c != 'Disqualified'}" />

				<apex:outputField value="{!TMN_Provider_Application__c.Effective_Date__c}" />
				<apex:pageBlockSectionItem />

				<apex:outputField value="{!TMN_Provider_Application__c.Expiration_Date__c}" />
			</apex:pageBlockSection>
		</apex:pageBlock>

		<apex:outputPanel id="disqualificationDialog" style="display:none;">
			<apex:pageBlock >
				<apex:pageBlockButtons location="bottom">
					<apex:commandButton value="Submit" onclick="disqualify(); return false;" />
					<apex:commandButton value="Cancel" onclick="closeModalDialog('{!$Component.disqualificationDialog}'); return false;" />
				</apex:pageBlockButtons>

				<apex:pageBlockSection columns="1">
					<apex:inputField value="{!Tmn_Provider_Application__c.Reason_for_Disqualification__c}" />
				</apex:pageBlockSection>
			</apex:pageBlock>
		</apex:outputPanel>
	</apex:form>
	<c:SObjectNotesAndAttachments parentid="{!TMN_Provider_Application__c.id}" rendered="{!TMN_Provider_Application__c.Id != null}" />

	<script>
	function setFocusOnLoad() {}
	jQuery.noConflict();
	jQuery(document).ready(function ($) {
		window.setUpFields = function () {
			$("body").on("change", "input, select", function(event) {
				applyRulesToField(event.target);
				applyShowHideRulesToField(event.target);
			});
			$("input, select").each(function(_, target) {
				applyRulesToField(target);
				applyShowHideRulesToField(target);
			});
		};
		setUpFields();
	});
	</script>
</apex:page>