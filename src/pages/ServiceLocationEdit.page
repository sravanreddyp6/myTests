<apex:page title="Service Location Edit: {!Service_Location__c.Program__c}" standardController="Service_Location__c" standardStylesheets="false" sidebar="false" tabStyle="Persons_Being_Served_New__tab">
	<apex:stylesheet value="{!URLFOR($Resource.mentoresd,'/mentoresd.css')}" />
	<apex:stylesheet value="{!URLFOR($Resource.mentoresd,'/mentoresdcss2.css')}" />
<apex:includeScript value="{!URLFOR($Resource.jquery, '/js/jquery-1.7.2.min.js')}" />
<script>
j$ = jQuery.noConflict();
function removeInactive(){
      // remove the Inactive option from the status dropdown
      j$('select[id $=locStatus] option[value="Inactive"]').remove();
}
j$(document).ready(function(){
	if ( {!service_location__c.source_system__c == 'AVATAR'})
    	removeInactive();
});
</script>
    <apex:form >
    <apex:pageMessages id="msgs"/>
		<apex:pageBlock title="Service Location Edit" id="detail" mode="edit">
            <div class="pbHeaderButton" id="buttons">
            	<apex:actionStatus id="mySaveStatus">
				<apex:facet name="stop">
					<apex:commandButton value="Save" id="btnSave" action="{!save}" status="mySaveStatus" rerender="msgs, detail" rendered="{! NOT(AND(service_location__c.status__c == 'Inactive', service_location__c.source_system__c == 'AVATAR'))}"/>
 				</apex:facet>
				<apex:facet name="start">
					<apex:commandButton value="Save" disabled="true"/>
				</apex:facet>
				</apex:actionStatus>
			    <apex:commandButton action="{!cancel}" value="Cancel" id="btncancel"/>
            </div>
            <apex:pageBlockSection columns="2">
                <apex:outputField value="{!Service_Location__c.Alias__c}" />
                <apex:outputField value="{!Service_location__c.Program__c}" />
                <apex:outputField value="{!Service_location__c.Alias_lookup__r.Alias_Operating_group__c}" label="Operating Group" />
                <apex:outputField value="{!Service_location__c.iServe_Program__c}"  />
            </apex:pageBlockSection>
            
            <apex:pageBlockSection Columns="2" title="" collapsible="false">
            	<apex:outputField label="Program Code" value="{!Service_Location__c.ProgramID__c}" rendered="{!Service_Location__c.Source_System__c == 'AVATAR'}" />
	            <apex:inputField value="{!Service_Location__c.ProgramID__c}" required="true" rendered="{!Service_Location__c.Source_System__c == 'iServe'}" />
	                      		
	           <apex:inputField value="{!Service_Location__c.Physical_Location__c}" required="true" rendered="{!Service_Location__c.Source_System__c == 'iServe'}"/>
	                       
    			
            
                <apex:outputField label="Facility" value="{!Service_Location__c.FacilityID__c}" rendered="{!Service_Location__c.Source_System__c == 'AVATAR'}" />
                <apex:inputField value="{!Service_Location__c.FacilityID__c}" required="true" rendered="{!Service_Location__c.Source_System__c == 'iServe'}"/>
                
                <apex:inputField value="{!Service_Location__c.TMN_Scope__c}" required="true" />
                <apex:inputField value="{!Service_Location__c.Network_Offering__c}" required="true" />
                <apex:inputField value="{!Service_Location__c.Service_Type__c}" required="true" />
                <apex:inputField value="{!Service_Location__c.Population_Served__c}" required="true" />
                <apex:inputField value="{!Service_Location__c.Location_Nickname__c}"  />
                <apex:inputField value="{!Service_Location__c.Residential_Property_Status__c}" required="true" />
                <apex:inputField value="{!Service_Location__c.Capacity__c}" required="true" />
            </apex:pageBlockSection>
          	
            <apex:pageBlockSection columns="1" title="" >
            	 <apex:inputField value="{!Service_Location__c.Street__c}" required="true" />
            	 <apex:inputField value="{!Service_Location__c.City__c}" required="true" />
            	 <apex:inputText value="{!Service_Location__c.State__c}" required="true" html-readonly="true" />
            	 <apex:inputField value="{!Service_Location__c.Zip__c}" required="true" />
            	 <apex:inputField value="{!Service_Location__c.Phone__c}" />
            	 
<!--                 <apex:inputField id="locStatus" value="{!Service_Location__c.Status__c}" rendered="{! NOT(AND(service_location__c.status__c == 'Inactive', service_location__c.source_system__c == 'AVATAR'))}"/> -->
<!--                 <apex:outputText label="Status" value="This location has been inactivated in {!Service_Location__c.Source_System__c} and cannot be edited." rendered="{! AND(service_location__c.status__c == 'Inactive', service_location__c.source_system__c == 'AVATAR')}"/> -->
            	
            </apex:pageBlockSection>
            
           
            <apex:pageBlockSection columns="2"  title="" rendered="{!Service_Location__c.Alias_lookup__r.Alias_Operating_group__c == 'NeuroRestorative'}">
            	<apex:inputField value="{!Service_Location__c.Room_and_Board_Rate__c}" label="Room and Board Cost" />
            	<apex:inputField value="{!Service_Location__c.PRN_DS_Per_Hour__c}" />
            	<apex:inputField value="{!Service_Location__c.Per_Productive_Unit__c}" />  
            </apex:pageBlockSection>
            
            <apex:pageBlockSection columns="2" title="">
            	<apex:inputField value="{!Service_Location__c.TIN__c}" />
            	<apex:inputField value="{!Service_Location__c.Status__c}" required="true" />
            	<apex:inputField value="{!Service_Location__c.NPI__c}" />
    			<apex:outputField value="{!Service_location__c.Source_System__c}" />
            </apex:pageBlockSection>
            
        </apex:pageBlock>
        <c:SObjectHistories object="{!Service_Location__c}" title="Field History for Service Location" />
    </apex:form>
</apex:page>