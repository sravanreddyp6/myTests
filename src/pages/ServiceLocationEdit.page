<apex:page title="Service Location Edit: {!Service_Location__c.Program__c}" standardController="Service_Location__c" standardStylesheets="false" sidebar="false" tabStyle="Persons_Being_Served_New__tab">
<apex:stylesheet value="{!URLFOR($Resource.mentoresd,'/mentoresd.css')}" />
<apex:includeScript value="{!URLFOR($Resource.jquery, '/js/jquery-1.7.2.min.js')}" />
<script>
j$ = jQuery.noConflict();
function removeInactive(){
      // remove the Inactive option from the status dropdown
      j$('select[id $=locStatus] option[value="Inactive"]').remove();
}
j$(document).ready(function(){
	if ( {!service_location__c.source_system__c == 'AVATAR'})
    	removeInactive();
});
</script>
    <apex:form >
    <apex:pageMessages id="msgs"/>
        <apex:pageBlock title="Service Location Edit" id="detail" mode="edit">
            <div class="pbHeaderButton" id="buttons">
            	<apex:actionStatus id="mySaveStatus">
				<apex:facet name="stop">
					<apex:commandButton value="Save" id="btnSave" action="{!save}" status="mySaveStatus" rerender="msgs, detail" rendered="{! NOT(AND(service_location__c.status__c == 'Inactive', service_location__c.source_system__c == 'AVATAR'))}"/>
 				</apex:facet>
				<apex:facet name="start">
					<apex:commandButton value="Save" disabled="true"/>
				</apex:facet>
				</apex:actionStatus>
			    <apex:commandButton action="{!cancel}" value="Cancel" id="btncancel"/>
            </div>
            <apex:pageBlockSection columns="2">
                <apex:outputField value="{!Service_Location__c.Alias__c}" />
                <apex:outputField label="Facility" value="{!Service_Location__c.FacilityID__c}" />
                <apex:outputField label="Program Code" value="{!Service_Location__c.ProgramID__c}" />
                <apex:outputField value="{!Service_Location__c.Service_Value__c}" />
                <apex:outputField value="{!Service_Location__c.Program__c}" />
                <apex:outputField value="{!Service_Location__c.Setting__c}" />
                <apex:outputField value="{!Service_Location__c.Program_Rollup__c}" />
                <apex:pageBlockSectionItem >
                <apex:outputLabel value="Address" />
                <apex:outputPanel >
                <c:AddressDisplay Street1="{!Service_Location__c.Street__c}" city="{!Service_Location__c.City__c}"
  					state="{!Service_Location__c.State__c}" zip="{!Service_Location__c.Zip__c}" /><br />
  				<apex:outputText value="{!Service_Location__c.Phone__c}" />	
  				</apex:outputPanel>
  				</apex:pageBlockSectionItem>
  				<apex:outputField value="{!Service_Location__c.TIN__c}" />
                <apex:outputField value="{!Service_Location__c.NPI__c}" />
                <apex:inputField id="locStatus" value="{!Service_Location__c.Status__c}" rendered="{! NOT(AND(service_location__c.status__c == 'Inactive', service_location__c.source_system__c == 'AVATAR'))}"/>
                <apex:outputText label="Status" value="This location has been inactivated in {!Service_Location__c.Source_System__c} and cannot be edited." rendered="{! AND(service_location__c.status__c == 'Inactive', service_location__c.source_system__c == 'AVATAR')}"/>
            </apex:pageBlockSection>
            <apex:pageBlockSection columns="1" rendered="{!Service_Location__c.FacilityID__c == 20}" >
            	<apex:inputField value="{!Service_Location__c.Room_and_Board_Rate__c}" label="Room and Board Cost" />
            	<apex:inputField value="{!Service_Location__c.PRN_DS_Per_Hour__c}" />
            	<apex:inputField value="{!Service_Location__c.Per_Productive_Unit__c}" />             
            </apex:pageBlockSection>
        <c:SObjectHistories object="{!Service_Location__c}" title="Field History for Service Location" rendered="{!Service_Location__c.FacilityID__c == 20}" />
        </apex:pageBlock>
    </apex:form>
</apex:page>