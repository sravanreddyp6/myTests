<apex:page standardController="Evaluation__c" extensions="CMShiftAssessmentView">

	<apex:includeScript value="{!URLFOR($Resource.jquery, 'js/jquery-1.7.2.min.js')}" />
	<apex:includeScript value="{!URLFOR($Resource.EvaluationJS)}" />
	<apex:includeScript value="{!URLFOR($Resource.jquery, 'js/jquery-ui-1.8.21.custom.min.js')}" />
	<apex:includeScript value="{!$Resource.AnnotoriousDev}" />
	<apex:includeScript value="{!$Resource.AnotoJS}" />
	<apex:stylesheet value="{!URLFOR($Resource.EvaluationCSS)}" />
	
	<c:PersonalRecord pbsId="{!Evaluation__c.ServiceAssignment__r.admission__r.Person_Being_Served__c}" servAssignId="{!Evaluation__c.ServiceAssignment__c}" evaluationId="{!Evaluation__c.Id}" admId="{!Evaluation__c.ServiceAssignment__r.Admission__c}" parentPage="ShiftAssessment"/>
	<br />
	<script>
		function openWin(url) {
			window.open(url);
		}

		j$ = jQuery.noConflict();

        finalize = function() {
           var allow = true;
           var errorTab ='demographicsTab';
           	
           	if({!!Evaluation__c.Diagnostics_Section_Completed__c}){
           		allow = false;
           		errorTab = 'diagnosticTab';
           	}
           	else if({!!Evaluation__c.Cardio_Section_Completed__c}){
           		allow = false;
           		errorTab = 'cardioTab';
           	}
           	else if({!!Evaluation__c.Nutrition_Section_Completed__c}){
           		allow = false;
           		errorTab = 'nutritionTab';
           	}
           	else if({!!Evaluation__c.Skin_Section_Completed__c}){
           		allow = false;
           		errorTab = 'skinBodyTab';
           	}
           	else if({!!Evaluation__c.Neuro_Section_Completed__c}){
           		allow = false;
           		errorTab = 'neuroTab';
           	}
           	else if({!!Evaluation__c.Ortho_Section_Completed__c}){
           		allow = false;
           		errorTab = 'orthoTab';
           	}
           	else if({!!Evaluation__c.Psycho_Social_Section_Completed__c}){
           		allow = false;
           		errorTab = 'psychoSocialTab';
           	}
           
            if(allow == false){
               var x = confirm('This assessment cannot be finalized as there are errors in finalizing. On Clicking OK You will be redirected to edit mode that display the errors. Please correct them and then finalize');
               
               if(x==true) {
                   window.open('/apex/CMShiftAssessmentEdit?id={!Evaluation__c.Id}&showErrors=1&tab='+errorTab,'_self');
               }else{
                   return null;
               }
                
            } 
            if(allow == true){
            
                var c = confirm('Are you sure about finalizing?');
                if(c==true) {
                    finalizeEval();
                }else {
                    return null;
               }
          
           }
       
        }
        
        disregard = function() {
        
        	var d = confirm('Do you want to proceed disregarding this Assessment?');
        	
        	if(d==true) {
                disregardEval();
            }else {
                return null;
            }
        
        }

	</script>

	<style>
		[id$=skinBodyFooter] {
			clear: both;
		}
		[id$=bodyMapOtherComments] {
			clear: both;
		}
		.thinking {
			opacity: 0.8;
			background-color: #ccc;
			position: fixed;
			width: 100%;
			height: 100%;
			top: 0px;
			left: 0px;
			z-index: 1000;
		}
		.thinkingwheel {
			position: absolute;
			left: 40%;
			top: 48%;
			background-color: white;
			border: 2px solid gray;
			padding: 2px;
		}
		hr {
			color: #ECECEC;
			background-color: #ECECEC;
			margin-bottom: 20px;
			margin-top: 20px;
			border: none;
			height: 5px;
		}
		.evaluationTabHeader .sectionCompleted {
			background-image: url("{!URLFOR($Resource.EvaluationResources, 'greencheck.png')}");
			background-repeat: no-repeat;
			padding-top: 22px;
		}
		.evaluationTabHeader .sectionNotCompleted {
			background-image: url("{!URLFOR($Resource.EvaluationResources, 'orangecheck.png')}");
			background-repeat: no-repeat;
			padding-top: 22px;
		}
		.tableStyle {
			border-collapse: collapse;
			border-spacing: 0px 0px;
		}
		.colStyle1 {
			width: 10%;
			text-align: right;
			padding-top: 3px;
			padding-bottom: 8px
		}
		.colStyle2 {
			width: 8%;
			padding-left: 20px;
			padding-top: 5px;
			padding-bottom: 8px
		}
		.rowstyle {
			border-bottom-style: solid;
			border-bottom-width: 1px;
			border-bottom-color: #E8E8E8
		}

	</style>
	<!-- div id="breadcrumb" class="breadcrumb">
		<a href="/">Home</a>&nbsp;>&nbsp;
		<a href="/apex/PersonsBeingServedListView">Persons Being Served</a>&nbsp;>&nbsp;
		<a href="/{!Evaluation__c.ServiceAssignment__r.Person_Being_Served__c}">{!Evaluation__c.ServiceAssignment__r.Person_Being_Served__r.Name}</a>&nbsp;>&nbsp;
		<a href="/{!Evaluation__c.ServiceAssignment__r.Admission__c}">Admission</a>&nbsp;>&nbsp;
		<a href="/{!Evaluation__c.ServiceAssignment__c}">Service
			Assignment</a>&nbsp;>&nbsp;
		<apex:outputText value="{!Evaluation__c.Name}" />
	</div-->

	<apex:form id="wholePage">

		<apex:outputpanel rendered="false">
			<apex:inputhidden value="{!Evaluation__c.ServiceAssignment__r.Admission__r.Person_Being_Served__c}" />
			<apex:inputhidden value="{!Evaluation__c.Resident_Demonstrating_Issues__c}" />
			<apex:inputhidden value="{!Evaluation__c.Orientation__c}" />
			<apex:inputhidden value="{!Evaluation__c.Mood__c}" />
			<apex:inputhidden value="{!Evaluation__c.Breathe_Sounds__c}" />
			<apex:inputhidden value="{! Evaluation__c.Autonomic_Dysreflexia_Areas_Assessed__c}" />
		</apex:outputpanel>
		<apex:pageMessages id="pageMessages" />
		<apex:actionfunction name="finalizeEval" action="{!finalizeEval}" status="pageProcessing" reRender="pageMessages" />
		<apex:actionFunction name="disregardEval" action="{!disregardEval}" status="pageProcessing" reRender="pageMessages,btnDisregard" />
		<apex:tabPanel id="wholeTabPanel" value="{!selectedTab}" styleClass="evaluationTabPanel" activeTabClass="evaluationActiveTab" inactiveTabClass="evaluationInactiveTab" headerClass="evaluationTabHeader" contentClass="evaluationTabContent">
			<apex:tab label="Demographics" name="demographicsTab" styleClass="{!IF(Evaluation__c.Details_Section_Completed__c, 'sectionCompleted', 'sectionNotCompleted')}">
				<apex:pageBlock >
					<apex:pageBlockSection columns="2" >
						<apex:pageBlockSectionItem >
							<apex:outputLabel Value="Shift Start Time" styleClass="labelCol" />
							<c:MilitaryDatetime dateTimeVal="{!Evaluation__c.Shift_Start_Time__c}" />
						</apex:pageBlockSectionItem>
						<apex:pageBlockSectionItem >
							<apex:outputLabel Value="Shift End Time" styleClass="labelCol" />
							<c:MilitaryDatetime dateTimeVal="{!Evaluation__c.Shift_End_Time__c}" />
						</apex:pageBlockSectionItem>
						<apex:outputField value="{!Evaluation__c.Status__c}" />
					</apex:pageBlockSection>
				</apex:pageBlock>
				<apex:pageBlock >
					<apex:pageBlockSection Columns="2" Collapsible="false">
						<apex:outputField Value="{!Evaluation__c.ServiceAssignment__r.Service_Location__r.Alias__c}" />
						<apex:pageBlockSectionItem >
							<apex:outputLabel Value="Address" />
							<c:AddressDisplay Street1="{!Evaluation__c.ServiceAssignment__r.Service_Location__r.Street__c}" City="{!Evaluation__c.ServiceAssignment__r.Service_Location__r.City__c}" State="{!Evaluation__c.ServiceAssignment__r.Service_Location__r.State__c}" Zip="{!Evaluation__c.ServiceAssignment__r.Service_Location__r.Zip__c}" />
						</apex:pageBlockSectionItem>
						<apex:outPutField value="{!Evaluation__c.ServiceAssignment__r.Admission__r.Person_Being_Served__r.Name}" />
						<apex:OutputField value="{!Evaluation__c.ServiceAssignment__r.Admission__r.Person_Being_Served__r.BirthDate}" />
						<apex:outputField value="{!Evaluation__c.ServiceAssignment__r.Admission__r.Person_Being_Served__r.Age__c}" />
						<apex:outputField value="{!Evaluation__c.ServiceAssignment__r.Medical_Record_Number__c}" />
						<apex:outputText value="{!primaryPhysician}" label="Primary Physician" />
						<apex:pageBlockSectionItem HelpText="To edit this information, return to the Person Being Served record.">
							{!$ObjectType.Contact.fields.Advanced_Directives__c.label}
							<apex:outputField value="{!Evaluation__c.ServiceAssignment__r.Admission__r.Person_Being_Served__r.Advanced_Directives__c}" />
						</apex:pageBlockSectionItem>
						<apex:outputField value="{!Evaluation__c.ServiceAssignment__r.Admission__r.Person_Being_Served__r.Code_Status__c}" />
						<apex:outputField value="{!Evaluation__c.ServiceAssignment__r.Admission__r.Person_being_served__r.Advanced_Directives_Attached__c}" />
						<apex:outputField value="{!Evaluation__c.ServiceAssignment__r.admission__r.Person_Being_Served__r.Code_Status_Other__c}" id="codeStatusOther" label="Specify Other" />
					</apex:pageBlockSection>
					<c:EvaluationResponseTable pbsParentId="{!Evaluation__c.ServiceAssignment__r.Person_Being_Served__c}" addEnabled="true" editEnabled="true" type="Allergy" formId="{!$Component.wholePage}" uniqueId="allergy" />
				</apex:pageBlock>
			</apex:tab>

			<apex:tab label="Diagnostics" name="diagnosticTab" styleClass="{!IF(Evaluation__c.Diagnostics_Section_Completed__c, 'sectionCompleted', 'sectionNotCompleted')}">
				<apex:pageBlock >
					<apex:pageBlockSection columns="2" >
						<apex:pageBlockSectionItem >
							<apex:outputLabel Value="Shift Start Time" styleClass="labelCol" />
							<c:MilitaryDatetime dateTimeVal="{!Evaluation__c.Shift_Start_Time__c}" />
						</apex:pageBlockSectionItem>
						<apex:pageBlockSectionItem >
							<apex:outputLabel Value="Shift End Time" styleClass="labelCol" />
							<c:MilitaryDatetime dateTimeVal="{!Evaluation__c.Shift_End_Time__c}" />
						</apex:pageBlockSectionItem>
						<apex:outputField value="{!Evaluation__c.Status__c}" />
					</apex:pageBlockSection>
				</apex:pageBlock>
				<apex:pageBlock >
					<apex:pageBlockSection title="Vitals Detail" Columns="1">
						<apex:actionFunction name="showAddVitalsDetail" action="{!showAddVitalsDetail}" status="loadingVitalsDetailStatus" rerender="vitalsDetailDialogMainBlock" oncomplete="openModalDialog('{!$Component.vitalsDetailDialog}', 'Add Vitals Detail', '{!$Component.wholePage}');" />
						<apex:actionFunction name="showEditVitalsDetail" action="{!showEditVitalsDetail}" status="loadingVitalsDetaiStatus" rerender="vitalsDetailDialogMainBlock" oncomplete="openModalDialog('{!$Component.vitalsDetailDialog}', 'Edit Vitals Detail', '{!$Component.wholePage}');">
							<apex:param name="currentVitalsDetailId" assignTo="{!currentVitalsDetailId}" value="" />
						</apex:actionFunction>
						<apex:outputPanel layout="none">
							<apex:commandButton value="Add Vitals Details" onclick="showAddVitalsDetail(); return false;" />
							<apex:actionStatus id="loadingVitalsDetailStatus">
								<apex:facet name="start">
									<apex:image height="16px" value="/img/loading32.gif" styleClass="dialogLoadingSpinner" />
								</apex:facet>
								<apex:facet name="stop" />
							</apex:actionStatus>
						</apex:outputPanel>
						<apex:pageBlockTable value="{!vitals}" var="vital" id="vitalsTable">
							<apex:column headerValue="{!IF(vitals.size>0, 'Action', '')}" width="50px">
								<apex:commandLink onclick="showEditVitalsDetail('{!vital.Id}'); return false;" value="Edit" />
							</apex:column>
							<apex:column value="{!vital.Date__c}" />
							<apex:column value="{!vital.Heart_Rate__c}" />
							<apex:column value="{!vital.Blood_Pressure__c}" />
							<apex:column value="{!vital.O2_Saturation__c}" />
							<apex:column value="{!vital.Temperature__c}" />
						</apex:pageBlockTable>
						<apex:pageBlockSectionItem />
						<apex:pageBlockSectionItem >
							<apex:outputLabel for="isolationRequired" value="Requires Isolation" />
							<apex:outputText id="isolationRequired" value="{!Evaluation__c.Requires_Isolation_Picklist__c & if( Evaluation__c.Requires_Isolation_Picklist__c == 'Yes', ' - Type: ' & Evaluation__c.DiagnosisIsolation_Type__c, '' )}" />
						</apex:pageBlockSectionItem>
					</apex:pageBlockSection>
					<apex:pageBlockSection columns="1" title="IV">
						<apex:outputField value="{!Evaluation__c.IV_Picklist__c}" />
						<apex:pageBlockSectionItem rendered="{!Evaluation__c.IV_Picklist__c == 'Yes'}">
							<apex:outputLabel value="IV Type" />
							<apex:outputPanel >
								<apex:outputText styleClass="labelCol" value="Peripheral" />
								<apex:outputField value="{!Evaluation__c.PCA__c}" />
								<apex:outputText styleClass="labelCol" value="PICC" style="margin-left:20px;" />
								<apex:outputField value="{!Evaluation__c.PICC__c}" />
								<apex:outputText styleClass="labelCol" value="Central" style="margin-left:20px;" />
								<apex:outputField value="{!Evaluation__c.Central__c}" />
								<apex:outputText styleClass="labelCol" value="HepLock" style="margin-left:20px;" />
								<apex:outputField value="{!Evaluation__c.HepLock__c}" />
							</apex:outputPanel>
						</apex:pageBlockSectionItem>
						<apex:outputField Value="{!Evaluation__c.IV_Site_Issues__c}" rendered="{!Evaluation__c.IV_Picklist__c == 'Yes'}" />
						<apex:outputText value="{!Evaluation__c.IV_Narrative_Note__c}" rendered="{!Evaluation__c.IV_Site_Issues__c == 'Yes' && Evaluation__c.IV_Picklist__c == 'Yes'}" />
					</apex:pageBlockSection>
				</apex:pageBlock>
			</apex:tab>
			<apex:tab label="Cardiopulmonary" name="cardioTab" styleClass="{!IF(Evaluation__c.Cardio_Section_Completed__c, 'sectionCompleted', 'sectionNotCompleted')}">
				<apex:pageBlock >
					<apex:pageBlockSection columns="2" >
						<apex:pageBlockSectionItem >
							<apex:outputLabel Value="Shift Start Time" styleClass="labelCol" />
							<c:MilitaryDatetime dateTimeVal="{!Evaluation__c.Shift_Start_Time__c}" />
						</apex:pageBlockSectionItem>
						<apex:pageBlockSectionItem >
							<apex:outputLabel Value="Shift End Time" styleClass="labelCol" />
							<c:MilitaryDatetime dateTimeVal="{!Evaluation__c.Shift_End_Time__c}" />
						</apex:pageBlockSectionItem>
						<apex:outputField value="{!Evaluation__c.Status__c}" />
					</apex:pageBlockSection>
				</apex:pageBlock>
				<apex:pageBlock >
					<apex:pageBlockSection Columns="2" title="cardio">
						<apex:pageBlockSectionItem >
							<apex:outputPanel >
								<apex:outputLabel for="heartRate" value="Heart Rate" />
								<br />
								<br />
								<apex:outputLabel for="interventionPicklist" value="Intervention Needed" id="interventionLabel" rendered="{!Evaluation__c.Heart_Sounds__c == 'Irregular'}" />
								<br />
								<br />
								<apex:outputLabel for="interventionDescribe" value="Narrative Note" id="narrativeLabel" rendered="{!Evaluation__c.Heart_Intervention_Need_Picklist__c == 'Yes'}" />
							</apex:outputPanel>
							<apex:outputPanel >
								<apex:outputField value="{!Evaluation__c.Heart_Sounds__c}" id="heartRate" />
								<br />
								<br />
								<apex:outputField Value="{!Evaluation__c.Heart_Intervention_Need_Picklist__c}" id="interventionPicklist" rendered="{!Evaluation__c.Heart_Sounds__c == 'Irregular'}" />
								<br />
								<br />
								<apex:outputField value="{!Evaluation__c.Heart_Rate_Intervention_Describe__c}" id="interventionDescribe" rendered="{!Evaluation__c.Heart_Intervention_Need_Picklist__c == 'Yes'}" />
							</apex:outputPanel>
						</apex:pageBlockSectionItem>
						<apex:pageBlockSectionItem >
							<apex:outputLabel for="periph" value="Peripheral Pulses" />
							<apex:outputText id="periph" value="{!Evaluation__c.Peripheral_Pulses_Present__c & if(Evaluation__c.Peripheral_Pulses_Present__c == 'No', ' - ' & Evaluation__c.Peripheral_Pulses_Describe__c, '')}" />
						</apex:pageBlockSectionItem>
						<apex:outputField Value="{!Evaluation__c.Autonomic_Dysreflexia__c}" label="Autonomic Dysreflexia Episode"/>
						<apex:pageBlockSectionItem />
						<apex:pageBlockSectionItem rendered="{!Evaluation__c.Autonomic_Dysreflexia__c == 'Yes'}">
							<apex:outputLabel for="areasAssessed" value="Were the Following areas assessed?" />
							<apex:outputText id="areasAssessed" value="{!Evaluation__c.Autonomic_Dysreflexia_Areas_Assessed__c }" />
						</apex:pageBlockSectionItem>
						<apex:PageBlockSectionItem />
						<apex:pageBlockSectionItem rendered="{!Evaluation__c.Autonomic_Dysreflexia__c == 'Yes'}">
							<apex:outputLabel for="dysnarNote" value="Was the issue Resolved?" />
							<apex:outputText id="dysnarNote" value="{!Evaluation__c.Dysreflexia_issue_resolved__c & if(Evaluation__c.Dysreflexia_issue_resolved__c == 'No', ' - ' & Evaluation__c.Dysreflexia_Issue_Describe__c, '')}" />
						</apex:pageBlockSectionItem>
					</apex:pageBlockSection>

					<apex:pageBlockSection columns="1" title="Sputum">
						<apex:outputField value="{!Evaluation__c.Suctioning_Picklist__c}" label="Suctioning" />
						<apex:pageBlockSection columns="2" rendered="{!Evaluation__c.Suctioning_Picklist__c == 'Yes'}">
							<apex:outputField value="{!Evaluation__c.Sputum_Quantity__c}" />
							<apex:outputField value="{!Evaluation__c.Sputum_Color__c}" />
							<apex:outputField value="{!Evaluation__c.Blood_Tinged__c}" />
							<apex:outputField value="{!Evaluation__c.Odor__c}" />
							<apex:pageBlockSectionItem >
								<apex:outputLabel for="sputum" value="Sputum Consistency" />
								<apex:outputText id="sputum" value="{! if( Evaluation__c.Thick__c, 'Thick;', '') &
										 if (Evaluation__c.Thin__c, 'Thin;', '') &
										 if (Evaluation__c.Frothy__c, 'Frothy;', '') &
										 if (Evaluation__c.Sticky__c, 'Sticky;', '') &
										 if (Evaluation__c.Creamy__c, 'Creamy;', '')}" />
							</apex:pageBlockSectionItem>
							<apex:pageBlockSectionItem >
								<apex:outputLabel for="breathsounds" value="Breath Sounds" />
								<apex:outputText id="breathsounds" value="{!Evaluation__c.Breathe_Sounds__c & if( CONTAINS(Evaluation__c.Breathe_Sounds__c,  'Other'), ' (' & Evaluation__c.Breathe_Sound_Other__c & ')', '')}" />
							</apex:pageBlockSectionItem>
						</apex:pageBlockSection>
					</apex:pageBlockSection>

					<apex:pageBlockSection columns="1" title="Trach">
						<apex:outputField value="{!Evaluation__c.Trach_Picklist__c}" label="Trach" />
						<apex:pageBlockSection columns="2" rendered="{!Evaluation__c.Trach_Picklist__c =='Yes'}">
							<apex:pageBlockSectionItem >
								<apex:outputLabel for="trachtype" value="Trach Type" />
								<apex:outputText id="trachtype" value="{! if (Evaluation__c.Trach_Type__c == 'Other' , Evaluation__c.Trach_Type_Other__c, Evaluation__c.Trach_Type__c) }" />
							</apex:pageBlockSectionItem>
							<apex:pageBlockSectionItem >
								<apex:outputLabel for="trachsize" value="Trach Size" />
								<apex:outputText id="trachsize" value="{! if (Evaluation__c.Trach_Size__c =='Other', Evaluation__c.Trach_Size_Other__c, Evaluation__c.Trach_Size__c) }" />
							</apex:pageBlockSectionItem>

							<apex:outputField value="{!Evaluation__c.Cuffed_Picklist__c}" label="Cuffed" />
							<apex:outputField Value="{!Evaluation__c.PMV_Picklist__c}" label="PMV" />
							<apex:outputField value="{!Evaluation__c.Plugged_Picklist__c}" label="Plugged" />
							<apex:outputField value="{!Evaluation__c.PMV_Documentation_Needed__c}" label="Documentation Needed" />
							<apex:pageBlockSectionItem />
							<apex:outputText value="{!Evaluation__c.PMV_Documentation_Narrative_Note__c}" label="Add Narrative Note" />
						</apex:pageBlockSection>
					</apex:pageBlockSection>
					<apex:pageBlockSection columns="1" title="O2">
						<apex:outputField value="{!Evaluation__c.O2_Picklist__c}" id="o2" label="O2" />
						<apex:pageBlockSection Columns="2" rendered="{!Evaluation__c.O2_Picklist__c == 'Yes'}">
							<apex:outputField value="{!Evaluation__c.O2_Type__c}" />
							<apex:outputField value="{!Evaluation__c.O2_Intervention_Needed__c}" label="Intervention Needed" />
							<apex:outputField value="{!Evaluation__c.Liters_Min__c}" />
							<apex:outputField value="{!Evaluation__c.O2_Documentation_Required__c}" label="Documentation Required" />
							<apex:pageBlockSectionItem />
							<apex:outputField value="{!Evaluation__c.O2_Narrative_Note__c}" label="Narrative Note" />
						</apex:pageBlockSection>
					</apex:pageBlockSection>
					<apex:pageBlockSection columns="1" title="Ventilator">
						<apex:outputField value="{!Evaluation__c.Ventilator_Picklist__c}" id="ventilatorPicklist" label="Ventilator" />
						<apex:pageBlockSection Columns="2" id="ventilatorDetails">
							<apex:pageBlockSectionItem >
								<apex:outputLabel for="venttype" value="Ventilator Type" />
								<apex:outputText id="venttype" value="{!Evaluation__c.Ventilator_Type__c & if( Evaluation__c.Ventilator_Type__c == 'Intermittent', ' - schedule: ' & Evaluation__c.If_Intermittent_Schedule__c, '' )}" />
							</apex:pageBlockSectionItem>
							<apex:outputField value="{!Evaluation__c.Ventilator_Mode__c}" id="ventilatorMode" />
							<apex:pageblocksectionitem />
							<apex:outputField value="{!Evaluation__c.Ventilator_Rate__c}" id="ventilatorRate" />
							<apex:pageBlockSectionItem />
							<apex:outputField value="{!Evaluation__c.FIO2__c}" id="FIO2" />
							<apex:pageBlockSectionItem />
							<apex:outputField value="{!Evaluation__c.PEEP__c}" id="peep" />
							<apex:pageblocksectionitem />
							<apex:outputField value="{!Evaluation__c.TV__c}" id="tv" />
							<apex:pageblocksectionitem />
							<apex:outputField value="{!Evaluation__c.PS__c}" id="ps" />
						</apex:pageBlockSection>
					</apex:pageBlockSection>
				</apex:pageBlock>
			</apex:tab>
			<apex:tab label="GU/GI/Nutrition" name="nutritionTab" styleClass="{!IF(Evaluation__c.Nutrition_Section_Completed__c, 'sectionCompleted', 'sectionNotCompleted')}">
				<apex:pageBlock >
					<apex:pageBlockSection columns="2" >
						<apex:pageBlockSectionItem >
							<apex:outputLabel Value="Shift Start Time" styleClass="labelCol" />
							<c:MilitaryDatetime dateTimeVal="{!Evaluation__c.Shift_Start_Time__c}" />
						</apex:pageBlockSectionItem>
						<apex:pageBlockSectionItem >
							<apex:outputLabel Value="Shift End Time" styleClass="labelCol" />
							<c:MilitaryDatetime dateTimeVal="{!Evaluation__c.Shift_End_Time__c}" />
						</apex:pageBlockSectionItem>
						<apex:outputField value="{!Evaluation__c.Status__c}" />
					</apex:pageBlockSection>
				</apex:pageBlock>
				<apex:pageBlock id="nutritionMainBlock">
					<apex:pageBlockSection columns="1" title="Nutrition & Hydration" id="nutritionHydrationSection">
						<apex:outputField value="{!Evaluation__c.Nutrition_Route__c}" label="Feeding Type" />
						
						<c:EvaluationResponseTable parentId="{!Evaluation__c.Id}" type="Fluid Intake" formId="{!$Component.wholePage}" uniqueId="fluidIntake" />
						
						<apex:outputField value="{!Evaluation__c.Oral_Health_Check__c}" />
						<apex:outputField value="{!Evaluation__c.Issues_Noted__c}" rendered="{!Evaluation__c.Oral_Health_Check__c='Yes'}" />
						<apex:outputField value="{!Evaluation__c.Tongue__c}" rendered="{!Evaluation__c.Oral_Health_Check__c='Yes'}" />
						<apex:outputField value="{!Evaluation__c.Tongue_Sores_Describe__c}" label="If Sores, Describe" rendered="{!AND(!ISBLANK(Evaluation__c.Tongue__c), CONTAINS(Evaluation__c.Tongue__c, 'Sores'))}" />
						<apex:outputField value="{!Evaluation__c.Gums__c}" rendered="{!Evaluation__c.Oral_Health_Check__c='Yes'}" />
						<apex:outputField value="{!Evaluation__c.Gums_Sores_Describe__c}" label="If Sores, Describe" rendered="{!AND(!ISBLANK(Evaluation__c.Gums__c), CONTAINS(Evaluation__c.Gums__c, 'Sores'))}" />
						<apex:outputField value="{!Evaluation__c.Cheeks__c}" rendered="{!Evaluation__c.Oral_Health_Check__c='Yes'}" />
						<apex:outputField value="{!Evaluation__c.Cheeks_Sores_Describe__c}" label="If Sores, Describe" rendered="{!AND(!ISBLANK(Evaluation__c.Cheeks__c), CONTAINS(Evaluation__c.Cheeks__c, 'Sores'))}" />
						<apex:outputField value="{!Evaluation__c.Lips__c}" rendered="{!Evaluation__c.Oral_Health_Check__c='Yes'}" />
						<apex:outputField value="{!Evaluation__c.Lips_Sores_Describe__c}" label="If Sores, Describe" rendered="{!AND(!ISBLANK(Evaluation__c.Lips__c), CONTAINS(Evaluation__c.Lips__c, 'Sores'))}" />
						<apex:outputField value="{!Evaluation__c.Breath__c}" rendered="{!Evaluation__c.Oral_Health_Check__c='Yes'}" />
						<apex:outputField value="{!Evaluation__c.Saliva__c}" rendered="{!Evaluation__c.Oral_Health_Check__c='Yes'}" />
						<apex:outputField value="{!Evaluation__c.Narrative_Note__c}" label="Add Narrative Note" rendered="{!Evaluation__c.Oral_Health_Check__c='Yes'}" />
						<apex:pageBlockSectionItem >
							<apex:outputLabel value="PEDS" />
							<apex:outputText value="" />
						</apex:pageBlockSectionItem>
						<apex:outputField value="{!Evaluation__c.PEDS_Teething__c}" label="Teething"/>
						<apex:outputField value="{!Evaluation__c.PEDS_History_of_Tonsils__c}" label="History of Tonsilitis" />
						<apex:outputField value="{!Evaluation__c.PEDS_Tonsil_History_Describe__c}" label="If Yes, Describe Tonsilitis History" rendered="{!Evaluation__c.PEDS_History_of_Tonsils__c='Yes'}" />
						<apex:outputField value="{!Evaluation__c.PEDS_Pacifier__c}" label="Pacifier" />
						<apex:outputField value="{!Evaluation__c.PEDS_Pacifier_Type_Usage__c}" label="if Yes, Type & usage" rendered="{!Evaluation__c.PEDS_Pacifier__c='Yes'}" />
					</apex:pageBlockSection>
					<apex:pageBlockSection columns="2" title="Elimination - Bowel">
						<apex:outputText Label="Bowel Sounds" value="" />
						<apex:pageBlockSectionItem />
						<apex:outputField value="{!Evaluation__c.RUQ__c}" />
						<apex:outputField value="{!Evaluation__c.LUQ__c}" />

						<apex:outputField value="{!Evaluation__c.RUQ_Describe__c}" label="If Abnormal, Describe" rendered="{!Evaluation__c.RUQ__c='Abnormal'}" />
						<apex:pageBlockSectionItem rendered="{!Evaluation__c.RUQ__c!='Abnormal'}" />
						<apex:outputField value="{!Evaluation__c.LUQ_Describe__c}" label="If Abnormal, Describe" rendered="{!Evaluation__c.LUQ__c='Abnormal'}" />
						<apex:pageBlockSectionItem rendered="{!Evaluation__c.LUQ__c!='Abnormal'}" />

						<apex:outputField value="{!Evaluation__c.RLQ__c}" />
						<apex:outputField value="{!Evaluation__c.LLQ__c}" />

						<apex:outputField value="{!Evaluation__c.RLQ_Describe__c}" label="If Abnormal, Describe" rendered="{!Evaluation__c.RLQ__c='Abnormal'}" />
						<apex:pageBlockSectionItem rendered="{!Evaluation__c.RLQ__c!='Abnormal'}" />
						<apex:outputField value="{!Evaluation__c.LLQ_Describe__c}" label="If Abnormal, Describe" rendered="{!Evaluation__c.LLQ__c='Abnormal'}" />
						<apex:pageBlockSectionItem rendered="{!Evaluation__c.LLQ__c!='Abnormal'}" />

						<apex:outputField value="{!Evaluation__c.Abdomen__c}" />
						<apex:pageBlockSectionItem />
						
						<apex:outputfield Value="{!Evaluation__c.Weight_picklist__c}" label="Weight" />
						<apex:pageBlockSectionItem />
						
						<apex:pageBlockSectionItem rendered="{!Evaluation__c.Weight_picklist__c == 'Yes'}" >
							<apex:outputLabel value="" />
							<apex:outputPanel >
	                            <apex:outputLabel value="Current Weight"
	                                style="font-weight: Bold; color: #4A4A56; font-size: 10px;" />
	                                &nbsp;&nbsp;&nbsp;
	                                <apex:outputField id="lbs"
	                                value="{!Evaluation__c.Weightlbs__c}" style="margin-left: 25px;" />
	                            <apex:outputLabel for="lbs" style="font-weight:Bold;">{!$ObjectType.Evaluation__c.Fields.Weightlbs__c.label}</apex:outputLabel>
	                            <span />
	                            <apex:outputField id="oz" value="{!Evaluation__c.Weightoz__c}"
	                                style="margin-left: 25px;" />
	                            <apex:outputLabel for="in" style="font-weight:Bold;">{!$ObjectType.Evaluation__c.Fields.Weightoz__c.label}</apex:outputLabel>
	                            <span />
	                            <apex:outputText value=" (or) " />
	                            <apex:outputField id="kg" value="{!Evaluation__c.WeightKg__c}"
	                                style="margin-left: 25px;" />
	                            <apex:outputLabel for="kg" style="font-weight:Bold;">{!$ObjectType.Evaluation__c.Fields.WeightKg__c.label}</apex:outputLabel>
	                        </apex:outputPanel>
						</apex:pageBlockSectionItem>
						<apex:pageBlockSectionItem />

						<apex:outputField value="{!Evaluation__c.Bowel_Continence__c}" />
						<apex:pageBlockSectionItem />
						
                        <apex:outputField value="{!Evaluation__c.Elimination_Bowel_No_Continent_Appliance__c}" label="Devices"  />
                        <apex:pageBlockSectionItem />
                        
                        <apex:outputField value="{!Evaluation__c.Elimination_Bowel_No_Appliance_Other__c}" label="Specify Other" />
						<apex:pageBlockSectionItem />

						<apex:outputField value="{!Evaluation__c.Usual_Elimination_Frequeny__c}" />
						<apex:pageBlockSectionItem />

						<apex:outputField value="{!Evaluation__c.Last_BM__c}" />
						<apex:pageBlockSectionItem />

						<apex:outputField value="{!Evaluation__c.Bowel_Issues__c}" />
						<apex:pageBlockSectionItem />

						<apex:outputField value="{!Evaluation__c.Bowel_Issue_Type__c}" label="If Yes, Issue Type" rendered="{!Evaluation__c.Bowel_Issues__c='Yes'}" />
						<apex:pageBlockSectionItem />

						<apex:outputField value="{!Evaluation__c.Bowel_Issues_Additional_Information__c}" label="Additional Information" rendered="{!Evaluation__c.Bowel_Issues__c='Yes'}" />
						<apex:pageBlockSectionItem />

						<apex:outputField value="{!Evaluation__c.Incontinent_Neurogenic_Bowel__c}" label="Neurogenic Bowel" />
						<apex:pageBlockSectionItem />

						<apex:outputField value="{!Evaluation__c.Incontinent_Neuro_Bowel_Describe__c}" label="If Yes, Describe Program" rendered="{!Evaluation__c.Incontinent_Neurogenic_Bowel__c='Yes'}" />
						<apex:pageBlockSectionItem />

						<apex:outputField value="{!Evaluation__c.Perception_of_Need_to_Defecate__c}" />
						<apex:pageBlockSectionItem />
					</apex:pageBlockSection>
					<apex:pageBlockSection title="Elimination - Bladder" columns="1" >
						<apex:outputField value="{!Evaluation__c.Bladder_Continence__c}" />
                       	<apex:outputField value="{!Evaluation__c.Elimination_Bladder_No_Continent_Details__c}" label="Devices" />
						<apex:outputField value="{!Evaluation__c.Neurogenic_Bladder__c}" />
						<apex:outputField value="{!Evaluation__c.Urinary_Issues_Checkbox__c}" />
						<apex:outputField value="{!Evaluation__c.Urinary_Issues__c}" label="If Yes, Issue Type" rendered="{!Evaluation__c.Urinary_Issues_Checkbox__c='Yes'}" />
						<apex:outputField value="{!Evaluation__c.Urine_Color__c}" rendered="{!Evaluation__c.Urinary_Issues_Checkbox__c='Yes'}" />
						<apex:outputField value="{!Evaluation__c.Urine_Clarity__c}" rendered="{!Evaluation__c.Urinary_Issues_Checkbox__c='Yes'}" />
						<apex:outputField value="{!Evaluation__c.Urine_Odor__c}" rendered="{!Evaluation__c.Urinary_Issues_Checkbox__c='Yes'}" />
					</apex:pageBlockSection>
					<apex:pageBlockSection title="Dialysis" columns="1">
						<apex:outputField value="{!Evaluation__c.Dialysis_Picklist__c}" label="Dialysis" />
						<apex:outputField value="{!Evaluation__c.Dialysis_Type__c}" label="If Yes, Dialysis Type" rendered="{!Evaluation__c.Dialysis_Picklist__c='Yes'}" />
					</apex:pageBlockSection>
				</apex:pageBlock>
			</apex:tab>

			<apex:tab label="Skin/Body" name="skinBodyTab" styleClass="{!IF(Evaluation__c.Skin_Section_Completed__c, 'sectionCompleted', 'sectionNotCompleted')}">
				<apex:pageBlock >
					<apex:pageBlockSection columns="2" >
						<apex:pageBlockSectionItem >
							<apex:outputLabel Value="Shift Start Time" styleClass="labelCol" />
							<c:MilitaryDatetime dateTimeVal="{!Evaluation__c.Shift_Start_Time__c}" />
						</apex:pageBlockSectionItem>
						<apex:pageBlockSectionItem >
							<apex:outputLabel Value="Shift End Time" styleClass="labelCol" />
							<c:MilitaryDatetime dateTimeVal="{!Evaluation__c.Shift_End_Time__c}" />
						</apex:pageBlockSectionItem>
						<apex:outputField value="{!Evaluation__c.Status__c}" />
					</apex:pageBlockSection>
				</apex:pageBlock>
				<apex:pageBlock >
					<script>
						 jQuery(document).ready(function ($) {
						anno.reset();
						var el = $('#bodyMap').get(0);
						if (el) {
							anno.makeAnnotatable(el);
						}
						anno.hideSelectionWidget();
						var $el = $(el);
						<apex:repeat value="{!annotations}" var="annotation">
						anno.addAnnotation({
							Id: "{!annotation.Id}",
							src: $("#bodyMap").prop("src"),
							text: "{!JSENCODE(annotation.Annotation_Text__c)}",
							shapes: [{
								type: "{!JSENCODE(annotation.Annotation_Shape__c)}",
								geometry: {
									x: {!annotation.Annotation_X__c},
									y: {!annotation.Annotation_Y__c},
									width: {!annotation.Annotation_Width__c},
									height: {!annotation.Annotation_Height__c}
								}
							}],
							editable: false
						});
						</apex:repeat>
						var createAnnotationElements = function (annotations) {
							$('.annotation-number').remove();
							$('table#annotations tr').remove();
							$.each(annotations, function (index, annotation) {
								var $divEl = $("<div class='annotation-number' style='pointer-events:none; position: absolute; text-align: center; left: " + annotation.shapes[0].geometry.x * 100 + "%; width: " + annotation.shapes[0].geometry.width * 100 + "%; top: " + annotation.shapes[0].geometry.y * 100 + "%; height: " + annotation.shapes[0].geometry.height * 100 + "%;'></div>");
								$el.parent().append($divEl);
								var $textEl = $("<span style='line-height: " + $divEl.height() + "px; color: red; font-size: 1.5em;'>" + (index + 1) + "</span>");
								$divEl.append($textEl);
								$("table#annotations tbody").append("<tr><td>" + (index + 1) + "</td><td>" + annotation.text + "</td></tr>");
							});
						}
						createAnnotationElements(anno.getAnnotations());
						anno.addHandler('onAnnotationCreated', function (annotation) {
							createAnnotationElements(anno.getAnnotations());
						});
						anno.addHandler('onAnnotationUpdated', function (annotation) {
							createAnnotationElements(anno.getAnnotations());
						});
						anno.addHandler('onAnnotationRemoved', function (annotation) {
							createAnnotationElements(anno.getAnnotations());
						});
					});
					</script>
					 <apex:pageBlockSection columns="2" title="General Skin Condition">
						<apex:outputField value="{!Evaluation__c.Skin_Color__c}"
							label="Color" />
						<apex:outputField value="{!Evaluation__c.Skin_Temperature__c}"
							label="Temperature" />
						<apex:outputField value="{!Evaluation__c.Skin_Moisture__c}"
							label="Mositure" />
						<apex:outputField value="{!Evaluation__c.Skin_Turgor__c}"
							label="Turgor" />
						<apex:pageBlockSectionItem >
							<apex:outputLabel value="Edema" />
							<apex:outputPanel >
								<apex:outputField value="{!Evaluation__c.Skin_Edema__c}"
									label="Edema" />
								<apex:outputText styleClass="labelCol" value="Location"
									rendered="{!Evaluation__c.Skin_Edema__c == 'Yes'}" />
								<apex:outputField value="{!Evaluation__c.Skin_Edema_Location__c}"
									label="Edema Location" id="edemaLocation"
									rendered="{!Evaluation__c.Skin_Edema__c == 'Yes'}" />
								<apex:outputText styleClass="labelCol" value="Pitting"
									rendered="{!Evaluation__c.Skin_Edema__c == 'Yes'}" />
								<apex:outputField value="{!Evaluation__c.Skin_Edema_Pitting__c}"
									label="Pitting" id="edemaPitting"
									rendered="{!Evaluation__c.Skin_Edema__c == 'Yes'}" />
							</apex:outputPanel>
						</apex:pageBlockSectionItem>
						<apex:outputField value="{!Evaluation__c.Skin_Behavior__c}"
							label="Behavior" />
						<apex:pageBlockSectionItem >
							<apex:outputLabel value="Peripheral Capillary Refill Location" />
							<apex:outputPanel >
								<apex:outputField value="{!Evaluation__c.Peripheral_Capillary_Refill_Location__c}" />
								<apex:outputText value="# of Seconds" styleClass="labelCol"
									style="margin-left:20px" />
								<apex:outputField Value="{!Evaluation__c.Peripheral_Capillary_Refill_of_Seconds__c}" />
							</apex:outputPanel>
						</apex:pageBlockSectionItem>
					</apex:pageBlockSection>
					<c:EvaluationResponseTable parentId="{!Evaluation__c.Id}" type="Wound Detail" formId="{!$Component.wholePage}" uniqueId="wound" />
					<apex:pageBlockSection columns="1" >
						<apex:outputField value="{!Evaluation__c.Skin_Intact_Picklist__c}" />
					</apex:pageBlockSection>
					<apex:pageBlockSection title="Body Map" Columns="2" rendered="{!Evaluation__c.Skin_Intact_Picklist__c == 'No'}" >
						<div
							style="position: relative; float: left; margin-left: 80px; margin-bottom: 10px;">
							<img width="318" height="298"
								style="float: left; border: 3px solid #ECECEC;"
								src="{!baseUrl + URLFOR($Resource.WholeBodyNoGrid)}"
								id="bodyMap" />
						</div>
						<div style="margin-left: 420px; height: 298px; overflow: auto;">
							<table id="annotations">
								<tbody>
								</tbody>
							</table>
						</div>
						<apex:pageBlockSectionItem />
						<apex:outputField value="{!Evaluation__c.Body_Map_Comments__c}"
							label="Other Body Map Comments" />
						<apex:pageBlockSectionItem />

						<apex:outputField value="{!Evaluation__c.Wound_Wac_Picklist__c}" label="Wound Wac" />
						<apex:outputField value="{!Evaluation__c.Speciality_Bed_Picklist__c}"  label="Speciality Bed"/>
						<apex:outputField value="{!Evaluation__c.Wound_Vac_Frequency__c}"  rendered="{!Evaluation__c.Wound_Wac_Picklist__c == 'Yes'}" label="Frequency"/>
						<apex:outputField value="{!Evaluation__c.Specialty_Bed_Type__c}" rendered="{!Evaluation__c.Speciality_Bed_Picklist__c == 'Yes'}" label="Type"/>
						<apex:outputField value="{!Evaluation__c.Wound_Vac_Duration__c}" rendered="{!Evaluation__c.Wound_Wac_Picklist__c == 'Yes'}" label="Duration" />
					</apex:pageBlockSection>
					  <apex:pageBlockSection columns="1" title="Pressure Ulcer Details" rendered="{!Evaluation__c.Skin_Intact_Picklist__c == 'No'}" >
						 <apex:actionFunction name="showAddpUlcerDetail" action="{!showAddpUlcerDetail}" status="loadingpUlcerDetailStatus" rerender="pUlcerDetailDialogMainBlock" oncomplete="openModalDialog('{!$Component.pUlcerDetailDialog}', 'Add Pressure Ulcers Detail', '{!$Component.wholePage}');" />
						<apex:actionFunction name="showEditpUlcerDetail" action="{!showEditpUlcerDetail}" status="loadingpUlcerDetailStatus" rerender="pUlcerDetailDialogMainBlock" oncomplete="openModalDialog('{!$Component.pUlcerDetailDialog}', 'Edit Pressure Ulcers Detail', '{!$Component.wholePage}');">
							<apex:param name="currentVitalsDetailId" assignTo="{!currentpUlcerDetailId}" value="" />
						</apex:actionFunction>
						<apex:outputPanel layout="none">
							<apex:commandButton value="Add Pressure Ulcers Details" onclick="showAddpUlcerDetail(); return false;" />
							<apex:actionStatus id="loadingpUlcerDetailStatus">
								<apex:facet name="start">
									<apex:image height="16px" value="/img/loading32.gif" styleClass="dialogLoadingSpinner" />
								</apex:facet>
								<apex:facet name="stop" />
							</apex:actionStatus>
						</apex:outputPanel>
						<apex:pageBlockTable value="{!pUlcers}" var="ulcer" id="pUlcersTable">
							<apex:column headerValue="{!IF(pUlcers.size>0, 'Action', '')}" width="50px">
								<apex:commandLink onclick="showEditpUlcerDetail('{!ulcer.Id}'); return false;" value="Edit" />
							</apex:column>
							<apex:column value="{!ulcer.Decubity_Stage__c}" />
							<apex:column value="{!ulcer.Location__c}" />
							<apex:column value="{!ulcer.Decubity_Measurement__c}" />
							<apex:column value="{!ulcer.Date__c}" headerValue="Date Last Measured"/>
							<apex:column value="{!ulcer.Treatment__c}" />
						</apex:pageBlockTable>
					</apex:pageBlockSection>
				</apex:pageBlock>
			</apex:tab>

			<apex:tab label="Neurological" name="neuroTab" styleClass="{!IF(Evaluation__c.Neuro_Section_Completed__c, 'sectionCompleted', 'sectionNotCompleted')}">
				<apex:pageBlock >
					<apex:pageBlockSection columns="2" >
						<apex:pageBlockSectionItem >
							<apex:outputLabel Value="Shift Start Time" styleClass="labelCol" />
							<c:MilitaryDatetime dateTimeVal="{!Evaluation__c.Shift_Start_Time__c}" />
						</apex:pageBlockSectionItem>
						<apex:pageBlockSectionItem >
							<apex:outputLabel Value="Shift End Time" styleClass="labelCol" />
							<c:MilitaryDatetime dateTimeVal="{!Evaluation__c.Shift_End_Time__c}" />
						</apex:pageBlockSectionItem>
						<apex:outputField value="{!Evaluation__c.Status__c}" />
					</apex:pageBlockSection>
				</apex:pageBlock>
				<apex:pageBlock >
					<apex:pageblockSection Columns="1">
						<apex:outputField value="{!Evaluation__c.Rancho_Level__c}" />
					</apex:pageBlockSection>
					<apex:pageBlockSection columns="1" rendered="{!Evaluation__c.Rancho_Level__c != '(1) No Response' && Evaluation__c.Rancho_Level__c != null}" >
						<apex:pageBlockSectionItem >
							<apex:outputLabel value="Responds To" />
							<apex:outputPanel >
								<apex:outputText value="{!If (Evaluation__c.Verbal_Stim__c, 'Verbal Stim;', '')}" />
								<apex:outputText value="{!If (Evaluation__c.Auditory_Stim__c, 'Auditory Stim;', '')}" />
								<apex:outputText value="{!If (Evaluation__c.Tactile_Stim__c, 'Tactile Stim;', '')}" />
								<apex:outputText value="{!If (Evaluation__c.Responds_To_Pain__c, 'Pain;', '')}" />
								<apex:outputText value="{!If (Evaluation__c.Visual__c, 'Visual Stim;', '')}" />
							</apex:outputPanel>
						</apex:pageBlockSectionItem>

						<apex:outputField value="{!Evaluation__c.Level_of_Conciousness__c}" />
						<apex:outputField value="{!Evaluation__c.Orientation__c}" label="Orientation" />

						<apex:pageBlockSectionItem >
							<apex:outputLabel value="Behavior" />
							<apex:outputPanel >
								<apex:outputText value="{!if (Evaluation__c.Cooperative__c, 'Cooperative;','')}" />
								<apex:outputText value="{!if (Evaluation__c.Impulsive__c, 'Impulsive;','')}" />
								<apex:outputText value="{!if (Evaluation__c.Inappropriate__c, 'Inappropriate;','')}" />
								<apex:outputText value="{!if (Evaluation__c.Agitated__c, 'Agitated;','')}" />
								<apex:outputText value="{!if (Evaluation__c.Combative__c, 'Combative;','')}" />
								<apex:outputText value="{!if (Evaluation__c.Confused__c, 'Confused;','')}" />
								<apex:outputText value="{!if (Evaluation__c.Unresponsive__c, 'Unresponsive;','')}" />
							</apex:outputPanel>
						</apex:pageBlockSectionItem>
						<apex:outputField value="{!Evaluation__c.Mood__c}" label="Mood" />
						<apex:outputField value="{!Evaluation__c.Desire_to_hurt_themselves__c}" label="Has Resident Expressed Desire to Hurt Him/Herself?"  rendered="{!CONTAINS(Evaluation__c.Mood__c,'Sad') || CONTAINS(Evaluation__c.Mood__c,'flat') }"/>
						<apex:outputField value="{!Evaluation__c.Plan_to_Harm_themselves__c}" label="Does Resident Have a Plan to Harm Him/Herself?" rendered="{!Evaluation__c.Desire_to_hurt_themselves__c == 'Yes'}"/>
						<apex:outputText value=""  label="Communication" />
						<apex:outputField value="{!Evaluation__c.Able_to_make_Needs_Known__c}" label="Ability to make Needs known" />
						<apex:outputText value="{!if (CONTAINS(Evaluation__c.Expression__c, 'Non-Verbal'), Evaluation__c.Expression__c + ' - ' + Evaluation__c.Expression_Other__c, Evaluation__c.Expression__c)}" label="Expression"  rendered="{!Evaluation__c.Able_to_make_Needs_Known__c == 'No'}"/>
					</apex:pageblockSection>
					<apex:pageBlockSection title="Safety" columns="1" >
						<apex:outputField value="{!Evaluation__c.Safety_Awareness__c}" label="Safety Awareness" />
						<apex:outputField value="{!Evaluation__c.Bed_Alarm__c}" label="Bed Alarm" />
						 <apex:outputText value="{!If ( Evaluation__c.One_to_One_Sitter__c, Evaluation__c.one_to_One_Sitter_of_Hours_per_day__c + ' hours per day', '')}" label="One to One Sitter"/>
						 <apex:outputField value="{!Evaluation__c.Low_Bed__c}" label="Low Bed" />
					</apex:pageBlockSection>
					<apex:pageBlockSection title="Pain" id="painSection" columns="1">
						<apex:outputField value="{!Evaluation__c.Pain_Present__c}" />
					</apex:pageBlockSection>
					<apex:pageBlockSection id="painResponsesSection" columns="1" rendered="{!Evaluation__c.Pain_Present__c='Yes'}">
						<apex:pageBlockSectionItem >
							<apex:outputText value="Specify Pain Level" />
							<apex:image url="{!URLFOR($Resource.Wongbakerfaces)}" height="110px" width="45%" />
						</apex:pageBlockSectionItem>
						<apex:repeat value="{!pains}" var="pain">
							<apex:pageBlockSectionItem >
								<apex:outputLabel value="Pain Level" />
								<apex:outputPanel layout="none">
									<c:Slider disabled="true" onchange="handleSliderChange('{!$Component.initialPainLevel}')" options="{!painSliderOptions}" initial="{!pain.Initial_Pain_Level__c}" morestyle="display: inline-block; width: 40%;" />
									<apex:outputLabel value="Narrative Note" style="margin: auto 5px;" />
									<apex:outputField value="{!pain.Narrative_Note__c}" />
									<apex:outputLabel value="Time Observed" style="margin: auto 5px;" />
									<apex:outputField value="{!pain.Time_Observed__c}" />
								</apex:outputPanel>
							</apex:pageBlockSectionItem>
							<apex:pageBlockSectionItem >
								<apex:outputLabel value="Follow-up Pain Level" />
								<apex:outputPanel layout="none">
									<c:Slider disabled="true" onchange="handleSliderChange('{!$Component.followUpPainLevel}')" options="{!painSliderOptions}" initial="{!pain.Follow_up_Pain_Level__c}" morestyle="display: inline-block; width: 40%;" />
									<apex:outputLabel value="Describe Effectiveness" style="margin: auto 5px;" />
									<apex:outputField value="{!pain.Follow_up_Effectiveness__c}" />
								</apex:outputPanel>
							</apex:pageBlockSectionItem>
						</apex:repeat>
					</apex:pageBlockSection>
				</apex:pageBlock>
			</apex:tab>

			<apex:tab label="Ortho" name="orthoTab" styleClass="{!IF(Evaluation__c.Ortho_Section_Completed__c, 'sectionCompleted', 'sectionNotCompleted')}">
				<apex:pageBlock >
					<apex:pageBlockSection columns="2" >
						<apex:pageBlockSectionItem >
							<apex:outputLabel Value="Shift Start Time" styleClass="labelCol" />
							<c:MilitaryDatetime dateTimeVal="{!Evaluation__c.Shift_Start_Time__c}" />
						</apex:pageBlockSectionItem>
						<apex:pageBlockSectionItem >
							<apex:outputLabel Value="Shift End Time" styleClass="labelCol" />
							<c:MilitaryDatetime dateTimeVal="{!Evaluation__c.Shift_End_Time__c}" />
						</apex:pageBlockSectionItem>
						<apex:outputField value="{!Evaluation__c.Status__c}" />
					</apex:pageBlockSection>
				</apex:pageBlock>
				<apex:pageBlock >
					<apex:pageBlockSection columns="2">
						<apex:pageBlockSectionItem >
							<apex:outputPanel >
								<apex:outputLabel for="cast" value="Cast" />
								<br />
								<br />
								<apex:outputLabel for="castLocation" value="Location" id="castLocationLabel" rendered="{!Evaluation__c.Cast_Picklist__c == 'Yes'}"/>
								<br />
								<br />
								<apex:outputLabel for="OthercastLocation" value="Other" id="OthercastLocationLabel" rendered="{!Evaluation__c.Ortho_Cast_Location__c == 'Other'}" />
							</apex:outputPanel>
							<apex:outputPanel >
								<apex:outputText id="cast" value="{!Evaluation__c.Cast_Picklist__c}"  />
								<br/>
								<br/>
								<apex:outputText value="{!Evaluation__c.Ortho_Cast_Location__c}" id="castLocation"  rendered="{!Evaluation__c.Cast_Picklist__c == 'Yes'}"/>
								<br/>
								<br/>
								<apex:outputText value="{!Evaluation__c.Cast_Location__c}"  rendered="{!Evaluation__c.Ortho_Cast_Location__c == 'Other'}"/>
							</apex:outputPanel>
						</apex:pageBlockSectionItem>
						<apex:pageBlockSectionItem >
							<apex:outputLabel value="{! if ( Evaluation__c.Traction_Picklist__c == 'Yes', 'Traction<br /><br />Location<br /><br />Type<br /><br />Weight', 'Traction')}" escape="false" />
							<apex:outputPanel rendered="{!Evaluation__c.Traction_Picklist__c == 'Yes'}">
								<apex:outputText value="Yes" />
								<br />
								<br />
								<apex:outputText id="tloc" value="{!Evaluation__c.Traction_Location__c}" />
								<br />
								<br />
								<apex:outputText id="ttype" value="{!Evaluation__c.Traction_Type__c }" />
								<br />
								<br />
								<apex:outputText id="tweight" value="{!Evaluation__c.Traction_Weight__c}" />
							</apex:outputPanel>
						</apex:pageBlockSectionItem>

						<apex:pageBlockSectionItem >
							<apex:outputLabel value="{! if ( Evaluation__c.External_Device_Picklist__c == 'Yes', 'External Devices<br /><br />Location<br /><br />Type<br />', 'External Devices')}" escape="false" />
							<apex:outputPanel rendered="{!Evaluation__c.External_Device_Picklist__c == 'Yes'}">
								<br />
								<br />
								<apex:outputText id="edloc" value="{!Evaluation__c.External_Devices_Location__c}" />
								<br />
								<br />
								<apex:outputText id="edtype" value="{!Evaluation__c.External_Devices_Type__c }" />
								<br />
								<br />
							</apex:outputPanel>
						</apex:pageBlockSectionItem>
					</apex:pageBlockSection>
				</apex:pageBlock>
			</apex:tab>

			<apex:tab label="Psycho/Social" name="psychoSocialTab" styleClass="{!IF(Evaluation__c.Psycho_Social_Section_Completed__c, 'sectionCompleted', 'sectionNotCompleted')}">
				<apex:pageBlock >
					<apex:pageBlockSection columns="2" >
						<apex:pageBlockSectionItem >
							<apex:outputLabel Value="Shift Start Time" styleClass="labelCol" />
							<c:MilitaryDatetime dateTimeVal="{!Evaluation__c.Shift_Start_Time__c}" />
						</apex:pageBlockSectionItem>
						<apex:pageBlockSectionItem >
							<apex:outputLabel Value="Shift End Time" styleClass="labelCol" />
							<c:MilitaryDatetime dateTimeVal="{!Evaluation__c.Shift_End_Time__c}" />
						</apex:pageBlockSectionItem>
						<apex:outputField value="{!Evaluation__c.Status__c}" />
					</apex:pageBlockSection>
				</apex:pageBlock>
				<apex:pageBlock >
					<apex:pageBlockSection columns="1">
						<apex:pageBlockSectionItem >
							<apex:outputLabel >Does Resident appear to be coping well</apex:outputLabel>

							<apex:outputField value="{!Evaluation__c.Resident_Coping_Well__c}" />
						</apex:pageBlockSectionItem>
						<apex:outputField value="{!Evaluation__c.Coping_Description__c}" label="Describe" rendered="{!Evaluation__c.Resident_Coping_Well__c == 'No'}" />
						<apex:pageBlockSectionItem >
							<apex:outputlabel >Does Resident appear to
								<br/>demonstrate/note
								<br/>any of the following</apex:outputlabel>
							<apex:outputField value="{!Evaluation__c.Does_Resident_appear_to_demonstrate__c}" />
						</apex:pageBlockSectionItem>
						<apex:pageBlockSectionItem >
							<apex:outputText value="" />
							<apex:selectCheckboxes value="{!selectedCoping}" layout="pageDirection" style="margin-left:-13px" disabled="true">
								<apex:selectOptions value="{!copingValues}" />
							</apex:selectCheckboxes>
						</apex:pageBlockSectionItem>
					</apex:pageBlockSection>
				</apex:pageBlock>
			</apex:tab>
			<apex:commandButton value="Finalize" onClick="finalize(); return false;" style="position: absolute; margin-left: 680px; margin-top: 8px;" rendered="{!Evaluation__c.Status__c =='Draft'}" />
			<apex:commandButton value="Disregard" style="position: absolute; margin-left: 730px; margin-top: 8px;" rendered="{!Evaluation__c.Status__c =='Draft' &&  Evaluation__c.OwnerId == $User.Id}" onClick="disregard(); return false;"/>
			<apex:commandButton value="E-Sign" style="position: absolute; margin-left: 792px; margin-top: 8px;" rendered="{!Evaluation__c.OwnerId == $User.Id && Evaluation__c.Status__c != 'Disregard' && !Evaluation__c.Is_Signed__c}" onClick="authenticate(); return false;" />
			<apex:commandButton value="Print PDF" style="position: absolute; margin-left: 840px; margin-top: 8px;"  onclick="openWin('/apex/CMShiftAssessmentPDF?id={!Evaluation__c.Id}'); return false;" />
		</apex:tabPanel>
		<apex:pageBlock id="buttons">
			<apex:pageBlockButtons location="bottom">
				<apex:commandButton onclick="window.location='/apex/CMShiftAssessmentEdit?id={!Evaluation.Id}&tab={!selectedTab}'; return false;" value="Edit" rendered="{!Evaluation__c.Status__c='Draft' && Evaluation__c.OwnerId == $User.Id && !Evaluation__c.Is_Signed__c}"/>
			</apex:pageBlockButtons>
		</apex:pageBlock>
		<apex:outputPanel id="vitalsDetailDialog" style="display:none">
			<span class="ui-helper-hidden-accessible"><output type="text"/></span>
			<apex:pageBlock title="Add/Edit Vitals Detail" id="vitalsDetailDialogMainBlock">
				<apex:pageblockButtons location="bottom">
					<apex:actionFunction name="saveVitalsDetail" action="{!saveVitalsDetail}" rerender="vitalsTable,vitalsDetailDialogMainBlock,vitalsDetailDialogErrors" status="saveVitalsDetailStatus" oncomplete="afterSave('{!$Component.vitalsDetailDialog}', request.options.parameters.keepDialogOpen, showAddVitalsDetail);">
						<apex:param name="keepDialogOpen" value="" />
					</apex:actionFunction>
					<apex:actionStatus id="saveVitalsDetailStatus">
						<apex:facet name="stop">
							<apex:outputPanel id="vitDetailsButtons">
								<apex:commandButton value="Save" onClick="saveVitalsDetail(false); return false;" />
								<apex:commandButton value="Save & New" onClick="saveVitalsDetail(true); return false;" />
								<apex:commandButton value="Cancel" onClick="closeModalDialog('{!$Component.vitalsDetailDialog}'); return false;" />
							</apex:outputPanel>
						</apex:facet>
						<apex:facet name="start">
							<apex:image height="16px" value="/img/loading32.gif" styleClass="dialogLoadingSpinner" />
						</apex:facet>
					</apex:actionStatus>
				</apex:pageblockButtons>
				<apex:pageMessages id="vitalsDetailDialogErrors" />
				<apex:pageBlockSection columns="2">
					<apex:inputField value="{!currentVitalsDetail.Date__c}" />
					<apex:pageBlockSectionItem >
						<apex:outputPanel >
							<apex:outputLabel for="DiagheartRate" value="Heart Rate" />
							<br/>
							<br />
							<apex:outputLabel for="DiaginterventionPicklist" value="Intervention Needed" id="DiaginterventionLabel" />
							<br />
							<br />
							<apex:outputLabel for="DiaginterventionDescribe" value="Narrative Note" id="DiagnarrativeLabel" />
						</apex:outputPanel>
						<apex:outputPanel >
							<apex:inputField value="{!currentVitalsDetail.Heart_Rate__c}" id="DiagheartRate" onblur="handleVitals(); return false;" />
							<br/>
							<div class="requiredInput">
								<div class="requiredBlock"></div>
								<apex:inputField Value="{!currentVitalsDetail.HR_Intervention_Needed__c}" id="DiaginterventionPicklist" onchange="handleVitals(); return false;" />
							</div>
							<div class="requiredInput">
								<div class="requiredBlock"></div>
								<apex:inputTextArea value="{!currentVitalsDetail.HR_Narrative_Note__c}" id="DiaginterventionDescribe" rows="3" cols="40" />
							</div>
						</apex:outputPanel>
					</apex:pageBlockSectionItem>
					<apex:pageBlockSectionItem >
						<apex:outputPanel >
							<apex:outputLabel for="DiagO2" value="O2 Saturation" />
							<br/>
							<br />
							<apex:outputLabel for="DiagO2interventionPicklist" value="Intervention Needed" id="DiagO2interventionLabel" />
							<br />
							<br />
							<apex:outputLabel for="DiagO2interventionDescribe" value="Narrative Note" id="DiagO2narrativeLabel" />
						</apex:outputPanel>
						<apex:outputPanel >
							<apex:inputField value="{!currentVitalsDetail.O2_Saturation__c}" id="DiagO2" onblur="handleVitals(); return false;" />
							<br/>
							<div class="requiredInput">
								<div class="requiredBlock"></div>
								<apex:inputField Value="{!currentVitalsDetail.O2_Intervention_Needed__c}" id="DiagO2interventionPicklist" onchange="handleVitals(); return false;" />
							</div>
							<div class="requiredInput">
								<div class="requiredBlock"></div>
								<apex:inputTextArea value="{!currentVitalsDetail.O2_Narrative_Note__c}" id="DiagO2interventionDescribe" rows="3" cols="40" />
							</div>
						</apex:outputPanel>
					</apex:pageBlockSectionItem>
					<apex:inputField value="{!currentVitalsDetail.R__c}" />
					<apex:inputField value="{!currentVitalsDetail.Temperature__c}" />
					<apex:inputField value="{!currentVitalsDetail.O2_Saturation__c}" />
				</apex:pageBlockSection>
			</apex:pageBlock>
		</apex:outputPanel>
		<apex:outputPanel id="pUlcerDetailDialog" style="display:none">
			<span class="ui-helper-hidden-accessible"><input type="text"/></span>
			<apex:pageBlock title="Add/Edit Pressure Ulcer Detail" id="pUlcerDetailDialogMainBlock">
				<apex:pageBlockButtons location="bottom" >
					<apex:actionFunction name="savepUlcerDetail" action="{!savepUlcerDetail}" rerender="pUlcersTable,pUlcerDetailDialogMainBlock,pUlcerDetailDialogErrors" status="savepUlcerDetailStatus" oncomplete="afterSave('{!$Component.pUlcerDetailDialog}', request.options.parameters.keepDialogOpen, showAddpUlcerDetail);">
						<apex:param name="keepDialogOpen" value="" />
					</apex:actionFunction>
					<apex:actionStatus id="savepUlcerDetailStatus">
						<apex:facet name="stop">
							<apex:outputPanel id="pUlcerDetailButtons">
								<apex:commandButton value="Save" onClick="savepUlcerDetail(false); return false;" />
								<apex:commandButton value="Save & New" onClick="savepUlcerDetail(true); return false;" />
								<apex:commandButton value="Cancel" onClick="closeModalDialog('{!$Component.pUlcerDetailDialog}'); return false;" />
							</apex:outputPanel>
						</apex:facet>
						<apex:facet name="start">
							<apex:image height="16px" value="/img/loading32.gif" styleClass="dialogLoadingSpinner" />
						</apex:facet>
					</apex:actionStatus>
				</apex:pageBlockButtons>
				<apex:pageMessages id="pUlcerDetailDialogErrors" />
				<apex:pageBlockSection columns="2" >
					<apex:inputField value="{!currentpUlcerDetail.Decubity_Stage__c}" />
					<apex:inputField value="{!currentpUlcerDetail.Location__c}" />
					<apex:inputField value="{!currentpUlcerDetail.Decubity_Measurement__c}" />
					<apex:inputField value="{!currentpUlcerDetail.Treatment__c}" />
					<apex:inputField value="{!currentpUlcerDetail.Date__c}" label="Date last measured"/>
				</apex:pageBlockSection>
			</apex:pageBlock>
		</apex:outputPanel>
		<c:Authentication formId="{!$Component.wholePage}" title="E-Sign" handler="CMShiftAssessmentEsign" objectId="{!Evaluation__c.Id}" oncomplete="alert('This document was electronically signed by {!$User.FirstName} ({!$User.Email}) on {!NOW()}'); window.location='/{!Evaluation__c}'; return false;" />
	</apex:form>
	<apex:actionStatus id="pageProcessing">
		<apex:facet name="start">
			<div class="thinking">
				<div class="thinkingwheel">
					<span><img class="waitingImage" src="/img/loading.gif" title="Please Wait..." />&nbsp; Saving &amp; Processing...</span>
				</div>
			</div>
		</apex:facet>
		<apex:facet name="stop" />
	</apex:actionStatus>
</apex:page>